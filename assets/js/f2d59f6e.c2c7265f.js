"use strict";(self.webpackChunkhx_loli=self.webpackChunkhx_loli||[]).push([[28024],{28453:(n,e,s)=>{s.d(e,{R:()=>c,x:()=>l});var r=s(96540);const i={},t=r.createContext(i);function c(n){const e=r.useContext(t);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:c(n.components),r.createElement(t.Provider,{value:e},n.children)}},96018:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"\u5d4c\u5165\u5f0f/ROS/\u5b9e\u73b0\u6fc0\u5149\u96f7\u8fbe\u907f\u969c\u3010\u8d85\u7b80\u7565\u7248\u3011/index","title":"007.\u5b9e\u73b0\u6fc0\u5149\u96f7\u8fbe\u907f\u969c(\u8d85\u7b80\u7565\u7248)","description":"- \u539f\u7406:","source":"@site/docs/011-\u5d4c\u5165\u5f0f/003-ROS/007-\u5b9e\u73b0\u6fc0\u5149\u96f7\u8fbe\u907f\u969c\u3010\u8d85\u7b80\u7565\u7248\u3011/index.md","sourceDirName":"011-\u5d4c\u5165\u5f0f/003-ROS/007-\u5b9e\u73b0\u6fc0\u5149\u96f7\u8fbe\u907f\u969c\u3010\u8d85\u7b80\u7565\u7248\u3011","slug":"/\u5d4c\u5165\u5f0f/ROS/\u5b9e\u73b0\u6fc0\u5149\u96f7\u8fbe\u907f\u969c\u3010\u8d85\u7b80\u7565\u7248\u3011/","permalink":"/HXLoLi/docs/\u5d4c\u5165\u5f0f/ROS/\u5b9e\u73b0\u6fc0\u5149\u96f7\u8fbe\u907f\u969c\u3010\u8d85\u7b80\u7565\u7248\u3011/","draft":false,"unlisted":false,"editUrl":"https://github.com/HengXin666/HXLoLi/edit/main/docs/011-\u5d4c\u5165\u5f0f/003-ROS/007-\u5b9e\u73b0\u6fc0\u5149\u96f7\u8fbe\u907f\u969c\u3010\u8d85\u7b80\u7565\u7248\u3011/index.md","tags":[],"version":"current","lastUpdatedBy":"Heng_Xin_666","lastUpdatedAt":1745851959000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u5b9e\u73b0\u83b7\u53d6\u6fc0\u5149\u96f7\u8fbe\u6570\u636e\u7684\u8282\u70b9","permalink":"/HXLoLi/docs/\u5d4c\u5165\u5f0f/ROS/\u5b9e\u73b0\u83b7\u53d6\u6fc0\u5149\u96f7\u8fbe\u6570\u636e\u7684\u8282\u70b9/"},"next":{"title":"\u5b9e\u73b0IMU\u822a\u5411\u9501\u5b9a","permalink":"/HXLoLi/docs/\u5d4c\u5165\u5f0f/ROS/\u5b9e\u73b0IMU\u822a\u5411\u9501\u5b9a/"}}');var i=s(74848),t=s(28453);const c={},l="007.\u5b9e\u73b0\u6fc0\u5149\u96f7\u8fbe\u907f\u969c(\u8d85\u7b80\u7565\u7248)",o={},a=[];function d(n){const e={a:"a",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"007\u5b9e\u73b0\u6fc0\u5149\u96f7\u8fbe\u907f\u969c\u8d85\u7b80\u7565\u7248",children:"007.\u5b9e\u73b0\u6fc0\u5149\u96f7\u8fbe\u907f\u969c(\u8d85\u7b80\u7565\u7248)"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u539f\u7406:\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:'"/scan"'}),"--\u5f97\u5230\u96f7\u8fbe\u6570\u636e--\x3e",(0,i.jsx)(e.code,{children:"\u7a0b\u5e8f\u5904\u7406"}),"--\u53d1\u9001--\x3e",(0,i.jsx)(e.code,{children:'"/cmd_vel"'}),"(\u8fdb\u884c\u79fb\u52a8)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4ee3\u7801, \u76f4\u63a5\u5728",(0,i.jsx)(e.a,{href:"/HXLoLi/docs/%E5%B5%8C%E5%85%A5%E5%BC%8F/ROS/%E5%AE%9E%E7%8E%B0%E8%8E%B7%E5%8F%96%E6%BF%80%E5%85%89%E9%9B%B7%E8%BE%BE%E6%95%B0%E6%8D%AE%E7%9A%84%E8%8A%82%E7%82%B9/",children:"006.\u5b9e\u73b0\u83b7\u53d6\u6fc0\u5149\u96f7\u8fbe\u6570\u636e\u7684\u8282\u70b9"}),"\u57fa\u7840\u4e0a\u8fdb\u884c\u4fee\u6539\u4e86"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ee3\u7801:"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-C++",children:'#include <ros/ros.h>\n#include <sensor_msgs/LaserScan.h>\n#include <geometry_msgs/Twist.h>\n\n// \u5168\u5c40\u53d8\u91cf, \u65b9\u4fbf\u5728`laiar_cb`\u56de\u8c03\u51fd\u6570\u91cc\u9762\u4f7f\u7528\nros::Publisher pub_vel;\n\nvoid laiar_cb(const sensor_msgs::LaserScan& msg) {\n    float fMidDist = msg.ranges[180];\n    ROS_INFO("\u524d\u65b9\u6d4b\u8ddd\u503c\u4e3a ranges[180] = %.4f \u7c73", fMidDist);\n\n    geometry_msgs::Twist vel_cmd;\n\n/**\n * \u9700\u8981\u8003\u8651\u673a\u5668\u4eba\u81ea\u8eab\u7684\u8f6e\u5ed3, \u8fd9\u91cc\u53ea\u662f\u7c97\u7565\u7684\u903b\u8f91, \u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u80fd\u4f1a\u4e00\u76f4\u539f\u5730\u8f6c\u5708\n */\n\n    if (msg.ranges[165] < 1.f || msg.ranges[195] < 1.f || fMidDist < 1.f) {\n        vel_cmd.angular.z = 0.5;\n    } else {\n        vel_cmd.linear.x = 0.5;\n    }\n    \n    pub_vel.publish(vel_cmd);\n}\n\nint main(int argc, char *argv[]) {\n    setlocale(LC_ALL, "");\n    ros::init(argc, argv, "lidar_node");\n\n    ros::NodeHandle nh;\n    ros::Subscriber lidar_sub = nh.subscribe("/scan", 10, laiar_cb);\n    pub_vel = nh.advertise<geometry_msgs::Twist>("/cmd_vel", 10);\n    ros::spin();\n\n    return 0;\n}\n'})})]})}function u(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}}}]);