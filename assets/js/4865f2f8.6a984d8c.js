"use strict";(self.webpackChunkhx_loli=self.webpackChunkhx_loli||[]).push([[79914],{14991:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"DevOps\u4e0e\u7248\u672c\u63a7\u5236/Docker\u5bb9\u5668/Docker\u8fdb\u9636\u7bc7/DockerFile/DockerFile\u5e38\u7528\u4fdd\u7559\u5b57\u6307\u4ee4/index","title":"2.3 DockerFile\u5e38\u7528\u4fdd\u7559\u5b57\u6307\u4ee4","description":"\u6211\u4eec\u53c2\u8003tomcat9.0\u7684DockeFile:","source":"@site/docs/004-DevOps\u4e0e\u7248\u672c\u63a7\u5236/002-Docker\u5bb9\u5668/004-Docker\u8fdb\u9636\u7bc7/001-DockerFile/002-DockerFile\u5e38\u7528\u4fdd\u7559\u5b57\u6307\u4ee4/index.md","sourceDirName":"004-DevOps\u4e0e\u7248\u672c\u63a7\u5236/002-Docker\u5bb9\u5668/004-Docker\u8fdb\u9636\u7bc7/001-DockerFile/002-DockerFile\u5e38\u7528\u4fdd\u7559\u5b57\u6307\u4ee4","slug":"/DevOps\u4e0e\u7248\u672c\u63a7\u5236/Docker\u5bb9\u5668/Docker\u8fdb\u9636\u7bc7/DockerFile/DockerFile\u5e38\u7528\u4fdd\u7559\u5b57\u6307\u4ee4/","permalink":"/HXLoLi/docs/DevOps\u4e0e\u7248\u672c\u63a7\u5236/Docker\u5bb9\u5668/Docker\u8fdb\u9636\u7bc7/DockerFile/DockerFile\u5e38\u7528\u4fdd\u7559\u5b57\u6307\u4ee4/","draft":false,"unlisted":false,"editUrl":"https://github.com/HengXin666/HXLoLi/edit/main/docs/004-DevOps\u4e0e\u7248\u672c\u63a7\u5236/002-Docker\u5bb9\u5668/004-Docker\u8fdb\u9636\u7bc7/001-DockerFile/002-DockerFile\u5e38\u7528\u4fdd\u7559\u5b57\u6307\u4ee4/index.md","tags":[],"version":"current","lastUpdatedBy":"Heng_Xin_666","lastUpdatedAt":1745851959000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"DockerFile\u57fa\u7840\u77e5\u8bc6","permalink":"/HXLoLi/docs/DevOps\u4e0e\u7248\u672c\u63a7\u5236/Docker\u5bb9\u5668/Docker\u8fdb\u9636\u7bc7/DockerFile/DockerFile\u57fa\u7840\u77e5\u8bc6/"},"next":{"title":"DockerFile\u6848\u4f8b","permalink":"/HXLoLi/docs/DevOps\u4e0e\u7248\u672c\u63a7\u5236/Docker\u5bb9\u5668/Docker\u8fdb\u9636\u7bc7/DockerFile/DockerFile\u6848\u4f8b/"}}');var c=i(74848),s=i(28453);const l={},t="2.3 DockerFile\u5e38\u7528\u4fdd\u7559\u5b57\u6307\u4ee4",d={},o=[{value:"2.3.1 FROM \u5173\u952e\u5b57",id:"231-from-\u5173\u952e\u5b57",level:2},{value:"2.3.2 MAINTAINER",id:"232-maintainer",level:2},{value:"2.3.3 RUN",id:"233-run",level:2},{value:"2.3.4 EXPOSE",id:"234-expose",level:2},{value:"2.3.4 WORKDIR",id:"234-workdir",level:2},{value:"2.3.5 USER",id:"235-user",level:2},{value:"2.3.6 ENV",id:"236-env",level:2},{value:"2.3.7 VOLUME",id:"237-volume",level:2},{value:"2.3.8 ADD",id:"238-add",level:2},{value:"2.3.9 COPY",id:"239-copy",level:2},{value:"2.3.10 CMD",id:"2310-cmd",level:2},{value:"2.3.11 ENTRYPOINT",id:"2311-entrypoint",level:3}];function a(e){const n={a:"a",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"23-dockerfile\u5e38\u7528\u4fdd\u7559\u5b57\u6307\u4ee4",children:"2.3 DockerFile\u5e38\u7528\u4fdd\u7559\u5b57\u6307\u4ee4"})}),"\n",(0,c.jsxs)(n.p,{children:["\u6211\u4eec\u53c2\u8003",(0,c.jsx)(n.a,{href:"https://github.com/docker-library/tomcat/blob/master/9.0/jre8/temurin-focal/Dockerfile",children:"tomcat9.0\u7684DockeFile"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-DockerFile",children:'#\n# NOTE: THIS DOCKERFILE IS GENERATED VIA "apply-templates.sh"\n#\n# PLEASE DO NOT EDIT IT DIRECTLY.\n#\n\nFROM eclipse-temurin:8-jre-focal\n\nENV CATALINA_HOME /usr/local/tomcat\nENV PATH $CATALINA_HOME/bin:$PATH\nRUN mkdir -p "$CATALINA_HOME"\nWORKDIR $CATALINA_HOME\n\n# let "Tomcat Native" live somewhere isolated\nENV TOMCAT_NATIVE_LIBDIR $CATALINA_HOME/native-jni-lib\nENV LD_LIBRARY_PATH ${LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:}$TOMCAT_NATIVE_LIBDIR\n\n# see https://www.apache.org/dist/tomcat/tomcat-9/KEYS\n# see also "versions.sh" (https://github.com/docker-library/tomcat/blob/master/versions.sh)\nENV GPG_KEYS 48F8E69F6390C9F25CFEDCD268248959359E722B A9C5DF4D22E99998D9875A5110C01C5A2F6059E7 DCFD35E0BF8CA7344752DE8B6FB21E8933C60243\n\nENV TOMCAT_MAJOR 9\nENV TOMCAT_VERSION 9.0.88\nENV TOMCAT_SHA512 b2668f50339afdd266dbdf3ff20a98632a5552910179eda272b65ea0b18be4bef8fa9988e3cfc77e4eae4b74ae1e7abe2483b0e427a07628ed50fed3a13eefb9\n\nCOPY --from=tomcat:9.0.88-jdk8-temurin-focal $CATALINA_HOME $CATALINA_HOME\nRUN set -eux; \\\n    apt-get update; \\\n    xargs -rt apt-get install -y --no-install-recommends < "$TOMCAT_NATIVE_LIBDIR/.dependencies.txt"; \\\n    rm -rf /var/lib/apt/lists/*\n\n# verify Tomcat Native is working properly\nRUN set -eux; \\\n    nativeLines="$(catalina.sh configtest 2>&1)"; \\\n    nativeLines="$(echo "$nativeLines" | grep \'Apache Tomcat Native\')"; \\\n    nativeLines="$(echo "$nativeLines" | sort -u)"; \\\n    if ! echo "$nativeLines" | grep -E \'INFO: Loaded( APR based)? Apache Tomcat Native library\' >&2; then \\\n        echo >&2 "$nativeLines"; \\\n        exit 1; \\\n    fi\n\nEXPOSE 8080\n\n# upstream eclipse-temurin-provided entrypoint script caused https://github.com/docker-library/tomcat/issues/77 to come back as https://github.com/docker-library/tomcat/issues/302; use "/entrypoint.sh" at your own risk\nENTRYPOINT []\n\nCMD ["catalina.sh", "run"]\n'})}),"\n",(0,c.jsxs)(n.div,{style:{marginTop:"80px"},children:["\n",(0,c.jsx)(n.hr,{}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"231-from-\u5173\u952e\u5b57",children:"2.3.1 FROM \u5173\u952e\u5b57"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsxs)(n.strong,{children:["\u57fa\u7840\u955c\u50cf\uff0c\u5f53\u524d\u65b0\u955c\u50cf\u662f\u57fa\u4e8e\u54ea\u4e2a\u955c\u50cf\u7684\uff0c\u6307\u5b9a\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u955c\u50cf\u4f5c\u4e3a\u6a21\u677f\uff0c\u7b2c\u4e00\u6761\u5fc5\u987b\u662f",(0,c.jsx)(n.code,{children:"FROM"}),"\u3002"]})}),"\n",(0,c.jsxs)(n.p,{children:["\u6bd4\u5982\u6211\u4eec\u4e0a\u56fe\u7684tomcat\u955c\u50cf\uff0c\u7b2c\u4e00\u53e5\u5c31\u662f",(0,c.jsx)(n.code,{children:"FROM eclipse-temurin:8-jre-focal"}),". \u8fd9\u53e5\u8bdd\u7684\u610f\u601d\u5c31\u662f\u8fd9\u4e2atomcat\u955c\u50cf\u662f\u57fa\u4e8e",(0,c.jsx)(n.code,{children:"eclipse-temurin:8-jre-focal"}),"\u8fd9\u4e2a\u955c\u50cf\u5236\u4f5c\u7684\u3002"]}),"\n",(0,c.jsxs)(n.div,{style:{marginTop:"80px"},children:["\n",(0,c.jsx)(n.hr,{}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"232-maintainer",children:"2.3.2 MAINTAINER"}),"\n",(0,c.jsx)(n.p,{children:"\u63cf\u8ff0\u955c\u50cf\u7ef4\u62a4\u8005\u7684\u59d3\u540d\u548c\u90ae\u7bb1\u5730\u5740\u3002"}),"\n",(0,c.jsxs)(n.div,{style:{marginTop:"80px"},children:["\n",(0,c.jsx)(n.hr,{}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"233-run",children:"2.3.3 RUN"}),"\n",(0,c.jsx)(n.p,{children:"\u5bb9\u5668\u6784\u5efa\u7684\u65f6\u5019\u9700\u8981\u8fd0\u884c\u7684\u547d\u4ee4\u3002\u4e5f\u5c31\u662f DockerFile \u5728\u6784\u5efa(build)\u7684\u65f6\u5019\u9700\u8981\u6267\u884c\u7684\u547d\u4ee4\u3002\u8fd0\u884c\u547d\u4ee4\u7684\u683c\u5f0f\u6709\u4e24\u79cd\u3002\u4e00\u79cd\u662fshell\u683c\u5f0f\uff0c\u4e00\u79cd\u662fexec\u683c\u5f0f\u3002"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"shell\u683c\u5f0f"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"RUN \u547d\u4ee4\u884c\u547d\u4ee4 \u7b49\u540c\u4e8e\u5728\u7ec8\u7aef\u64cd\u4f5c\u7684shell\u547d\u4ee4\u3002"}),"\n",(0,c.jsxs)(n.li,{children:["\u6bd4\u5982: ",(0,c.jsx)(n.code,{children:"RUN yum -y install vim"}),". \u5c31\u76f8\u5f53\u4e8e\u5728\u6784\u5efa\u955c\u50cf\u7684\u65f6\u5019\u5b89\u88c5vim\u5de5\u5177\u3002"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"exec\u683c\u5f0f"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u5177\u4f53\u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-DockerFile",children:'RUN ["\u53ef\u6267\u884c\u6587\u4ef6", "\u53c2\u65701", "\u53c2\u65702"]\n# \u4f8b\u5982:\n# RUN ["./test.php", "dev", "offline"] \u7b49\u4ef7\u4e8e RUN ./test.php dev offline\n'})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsxs)(n.strong,{children:["\u603b\u7ed3: ",(0,c.jsx)(n.code,{children:"RUN"}),"\u662f\u5728",(0,c.jsx)(n.code,{children:"Docker build"}),"\u7684\u65f6\u5019\u8fd0\u884c\u3002"]})}),"\n",(0,c.jsxs)(n.div,{style:{marginTop:"80px"},children:["\n",(0,c.jsx)(n.hr,{}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"234-expose",children:"2.3.4 EXPOSE"}),"\n",(0,c.jsx)(n.p,{children:"\u5f53\u524d\u5bb9\u5668\u5bf9\u5916\u66b4\u9732\u7684\u7aef\u53e3\u3002"}),"\n",(0,c.jsxs)(n.div,{style:{marginTop:"80px"},children:["\n",(0,c.jsx)(n.hr,{}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"234-workdir",children:"2.3.4 WORKDIR"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u6307\u5b9a\u5728\u521b\u5efa\u5bb9\u5668\u540e\uff0c\u7ec8\u7aef\u9ed8\u8ba4\u767b\u9646\u7684\u8fdb\u6765\u5de5\u4f5c\u76ee\u5f55\uff0c\u4e00\u4e2a\u843d\u811a\u70b9\u3002"})}),"\n",(0,c.jsx)(n.p,{children:"\u6211\u4eec\u4ee5tomcat\u955c\u50cf\u4e3a\u4f8b\uff0c\u8ba9\u6211\u4eec\u542f\u52a8\u8fd0\u884c\u4e00\u4e2atomcat\u5bb9\u5668\u4e4b\u540e\uff0c\u6211\u4eec\u89c2\u5bdf\u8fdb\u5165\u5bb9\u5668\u4e4b\u540e\u7684\u9ed8\u8ba4\u76ee\u5f55:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"[root@loli ~]# docker run -it -p 8080:8080 tomcat /bin/bash\nroot@99d0a0da1a9f:/usr/local/tomcat# pwd\n/usr/local/tomcat\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u6211\u4eec\u53d1\u73b0\u73b0\u5728\u8fdb\u5165tomcat\u5bb9\u5668\u4e4b\u540e\u7684\u9ed8\u8ba4\u76ee\u5f55\u5c31\u662f",(0,c.jsx)(n.code,{children:"/usr/local/tomcat"}),"\u3002"]}),"\n",(0,c.jsxs)(n.div,{style:{marginTop:"80px"},children:["\n",(0,c.jsx)(n.hr,{}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"235-user",children:"2.3.5 USER"}),"\n",(0,c.jsx)(n.p,{children:"\u6307\u5b9a\u8be5\u955c\u50cf\u4ee5\u4ec0\u4e48\u6837\u7684\u7528\u6237\u53bb\u6267\u884c\uff0c\u5982\u679c\u90fd\u4e0d\u6307\u5b9a\uff0c\u9ed8\u8ba4\u662froot\u3002\u4e00\u822c\u6211\u4eec\u90fd\u662f\u4ee5root\u7528\u6237\u53bb\u8fd0\u884c\u6211\u4eec\u7684\u955c\u50cf\u3002"}),"\n",(0,c.jsxs)(n.div,{style:{marginTop:"80px"},children:["\n",(0,c.jsx)(n.hr,{}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"236-env",children:"2.3.6 ENV"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"\u7528\u6765\u5728\u6784\u5efa\u955c\u50cf\u8fc7\u7a0b\u4e2d\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf"}),"\u3002\u8fd9\u4e2a\u73af\u5883\u53d8\u91cf\u53ef\u4ee5\u5728\u540e\u7eed\u7684\u4efb\u4f55",(0,c.jsx)(n.code,{children:"RUN"}),"\u6307\u4ee4\u4e2d\u4f7f\u7528\uff0c\u8fd9\u5c31\u5982\u540c\u5728\u547d\u4ee4\u524d\u9762\u6307\u5b9a\u4e86\u73af\u5883\u53d8\u91cf\u524d\u7f00\u4e00\u6837\uff1b"]}),"\n",(0,c.jsx)(n.p,{children:"\u4e5f\u53ef\u4ee5\u5728\u5176\u5b83\u6307\u4ee4\u4e2d\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e9b\u73af\u5883\u53d8\u91cf\u3002\u6211\u4eec\u4ee5tomcat\u7684\u73af\u5883\u53d8\u91cf\u4e3a\u4f8b:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-DockerFile",children:"ENV CATALINA_HOME /usr/local/tomcat\nWORKDIR $CATALINA_HOME\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u8fd9\u5c31\u8bc1\u660e\u4e86\u4e3a\u4ec0\u4e48tomcat\u5bb9\u5668\u8fd0\u884c\u4e4b\u540e\u7684\u9ed8\u8ba4\u843d\u811a\u70b9\u662f",(0,c.jsx)(n.code,{children:"/usr/local/tomcat"}),"\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"237-volume",children:"2.3.7 VOLUME"}),"\n",(0,c.jsx)(n.p,{children:"\u5bb9\u5668\u6570\u636e\u5377\uff0c\u7528\u4e8e\u6570\u636e\u4fdd\u5b58\u548c\u6301\u4e45\u5316\u5de5\u4f5c\u3002"}),"\n",(0,c.jsxs)(n.div,{style:{marginTop:"80px"},children:["\n",(0,c.jsx)(n.hr,{}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"238-add",children:"2.3.8 ADD"}),"\n",(0,c.jsx)(n.p,{children:"\u5c06\u5bbf\u4e3b\u673a\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u62f7\u8d1d\u8fdb\u955c\u50cf\u4e14\u4f1a\u81ea\u52a8\u5904\u7406URL\u548c\u89e3\u538btar\u538b\u7f29\u5305\u3002"}),"\n",(0,c.jsxs)(n.div,{style:{marginTop:"80px"},children:["\n",(0,c.jsx)(n.hr,{}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"239-copy",children:"2.3.9 COPY"}),"\n",(0,c.jsx)(n.p,{children:"\u7c7b\u4f3cADD\uff0c\u62f7\u8d1d\u6587\u4ef6\u548c\u76ee\u5f55\u5230\u955c\u50cf\u4e2d\u3002 \u5c06\u4ece\u6784\u5efa\u4e0a\u4e0b\u6587\u76ee\u5f55\u4e2d <\u6e90\u8def\u5f84> \u7684\u6587\u4ef6/\u76ee\u5f55\u590d\u5236\u5230\u65b0\u7684\u4e00\u5c42\u7684\u955c\u50cf\u5185\u7684 <\u76ee\u6807\u8def\u5f84> \u4f4d\u7f6e\u3002"}),"\n",(0,c.jsx)(n.p,{children:"\u8bed\u6cd5\u683c\u5f0f:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-DockerFile",children:'COPY src dest # \u6216\u8005\nCOPY ["src","dest"]\n# src: \u6e90\u6587\u4ef6\u6216\u8005\u6e90\u76ee\u5f55\n# dest: \u5bb9\u5668\u5185\u7684\u6307\u5b9a\u8def\u5f84\uff0c\u8be5\u8def\u5f84\u4e0d\u7528\u4e8b\u5148\u5efa\u597d\uff0c\u8def\u5f84\u4e0d\u5b58\u5728\u7684\u8bdd\uff0c\u4f1a\u81ea\u52a8\u521b\u5efa\u3002\n'})}),"\n",(0,c.jsxs)(n.div,{style:{marginTop:"80px"},children:["\n",(0,c.jsx)(n.hr,{}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"2310-cmd",children:"2.3.10 CMD"}),"\n",(0,c.jsx)(n.p,{children:"\u6307\u5b9a\u5bb9\u5668\u542f\u52a8\u540e\u7684\u8981\u5e72\u7684\u4e8b\u60c5\u3002CMD\u540e\u9762\u8ddf\u7684\u6307\u4ee4\u683c\u5f0f\u548cRUN\u7c7b\u4f3c\uff0c\u4e5f\u6709\u4e24\u79cd\u683c\u5f0f:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-DockerFile",children:'# shell\u683c\u5f0f:\nCMD <\u547d\u4ee4>\n\n# exec \u683c\u5f0f:\nCMD ["\u53ef\u6267\u884c\u6587\u4ef6", "\u53c2\u65701", "\u53c2\u65702"]\n\n# \u5728ENTRYPOINT\u6307\u4ee4\u6307\u5b9a\u540e, \u7528 CMD \u6307\u5b9a\u5177\u4f53\u7684\u53c2\u6570\n'})}),"\n",(0,c.jsx)(n.p,{children:"\u6211\u4eec\u4ee5tomcat\u5bb9\u5668\u4e3a\u4f8b\uff0c\u6211\u4eec\u9996\u5148\u542f\u52a8tomcat\u5bb9\u5668:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsx)(n.tr,{children:(0,c.jsx)(n.th,{style:{textAlign:"center"},children:"##container##"})})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsx)(n.tr,{children:(0,c.jsx)(n.td,{style:{textAlign:"center"},children:(0,c.jsx)(n.img,{alt:"Clip_2024-04-25_13-53-41.png ##w600##",src:i(49668).A+"",width:"1425",height:"529"})})}),(0,c.jsx)(n.tr,{children:(0,c.jsx)(n.td,{style:{textAlign:"center"},children:"\u6ce8\u610f, \u6709\u6240\u4e0d\u540c"})})]})]}),"\n",(0,c.jsxs)(n.p,{children:["\u6211\u4eec\u53d1\u73b0\u542f\u52a8tomcat\u5bb9\u5668\u7684\u65f6\u5019\uff0c\u663e\u793a\u4e86\u5f88\u591a\u542f\u52a8\u65e5\u5fd7\u4fe1\u606f\u3002\u4e3a\u4ec0\u4e48\u8fd9\u6837\u5462\uff0c\u5c31\u662f\u56e0\u4e3atomcat\u7684 DockerFile \u91cc\u9762\u7684\u6700\u540e\u4e00\u53e5\u8bdd: ",(0,c.jsx)(n.code,{children:'CMD ["catalina.sh", "run"]'}),"\u4e5f\u5c31\u662f\u8fd0\u884c\u4e86",(0,c.jsx)(n.code,{children:"catalina.sh"}),"\u547d\u4ee4\u3002"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsxs)(n.strong,{children:["\u9700\u8981\u6ce8\u610f\u7684\u662f: Dockerfile \u4e2d\u53ef\u4ee5\u6709\u591a\u4e2a CMD \u6307\u4ee4\uff0c\u4f46\u53ea\u6709\u6700\u540e\u4e00\u4e2a\u751f\u6548\uff0cCMD \u4f1a\u88ab",(0,c.jsx)(n.code,{children:"docker run"}),"\u4e4b\u540e\u7684\u53c2\u6570\u66ff\u6362\u3002"]})}),"\n",(0,c.jsx)(n.p,{children:"\u8fd9\u53e5\u8bdd\u662f\u4ec0\u4e48\u610f\u601d\u5462?"}),"\n",(0,c.jsxs)(n.p,{children:["\u6211\u4eec\u4ee5\u5982\u4e0b\u8fd9\u6761\u547d\u4ee4\u4e3a\u4f8b\u542f\u52a8tomcat\uff0c\u6211\u4eec\u5728\u6700\u540e\u9762\u52a0\u4e0a\u4e86\u4e00\u53e5",(0,c.jsx)(n.code,{children:"/bin/bash"}),"\u547d\u4ee4:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsx)(n.tr,{children:(0,c.jsx)(n.th,{style:{textAlign:"center"},children:"##container##"})})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsx)(n.tr,{children:(0,c.jsx)(n.td,{style:{textAlign:"center"},children:"\u6b64\u65f6\u6211\u4eec\u53d1\u73b0\uff0ctomcat\u5bb9\u5668\u542f\u52a8\u4e4b\u540e\uff0c\u76f8\u5173\u7684\u542f\u52a8\u65e5\u5fd7\u4fe1\u606f\u6ca1\u6709\u51fa\u73b0:"})}),(0,c.jsx)(n.tr,{children:(0,c.jsx)(n.td,{style:{textAlign:"center"},children:(0,c.jsx)(n.img,{alt:"Clip_2024-04-25_13-55-32.png ##w600##",src:i(79820).A+"",width:"1312",height:"99"})})})]})]}),"\n",(0,c.jsxs)(n.p,{children:["\u8fd9\u5c31\u8bf4\u660e\u4e86",(0,c.jsx)(n.code,{children:"catalina.sh"}),"\u547d\u4ee4\u6ca1\u6709\u8fd0\u884c\uff0c\u4e3a\u4ec0\u4e48?"]}),"\n",(0,c.jsxs)(n.p,{children:["\u56e0\u4e3a\u76f8\u5f53\u4e8e\u4f7f\u7528CMD\u8fd0\u884c\u4e86",(0,c.jsx)(n.code,{children:"/bin/bash"}),"\u547d\u4ee4\uff0c\u8986\u76d6\u4e86",(0,c.jsx)(n.code,{children:"catalina.sh"}),"\u547d\u4ee4\u3002\u5982\u4e0b\u6240\u793a:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-DockerFile",children:'CMD ["catalina.sh","run"]\nCMD ["/bin/bash","run"]\n'})}),"\n",(0,c.jsx)(n.p,{children:"\u6700\u540e\u4e00\u5b9a\u8981\u6ce8\u610f\u533a\u5206RUN\u548cCMD\u547d\u4ee4\u7684\u533a\u522b:"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsxs)(n.strong,{children:["RUN\u547d\u4ee4\u662f",(0,c.jsx)(n.code,{children:"docker build"}),"(\u6784\u5efa)\u7684\u65f6\u5019\u8fd0\u884c\u3002CMD\u662f",(0,c.jsx)(n.code,{children:"docker run"}),"\u7684\u65f6\u5019\u8fd0\u884c"]}),"\u3002"]}),"\n",(0,c.jsxs)(n.div,{style:{marginTop:"80px"},children:["\n",(0,c.jsx)(n.hr,{}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"2311-entrypoint",children:"2.3.11 ENTRYPOINT"}),"\n",(0,c.jsxs)(n.p,{children:["\u4e5f\u662f\u7528\u6765\u6307\u5b9a\u4e00\u4e2a\u5bb9\u5668\u542f\u52a8\u65f6\u8981\u8fd0\u884c\u7684\u547d\u4ee4\uff0c\u5b83\u7c7b\u4f3c\u4e8e CMD \u6307\u4ee4\uff0c\u4f46\u662f ENTRYPOINT \u4e0d\u4f1a\u88ab",(0,c.jsx)(n.code,{children:"docker run"}),"\u540e\u9762\u7684\u547d\u4ee4\u8986\u76d6\uff0c\u800c\u4e14\u8fd9\u4e9b\u547d\u4ee4\u884c\u53c2\u6570\u4f1a\u88ab\u5f53\u4f5c\u53c2\u6570\u9001\u7ed9 ENTRYPOINT \u6307\u4ee4\u6307\u5b9a\u7684\u7a0b\u5e8f\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"\u547d\u4ee4\u683c\u5f0f:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-DockerFile",children:'ENTRYPOINT ["<executeable>", "<paraml>", "<param2>", ...]\n'})}),"\n",(0,c.jsx)(n.p,{children:"ENTRYPOINT \u53ef\u4ee5\u548c CMD \u4e00\u8d77\u7528\uff0c\u4e00\u822c\u662f\u53d8\u53c2\u624d\u4f1a\u4f7f\u7528 CMD \uff0c\u8fd9\u91cc\u7684 CMD \u7b49\u4e8e\u662f\u5728\u7ed9 ENTRYPOINT \u4f20\u53c2\u3002\u5f53\u6307\u5b9a\u4e86 ENTRYPOINT \u540e\uff0cCMD \u7684\u542b\u4e49\u5c31\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u4e0d\u518d\u662f\u76f4\u63a5\u8fd0\u884c\u5176\u547d\u4ee4\u800c\u662f\u5c06 CM D\u7684\u5185\u5bb9\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9 ENTRYPOINT \u6307\u4ee4\u3002"}),"\n",(0,c.jsx)(n.p,{children:"\u6848\u4f8b\u5982\u4e0b: \u5047\u8bbe\u5df2\u901a\u8fc7 Dockerfile \u6784\u5efa\u4e86 nginx:test \u955c\u50cf:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-DockerFile",children:'FROM nginx\n\nENTRYPOINT ["nginx", "-c"] # \u5b9a\u53c2\nCMD ["/etc/nginx/nginx.conf"] # \u53d8\u53c2\n'})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{style:{textAlign:"center"},children:"\u662f\u5426\u4f20\u53c2"}),(0,c.jsx)(n.th,{style:{textAlign:"center"},children:"Docker\u547d\u4ee4"}),(0,c.jsx)(n.th,{style:{textAlign:"center"},children:"\u884d\u751f\u51fa\u7684\u5b9e\u9645\u547d\u4ee4"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{style:{textAlign:"center"},children:"\u5426"}),(0,c.jsx)(n.td,{style:{textAlign:"center"},children:(0,c.jsx)(n.code,{children:"docker run nginx:test"})}),(0,c.jsx)(n.td,{style:{textAlign:"center"},children:(0,c.jsx)(n.code,{children:"nginx -c /etc/nginx/nginx.conf"})})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{style:{textAlign:"center"},children:"\u662f"}),(0,c.jsx)(n.td,{style:{textAlign:"center"},children:(0,c.jsx)(n.code,{children:"docker run nginx:test -c /etc/nginx/new.conf"})}),(0,c.jsx)(n.td,{style:{textAlign:"center"},children:(0,c.jsx)(n.code,{children:"nginx -c /etc/nginx/new.conf"})})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var r=i(96540);const c={},s=r.createContext(c);function l(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:l(e.components),r.createElement(s.Provider,{value:n},e.children)}},49668:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/Clip_2024-04-25_13-53-41-d630952d20c1b279c270fd2bdcb75416.png"},79820:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/Clip_2024-04-25_13-55-32-fdb21d1b852ff680da4ca3116a897ac2.png"}}]);