"use strict";(self.webpackChunkhx_loli=self.webpackChunkhx_loli||[]).push([[92535],{16647:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>d,toc:()=>l});const d=JSON.parse('{"id":"\u7a0b\u5e8f\u8bed\u8a00/Web\u524d\u7aef/Vue/\u7b2c\u4e09\u65b9\u5e93\u4e36/Djs/\u5b9e\u73b0\u529b\u5bfc\u5411\u56fe/index","title":"\u4f7f\u7528 D3.js \u5b9e\u73b0\u529b\u5bfc\u5411\u56fe","description":"\u5b89\u88c5","source":"@site/docs/002-\u7a0b\u5e8f\u8bed\u8a00/004-Web\u524d\u7aef/006-Vue/002-\u7b2c\u4e09\u65b9\u5e93\u4e36/001-Djs/001-\u5b9e\u73b0\u529b\u5bfc\u5411\u56fe/index.md","sourceDirName":"002-\u7a0b\u5e8f\u8bed\u8a00/004-Web\u524d\u7aef/006-Vue/002-\u7b2c\u4e09\u65b9\u5e93\u4e36/001-Djs/001-\u5b9e\u73b0\u529b\u5bfc\u5411\u56fe","slug":"/\u7a0b\u5e8f\u8bed\u8a00/Web\u524d\u7aef/Vue/\u7b2c\u4e09\u65b9\u5e93\u4e36/Djs/\u5b9e\u73b0\u529b\u5bfc\u5411\u56fe/","permalink":"/HXLoLi/docs/\u7a0b\u5e8f\u8bed\u8a00/Web\u524d\u7aef/Vue/\u7b2c\u4e09\u65b9\u5e93\u4e36/Djs/\u5b9e\u73b0\u529b\u5bfc\u5411\u56fe/","draft":false,"unlisted":false,"editUrl":"https://github.com/HengXin666/HXLoLi/edit/main/docs/002-\u7a0b\u5e8f\u8bed\u8a00/004-Web\u524d\u7aef/006-Vue/002-\u7b2c\u4e09\u65b9\u5e93\u4e36/001-Djs/001-\u5b9e\u73b0\u529b\u5bfc\u5411\u56fe/index.md","tags":[],"version":"current","lastUpdatedBy":"Heng_Xin_666","lastUpdatedAt":1745851959000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u4e36Vue\u52a0\u8f7dElement\u4e36plus","permalink":"/HXLoLi/docs/\u7a0b\u5e8f\u8bed\u8a00/Web\u524d\u7aef/Vue/\u57fa\u7840\u77e5\u8bc6/\u4e36Vue\u52a0\u8f7dElement\u4e36plus/"},"next":{"title":"\u3010\u865a\u5e7b\u3011\u76ee\u5f55","permalink":"/HXLoLi/docs/\u6e38\u620f\u5f15\u64ce/\u865a\u5e7b\u5f15\u64ce/\u3010\u865a\u5e7b\u3011\u76ee\u5f55/"}}');var a=t(74848),o=t(28453);const r={},s="\u4f7f\u7528 D3.js \u5b9e\u73b0\u529b\u5bfc\u5411\u56fe",i={},l=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u4ee3\u7801",id:"\u4ee3\u7801",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,o.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"\u4f7f\u7528-d3js-\u5b9e\u73b0\u529b\u5bfc\u5411\u56fe",children:"\u4f7f\u7528 D3.js \u5b9e\u73b0\u529b\u5bfc\u5411\u56fe"})}),"\n",(0,a.jsx)(e.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sh",children:"npm install d3\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\u4ee3\u7801",children:"\u4ee3\u7801"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-html",children:"<template>\n  <div>\n    <svg id=\"topology\" width=\"1000\" height=\"600\" style=\"background-color: rgb(24, 24, 24)\"></svg>\n  </div>\n</template>\n\n<script>\nimport * as d3 from 'd3';\n\nexport default {\n  name: \"topology\",\n  data() {\n    return {\n      nodes: [\n        { id: 1, name: 'Node 1' },\n        { id: 2, name: 'Node 2' },\n        { id: 3, name: 'Node 3' },\n        { id: 4, name: 'Node 4' },\n        { id: 5, name: 'Node 5' }\n      ],\n      links: [\n        { source: 1, target: 2 },\n        { source: 1, target: 3 },\n        { source: 1, target: 4 },\n        { source: 5, target: 4 },\n      ],\n    };\n  },\n  mounted() {\n    const svg = d3.select('#topology');\n    const width = svg.attr('width');\n    const height = svg.attr('height');\n\n     /**\n     * forceLink\u8fd9\u91cc\u8981\u5904\u7406\u4e00\u4e0b\uff0c\u7ed1\u5b9anode.id\u3002\u4e0d\u7136\u4f1a\u6309\u7167node\u7684\u7d22\u5f15\u6765\u8fdb\u884c\uff0c\u8fd9\u6837\u8bbe\u7f6etick\u7684\u65f6\u5019\u4f1a\u975e\u5e38\u4e0d\u65b9\u4fbf\n     * \u4ec5\u8fdb\u884c\u529b\u6a21\u62df\u7ed3\u70b9\u7684\u4f4d\u7f6e\u4e0d\u4f1a\u8fdb\u884c\u5b9e\u65f6\u66f4\u65b0\uff0c\u5fc5\u987b\u8981\u6709simulation.on(tick)\u624d\u4f1a\u628a\u529b\u6a21\u62df\u7684\u7ed3\u679c\u53cd\u6620\u5230\u56fe\u5143\u4e0a\n     */\n    const simulation = d3.forceSimulation(this.nodes)\n      .force('link', d3.forceLink(this.links).id(d => d.id).distance(150))\n      .force('charge', d3.forceManyBody())\n      .force('center', d3.forceCenter(width / 2, height / 2));\n\n    // \u8ba9 g \u79fb\u52a8, \u4ece\u800c\u56fa\u5b9a svg\n    const g = svg.append('g'); // \u521b\u5efa\u4e00\u4e2a <g> \u5143\u7d20\u7528\u4e8e\u5305\u88f9\u6240\u6709\u7684\u56fe\u5f62\u5143\u7d20\n\n    // \u5728 <g> \u5143\u7d20\u4e0b\u9009\u62e9\u7ebf\u6761\u5143\u7d20\n    const link = g.selectAll('line')\n      .data(this.links)\n      .enter()\n      .append('line')\n      .attr('stroke', '#ccc')\n      .attr('stroke-width', 1);\n\n    // \u5728 <g> \u5143\u7d20\u4e0b\u9009\u62e9\u5706\u5f62\u5143\u7d20\n    const node = g.selectAll('circle')\n      .data(this.nodes)\n      .enter()\n      .append('circle')\n      .attr('r', 10)\n      .attr('fill', 'red')\n      .call(d3.drag()\n        .on('start', dragstarted)\n        .on('drag', dragged)\n        .on('end', dragended));\n\n    // \u5728 <g> \u5143\u7d20\u4e0b\u9009\u62e9\u6587\u672c\u5143\u7d20\n    const label = g.selectAll('.label')\n      .data(this.nodes)\n      .enter()\n      .append('text')\n      .attr('class', \"label\")\n      .text(function (d) { return d.name; })\n      .attr(\"dx\", 12)\n      .attr(\"dy\", \".35em\");\n\n    node.append('title')\n      .text(d => d.name);\n\n    simulation.on('tick', () => {\n      link\n        .attr('x1', d => d.source.x)\n        .attr('y1', d => d.source.y)\n        .attr('x2', d => d.target.x)\n        .attr('y2', d => d.target.y);\n\n      node\n        .attr('cx', d => d.x)\n        .attr('cy', d => d.y);\n      label\n        .attr('x', d => d.x)\n        .attr('y', d => d.y);\n    });\n\n    // \u5b9a\u4e49\u62d6\u62fd\u5f00\u59cb\u3001\u62d6\u62fd\u8fc7\u7a0b\u548c\u62d6\u62fd\u7ed3\u675f\u7684\u51fd\u6570\n    function dragstarted(event, d) {\n      if (!event.active) // \u8bbe\u7f6e\u8870\u51cf\u7cfb\u6570\uff0c\u5bf9\u8282\u70b9\u4f4d\u7f6e\u79fb\u52a8\u8fc7\u7a0b\u7684\u6a21\u62df\uff0c\u6570\u503c\u8d8a\u9ad8\u79fb\u52a8\u8d8a\u5feb\uff0c\u6570\u503c\u8303\u56f4[0\uff0c1]\n        simulation.alphaTarget(0.1).restart();\n        // restart(): \u91cd\u65b0\u542f\u52a8\u4eff\u771f\u7684\u5185\u90e8\u5b9a\u65f6\u5668\u5e76\u4e14\u8fd4\u56de\u4eff\u771f\u3002\n        // \u4e0e simulation*.alphaTarget \u6216 simulation*.alpha\u7ed3\u5408\u4f7f\u7528\uff0c\n        // \u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u5728\u4ea4\u4e92\u671f\u95f4\u518d\u6b21\u6fc0\u6d3b\u4eff\u771f\uff0c\u6bd4\u5982\u62d6\u62fd\u8282\u70b9\u6216\u8005\u5728\u4f7f\u7528 simulation.stop\u4e34\u65f6\u6682\u505c\u4eff\u771f\u540e\u4f7f\u7528\u3002\n      d.fx = d.x;\n      d.fy = d.y;\n    }\n\n    function dragged(event, d) {\n      d.fx = event.x;\n      d.fy = event.y;\n    }\n\n    function dragended(event, d) {\n      if (!event.active)\n        simulation.alphaTarget(0);\n      // \u8ba9\u5b83\u56de\u5230\u539f\u6765\u7684\u4f4d\u7f6e\n      d.fx = null;\n      d.fy = null;\n    }\n\n    // \u6dfb\u52a0\u7f29\u653e\u529f\u80fd\n    const zoom = d3.zoom()\n      .extent([[0, 0], [width, height]]) // \u8303\u56f4, \u4e0d\u8fc7\u6ca1\u4ec0\u4e48\u7528\n      .scaleExtent([0.5, 1.5]) // \u7f29\u653e\u8303\u56f4\n      // \u7f29\u653e\u65f6\u66f4\u65b0 SVG \u4e2d\u7684\u5143\u7d20\u4f4d\u7f6e\u548c\u5927\u5c0f\n      .on('zoom', event => g.attr('transform', event.transform)); // \u4f7f\u7528 event.transform \u66f4\u65b0 <g> \u5143\u7d20\u7684\u53d8\u6362\n\n    svg.call(zoom);\n\n    // \u53f3\u952e\u62d6\u62fd\u753b\u5e03\u5185\u5bb9\n    svg.on('contextmenu', () => {\n      d3.event.preventDefault();\n      svg.call(zoom.transform, d3.zoomIdentity.translate(0, 0).scale(1));\n    });\n  },\n};\n<\/script>\n"})})]})}function u(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(c,{...n})}):c(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>s});var d=t(96540);const a={},o=d.createContext(a);function r(n){const e=d.useContext(o);return d.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:r(n.components),d.createElement(o.Provider,{value:e},n.children)}}}]);