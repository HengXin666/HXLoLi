"use strict";(self.webpackChunkhx_loli=self.webpackChunkhx_loli||[]).push([[6415],{26460:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"\u4e2d\u95f4\u4ef6/RocketMQ/\u57fa\u672c\u4f7f\u7528\u7bc7/RocketMQ\u7684\u5b89\u88c5/index","title":"\u4e8c\u3001RocketMQ\u7684\u5b89\u88c5","description":"\u4e86\u89e3\u4e86mq\u7684\u57fa\u672c\u6982\u5ff5\u548c\u89d2\u8272\u4ee5\u540e\uff0c\u6211\u4eec\u5f00\u59cb\u5b89\u88c5rocketmq\uff0c\u5efa\u8bae\u5728linux\u4e0a\u3002","source":"@site/docs/005-\u4e2d\u95f4\u4ef6/002-RocketMQ/002-\u57fa\u672c\u4f7f\u7528\u7bc7/002-RocketMQ\u7684\u5b89\u88c5/index.md","sourceDirName":"005-\u4e2d\u95f4\u4ef6/002-RocketMQ/002-\u57fa\u672c\u4f7f\u7528\u7bc7/002-RocketMQ\u7684\u5b89\u88c5","slug":"/\u4e2d\u95f4\u4ef6/RocketMQ/\u57fa\u672c\u4f7f\u7528\u7bc7/RocketMQ\u7684\u5b89\u88c5/","permalink":"/HXLoLi/docs/\u4e2d\u95f4\u4ef6/RocketMQ/\u57fa\u672c\u4f7f\u7528\u7bc7/RocketMQ\u7684\u5b89\u88c5/","draft":false,"unlisted":false,"editUrl":"https://github.com/HengXin666/HXLoLi/edit/main/docs/005-\u4e2d\u95f4\u4ef6/002-RocketMQ/002-\u57fa\u672c\u4f7f\u7528\u7bc7/002-RocketMQ\u7684\u5b89\u88c5/index.md","tags":[],"version":"current","lastUpdatedBy":"Heng_Xin_666","lastUpdatedAt":1745851959000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"RocketMQ\u7684\u57fa\u672c\u6982\u8ff0","permalink":"/HXLoLi/docs/\u4e2d\u95f4\u4ef6/RocketMQ/\u57fa\u672c\u4f7f\u7528\u7bc7/RocketMQ\u7684\u57fa\u672c\u6982\u8ff0/"},"next":{"title":"RocketMQ\u5feb\u901f\u5165\u95e8","permalink":"/HXLoLi/docs/\u4e2d\u95f4\u4ef6/RocketMQ/\u57fa\u672c\u4f7f\u7528\u7bc7/RocketMQ\u5feb\u901f\u5165\u95e8/"}}');var s=r(74848),t=r(28453);const c={},i="\u4e8c\u3001RocketMQ\u7684\u5b89\u88c5",l={},a=[{value:"2.1 RocketMQ\u670d\u52a1\u5b89\u88c5",id:"21-rocketmq\u670d\u52a1\u5b89\u88c5",level:2},{value:"2.2 RocketMQ\u63a7\u5236\u53f0\u5b89\u88c5",id:"22-rocketmq\u63a7\u5236\u53f0\u5b89\u88c5",level:2},{value:"2.3 \u57fa\u4e8eDocker\u5feb\u901f\u5b89\u88c5RocketMQ",id:"23-\u57fa\u4e8edocker\u5feb\u901f\u5b89\u88c5rocketmq",level:2},{value:"2.4 \u57fa\u4e8eDocker\u642d\u5efaRocketMQ\u96c6\u7fa4",id:"24-\u57fa\u4e8edocker\u642d\u5efarocketmq\u96c6\u7fa4",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u4e8crocketmq\u7684\u5b89\u88c5",children:"\u4e8c\u3001RocketMQ\u7684\u5b89\u88c5"})}),"\n",(0,s.jsx)(n.p,{children:"\u4e86\u89e3\u4e86mq\u7684\u57fa\u672c\u6982\u5ff5\u548c\u89d2\u8272\u4ee5\u540e\uff0c\u6211\u4eec\u5f00\u59cb\u5b89\u88c5rocketmq\uff0c\u5efa\u8bae\u5728linux\u4e0a\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"21-rocketmq\u670d\u52a1\u5b89\u88c5",children:"2.1 RocketMQ\u670d\u52a1\u5b89\u88c5"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u76f4\u63a5\u5b89\u88c5\u5728Linux, \u8fd9\u91cc\u4e0d\u793a\u8303, \u4f60\u76f4\u63a5\u767e\u5ea6\u5427"}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u4e0b\u8f7d\u5730\u5740: ",(0,s.jsx)(n.a,{href:"https://rocketmq.apache.org/dowloading/releases/",children:"https://rocketmq.apache.org/dowloading/releases/"})," \u6ce8\u610f\u9009\u62e9\u7248\u672c\uff0c\u540e\u9762\u4f7f\u7528alibaba\u65f6\u5bf9\u5e94\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u5c06rocketmq\u5b89\u88c5\u5305\u4e0a\u4f20\u81f3linux\u670d\u52a1\u5668"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5c06\u4e0b\u8f7d\u597d\u7684\u5b89\u88c5\u5305\u4e0a\u4f20\u81f3",(0,s.jsx)(n.code,{children:"/opt/rocketmq"}),"\u76ee\u5f55\u91cc\u9762\u3002"]}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:"\u89e3\u538b\u538b\u7f29\u5305\n\u8fd9\u4e9b\u76ee\u5f55\u6216\u6587\u4ef6\u7684\u4f5c\u7528\u5982\u4e0b:"}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Benchmark: \u5305\u542b\u4e00\u4e9b\u6027\u80fd\u6d4b\u8bd5\u7684\u811a\u672c\uff1b"}),"\n",(0,s.jsx)(n.li,{children:"Bin: \u53ef\u6267\u884c\u6587\u4ef6\u76ee\u5f55\uff1b"}),"\n",(0,s.jsx)(n.li,{children:"Conf: \u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\uff1b"}),"\n",(0,s.jsx)(n.li,{children:"Lib: \u7b2c\u4e09\u65b9\u4f9d\u8d56\uff1b"}),"\n",(0,s.jsx)(n.li,{children:"LICENSE: \u6388\u6743\u4fe1\u606f;"}),"\n",(0,s.jsx)(n.li,{children:"NOTICE: \u7248\u672c\u516c\u544a\uff1b"}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsxs)(n.li,{children:["\u914d\u7f6e\u73af\u5883\u53d8\u91cf\n",(0,s.jsx)(n.code,{children:"vim /etc/profile"})]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-txt",children:"export NAMESRV_ADDR = \u81ea\u5df1linux\u7684ip:9876\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"5",children:["\n",(0,s.jsx)(n.li,{children:"\u4fee\u6539nameServer\u7684\u8fd0\u884c\u811a\u672c"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u8fdb\u5165bin\u76ee\u5f55\u4e0b\uff0c\u4fee\u6539runserver.sh\u6587\u4ef6,\u5c0671\u884c\u548c76\u884c\u7684Xms\u548cXmx\u7b49\u6539\u5c0f\u4e00\u70b9\u3002"}),"\n",(0,s.jsxs)(n.ol,{start:"6",children:["\n",(0,s.jsx)(n.li,{children:"\u4fee\u6539broker\u7684\u8fd0\u884c\u811a\u672c"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u8fdb\u5165bin\u76ee\u5f55\u4e0b\uff0c\u4fee\u6539runbroker.sh\u6587\u4ef6,\u4fee\u653967\u884c"}),"\n",(0,s.jsxs)(n.ol,{start:"7",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u4fee\u6539broker\u7684\u914d\u7f6e\u6587\u4ef6"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u542f\u52a8"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"22-rocketmq\u63a7\u5236\u53f0\u5b89\u88c5",children:"2.2 RocketMQ\u63a7\u5236\u53f0\u5b89\u88c5"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u4f9d\u65e7\u53ef\u4ee5\u76f4\u63a5docker\u5b89\u88c5, Linux\u7684\u4f60\u5c31\u770b\u770b\u5427"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Rocketmq \u63a7\u5236\u53f0\u53ef\u4ee5\u53ef\u89c6\u5316MQ\u7684\u6d88\u606f\u53d1\u9001\uff01\u65e7\u7248\u672c\u6e90\u7801\u662f\u5728rocketmq-external\u91cc\u7684rocketmq-console\uff0c\u65b0\u7248\u672c\u5df2\u7ecf\u5355\u72ec\u62c6\u5206\u6210dashboard\u3002"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u7f51\u5740: ",(0,s.jsx)(n.a,{href:"https://github.com/apache/rocketmq-dashboard",children:"https://github.com/apache/rocketmq-dashboard"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u4e0b\u8f7d\u5730\u5740: ",(0,s.jsx)(n.a,{href:"https://github.com/apache/rocketmq-dashboard/archive/refs/tags/rocketmq-dashboard-1.0.0.zip",children:"https://github.com/apache/rocketmq-dashboard/archive/refs/tags/rocketmq-dashboard-1.0.0.zip"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u4e0b\u8f7d\u540e\u89e3\u538b\u51fa\u6765\uff0c\u5728\u6839\u76ee\u5f55\u4e0b\u6267\u884c: ",(0,s.jsx)(n.code,{children:"mvn clean package -Dmaven.test.skip=true"})]}),"\n",(0,s.jsx)(n.p,{children:"\u8fdb\u5165target\u76ee\u5f55\u627e\u5230\u6307\u5b9a\u7684jar\u5305, \u5c06\u8fd9\u4e2ajar\u5305\u4e0a\u4f20\u81f3linux\u76ee\u5f55, \u7136\u540e\u8fd0\u884c:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u4fee\u6539ip, \u4fee\u6539\u7248\u672c\nnohup java -jar ./rocketmq-dashboard-1.0.0.jar -server.port=8888 - rocketmq.config.namesrvAddr=192.168.10.139:9876 > ./rocketmq-4.9.2/logs/dashboard.log &\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u8bbf\u95ee\u5230rocketmq\u7684\u8bbf\u95ee\u63a7\u5236\u53f0"}),"\n",(0,s.jsx)(n.h2,{id:"23-\u57fa\u4e8edocker\u5feb\u901f\u5b89\u88c5rocketmq",children:"2.3 \u57fa\u4e8eDocker\u5feb\u901f\u5b89\u88c5RocketMQ"}),"\n",(0,s.jsx)(n.p,{children:"\u9996\u5148\u6211\u4eec\u770b\u770b\u6574\u4e2a\u5b89\u88c5\u76ee\u5f55:"}),"\n",(0,s.jsx)(n.p,{children:"\u5176\u4e2dlogs\u548cstore\u662f\u6784\u5efa\u8fc7\u7a0b\u4e2d\u624d\u51fa\u73b0\u7684\uff0c\u56e0\u6b64\uff0c\u53ea\u9700\u8981\u5728\u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u6784\u5efabroker.conf \u548cdocker-compose.yml\u5373\u53ef\uff0c\u8fd9\u4e24\u4e2a\u914d\u7f6e\u7684\u5177\u4f53\u914d\u7f6e\u5982\u4e0b:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"broker.conf"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u662f\u5426\u5141\u8bb8 Broker \u81ea\u52a8\u521b\u5efa\u8ba2\u9605\u7ec4\uff0c\u5efa\u8bae\u7ebf\u4e0b\u5f00\u542f\uff0c\u7ebf\u4e0a\u5173\u95ed\nautoCreateSubscriptionGroup=true\n# Broker \u5bf9\u5916\u670d\u52a1\u7684\u76d1\u542c\u7aef\u53e3\nlistenPort=10911\n# \u5220\u9664\u6587\u4ef6\u65f6\u95f4\u70b9\uff0c\u9ed8\u8ba4\u51cc\u66684\u70b9\ndeleteWhen=04\n# \u6587\u4ef6\u4fdd\u7559\u65f6\u95f4\uff0c\u9ed8\u8ba448\u5c0f\u65f6\nfileReservedTime=120\n# commitLog \u6bcf\u4e2a\u6587\u4ef6\u7684\u5927\u5c0f\u9ed8\u8ba41G\nmapedFileSizeCommitLog=1073741824\n# ConsumeQueue \u6bcf\u4e2a\u6587\u4ef6\u9ed8\u8ba4\u5b58 30W \u6761\uff0c\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\u8c03\u6574\nmapedFileSizeConsumeQueue=300000\n# destroyMapedFileIntervalForcibly=120000\n# redeleteHangedFileInterval=120000\n# \u68c0\u6d4b\u7269\u7406\u6587\u4ef6\u78c1\u76d8\u7a7a\u95f4\ndiskMaxUsedSpaceRatio=88\n# \u5b58\u50a8\u8def\u5f84\n# storePathRootDir=/home/wen/rocketmq-all-4.1.0-incubating/store\n# commitLog \u5b58\u50a8\u8def\u5f84\n# storePathCommitLog=/home/wen/rocketmq-all-4.1.0-incubating/store/commitlog\n# \u6d88\u8d39\u961f\u5217\u5b58\u50a8\n# storePathConsumeQueue=/home/wen/rocketmq-all-4.1.0-\nincubating/store/consumequeue\n# \u6d88\u606f\u7d22\u5f15\u5b58\u50a8\u8def\u5f84\n# storePathIndex=/home/wen/rocketmq-all-4.1.0-incubating/store/index\n# checkpoint \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\n# storeCheckpoint=/home/wen/rocketmq-all-4.1.0-incubating/store/checkpoint\n# abort \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\n# abortFile=/home/wen/rocketmq-all-4.1.0-incubating/store/abort\n# \u9650\u5236\u7684\u6d88\u606f\u5927\u5c0f\nmaxMessageSize=65536\n# flushCommitLogLeastPages=4\n# flushConsumeQueueLeastPages=2\n# flushCommitLogThoroughInterval=10000\n# flushConsumeQueueThoroughInterval=60000\n# Broker \u7684\u89d2\u8272\n# - ASYNC_MASTER \u5f02\u6b65\u590d\u5236Master\n# - SYNC_MASTER \u540c\u6b65\u53cc\u5199Master\n# - SLAVE\nbrokerRole=ASYNC_MASTER\n# \u5237\u76d8\u65b9\u5f0f\n# - ASYNC_FLUSH \u5f02\u6b65\u5237\u76d8\n# - SYNC_FLUSH \u540c\u6b65\u5237\u76d8\nflushDiskType=ASYNC_FLUSH\n# \u53d1\u6d88\u606f\u7ebf\u7a0b\u6c60\u6570\u91cf\n# sendMessageThreadPoolNums=128\n# \u62c9\u6d88\u606f\u7ebf\u7a0b\u6c60\u6570\u91cf\n# pullMessageThreadPoolNums=128\n\n# \u9700\u8981\u586b\u4e0a\u4f60\u7684Linux ip \u8ba9\u5916\u754c\u8bbf\u95ee\nbrokerIP1 = 192.168.213.66\n\n# \u81ea\u52a8\u521b\u5efa\u7ec4\nautoCreateTopicEnable=true\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"docker-compose.yml"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:'version: \'3.5\'\n\nservices:\n  rmqnamesrv:\n    image: foxiswho/rocketmq:server\n    container_name: rmqnamesrv\n    ports:\n      - 9876:9876\n    volumes:\n      - ./data/logs:/opt/logs\n      - ./data/store:/opt/store\n    networks:\n      rmq:\n        aliases:\n          - rmqnamesrv\n\n  rmqbroker:\n    image: foxiswho/rocketmq:broker\n    container_name: rmqbroker\n    ports:\n      - 10909:10909\n      - 10911:10911\n    volumes:\n      - ./data/logs:/opt/logs\n      - ./data/store:/opt/store\n      - ./data/brokerconf/broker.conf:/etc/rocketmq/broker.conf\n    environment:\n      NAMESRV_ADDR: "rmqnamesrv:9876"\n      JAVA_OPTS: "-Duser.home=/opt"\n      JAVA_OPT_EXT: "-server -Xms128m -Xmx128m -Xmn128m"\n    command: mqbroker -c /etc/rocketmq/broker.conf\n    depends_on:\n      - rmqnamesrv\n    networks:\n      rmq:\n        aliases:\n          - rmqbroker\n\n  rmqconsole:\n    image: styletang/rocketmq-console-ng\n    container_name: rmqconsole\n    ports:\n      - 10801:8080\n    environment:\n      JAVA_OPTS: "-Drocketmq.namesrv.addr=rmqnamesrv:9876 -Dcom.rocketmq.sendMessageWithVIPChannel=false"\n    depends_on:\n      - rmqnamesrv\n    networks:\n      rmq:\n        aliases:\n          - rmqconsole\n\nnetworks:\n  rmq:\n    name: rmq\n    driver: bridge\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u8981\u6ce8\u610f\uff0c\u8fd9\u4e09\u4e2a\u955c\u50cf\u7684\u7aef\u53e3\u6620\u5c04\uff0c\u4e0d\u8981\u4f7f\u7528\u6b63\u5728\u8fd0\u884c\u7684\u7aef\u53e3"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u542f\u52a8\u5bb9\u5668"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u53ef\u4ee5\u67e5\u770b\u4e09\u4e2a\u5bb9\u5668\uff0c\u6784\u5efa\u5b8c\u6210\uff0c\u8fd9\u65f6\u6211\u4eec\u6d4f\u89c8\u5668\u6253\u5f00\u8bbf\u95ee:"}),"\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsx)(n.tr,{children:(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"##container##"})})}),(0,s.jsx)(n.tbody,{children:(0,s.jsx)(n.tr,{children:(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.img,{alt:"Clip_2024-05-01_15-00-17.png ##w600##",src:r(85514).A+"",width:"2475",height:"1464"})})})})]}),"\n",(0,s.jsx)(n.h2,{id:"24-\u57fa\u4e8edocker\u642d\u5efarocketmq\u96c6\u7fa4",children:"2.4 \u57fa\u4e8eDocker\u642d\u5efaRocketMQ\u96c6\u7fa4"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"RocketMQ\u7684Broker\u96c6\u7fa4\u6a21\u5f0f\u5206\u4e3a\u5f88\u591a\u79cd\uff0c\u6bd4\u5982\u591amaster\uff0c\u591amaster\u591aslave\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u56e0\u4e3a\u642d\u5efa\u4e86\u4e5f\u4e0d\u4f1a\u7528, \u7528\u5230\u518d\u5b66, \u518d\u89c1!"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>i});var o=r(96540);const s={},t=o.createContext(s);function c(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),o.createElement(t.Provider,{value:n},e.children)}},85514:(e,n,r)=>{r.d(n,{A:()=>o});const o=r.p+"assets/images/Clip_2024-05-01_15-00-17-eefaee330e1b6cc0aef4d8da0eabbc30.png"}}]);