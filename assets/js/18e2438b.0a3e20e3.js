"use strict";(self.webpackChunkhx_loli=self.webpackChunkhx_loli||[]).push([[24516],{28453:(n,e,s)=>{s.d(e,{R:()=>a,x:()=>c});var i=s(96540);const t={},r=i.createContext(t);function a(n){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),i.createElement(r.Provider,{value:e},n.children)}},55254:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>l,contentTitle:()=>c,default:()=>o,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"\u7a0b\u5e8f\u8bed\u8a00/C++/\u73b0\u4ee3C++/\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/\u4f2a\u968f\u673a\u6570\u751f\u6210/index","title":"\u4f2a\u968f\u673a\u6570\u751f\u6210","description":"- \u4f2a\u968f\u673a\u6570\u751f\u6210","source":"@site/docs/002-\u7a0b\u5e8f\u8bed\u8a00/001-C++/003-\u73b0\u4ee3C++/003-\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/009-\u4f2a\u968f\u673a\u6570\u751f\u6210/index.md","sourceDirName":"002-\u7a0b\u5e8f\u8bed\u8a00/001-C++/003-\u73b0\u4ee3C++/003-\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/009-\u4f2a\u968f\u673a\u6570\u751f\u6210","slug":"/\u7a0b\u5e8f\u8bed\u8a00/C++/\u73b0\u4ee3C++/\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/\u4f2a\u968f\u673a\u6570\u751f\u6210/","permalink":"/HXLoLi/docs/\u7a0b\u5e8f\u8bed\u8a00/C++/\u73b0\u4ee3C++/\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/\u4f2a\u968f\u673a\u6570\u751f\u6210/","draft":false,"unlisted":false,"editUrl":"https://github.com/HengXin666/HXLoLi/edit/main/docs/002-\u7a0b\u5e8f\u8bed\u8a00/001-C++/003-\u73b0\u4ee3C++/003-\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/009-\u4f2a\u968f\u673a\u6570\u751f\u6210/index.md","tags":[],"version":"current","lastUpdatedBy":"Heng_Xin_666","lastUpdatedAt":1745851959000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"inline\u771f\u6b63\u7684\u7528\u9014","permalink":"/HXLoLi/docs/\u7a0b\u5e8f\u8bed\u8a00/C++/\u73b0\u4ee3C++/\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/inline\u771f\u6b63\u7684\u7528\u9014/"},"next":{"title":"\u7f16\u8bd1\u671f\u54c8\u5e0c\u8868","permalink":"/HXLoLi/docs/\u7a0b\u5e8f\u8bed\u8a00/C++/\u73b0\u4ee3C++/\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/\u7f16\u8bd1\u671f\u54c8\u5e0c\u8868/"}}');var t=s(74848),r=s(28453);const a={},c="\u4f2a\u968f\u673a\u6570\u751f\u6210",l={},d=[{value:"\u4e00\u3001\u4f7f\u7528\u6a21\u677f",id:"\u4e00\u4f7f\u7528\u6a21\u677f",level:2},{value:"\u4e8c\u3001XorShift32",id:"\u4e8cxorshift32",level:2},{value:"\u4e09\u3001WangSHash",id:"\u4e09wangshash",level:2},{value:"\u56db\u3001\u6d17\u724c",id:"\u56db\u6d17\u724c",level:2},{value:"\u4e94\u3001\u52a0\u6743\u6982\u7387",id:"\u4e94\u52a0\u6743\u6982\u7387",level:2}];function h(n){const e={a:"a",annotation:"annotation",code:"code",div:"div",h1:"h1",h2:"h2",header:"header",li:"li",math:"math",mn:"mn",mo:"mo",mrow:"mrow",p:"p",pre:"pre",semantics:"semantics",span:"span",ul:"ul",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"\u4f2a\u968f\u673a\u6570\u751f\u6210",children:"\u4f2a\u968f\u673a\u6570\u751f\u6210"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://zh.cppreference.com/w/cpp/numeric/random",children:"\u4f2a\u968f\u673a\u6570\u751f\u6210"})}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\u4e00\u4f7f\u7528\u6a21\u677f",children:"\u4e00\u3001\u4f7f\u7528\u6a21\u677f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-cpp",children:"// 1. \u5b9a\u4e49\u968f\u673a\u6570\u5f15\u64ce\u751f\u6210\u5668 (\u6784\u9020\u4f20\u53c2\u662f\u968f\u673a\u6570\u79cd\u5b50, \u6b64\u5904\u4f20\u5165\u57fa\u4e8ecpu\u7684\u771f\u968f\u673a\u6570(\u5f00\u9500\u5927~))\nstd::mt19937 rng{std::random_device{}()};\n\n// 2. \u5747\u5300\u5206\u5e03: \u4ea7\u751f\u5728\u8303\u56f4\u5185\u5747\u5300\u5206\u5e03\u7684\u6574\u6570\nstd::uniform_int_distribution<int> uni(1, 10);\n// \u5982\u679c\u9700\u8981\u6d6e\u70b9\u6570, \u8bf7\u4f7f\u7528`uniform_real_distribution<T>`\n\nfor (int i = 0; i < 10; ++i)\n    HX::print::print(uni(rng), ' ');\nHX::print::print(\"\\n\");\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"uniform_int_distribution"}),"\u4f1a\u63a7\u5236\u5176\u4e3a\u5747\u5300\u968f\u673a, \u4f8b\u5982\u5982\u679c\u4e00\u4e2a",(0,t.jsx)(e.code,{children:"f()"}),"\u7684\u53d6\u503c\u4e3a ",(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mo,{stretchy:"false",children:"["}),(0,t.jsx)(e.mn,{children:"0"}),(0,t.jsx)(e.mo,{separator:"true",children:","}),(0,t.jsx)(e.mn,{children:"128"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"[0, 128]"})]})})}),(0,t.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(e.span,{className:"mopen",children:"["}),(0,t.jsx)(e.span,{className:"mord",children:"0"}),(0,t.jsx)(e.span,{className:"mpunct",children:","}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(e.span,{className:"mord",children:"128"}),(0,t.jsx)(e.span,{className:"mclose",children:"]"})]})})]}),", \u6211\u4eec\u53d6\u503c\u662f ",(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mo,{stretchy:"false",children:"["}),(0,t.jsx)(e.mn,{children:"0"}),(0,t.jsx)(e.mo,{separator:"true",children:","}),(0,t.jsx)(e.mn,{children:"100"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"[0, 100]"})]})})}),(0,t.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(e.span,{className:"mopen",children:"["}),(0,t.jsx)(e.span,{className:"mord",children:"0"}),(0,t.jsx)(e.span,{className:"mpunct",children:","}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(e.span,{className:"mord",children:"100"}),(0,t.jsx)(e.span,{className:"mclose",children:"]"})]})})]}),", \u90a3\u4e48\u5982\u679c\u662f\u76f4\u63a5\u53d6\u6a21",(0,t.jsx)(e.code,{children:"100"}),", \u5f97\u5230\u7684\u7ed3\u679c\u5b9e\u9645\u4e0a",(0,t.jsx)(e.code,{children:"0 ~ 28"}),"\u7684\u6982\u7387\u662f\u9ad8\u4e00\u4e9b\u7684."]}),"\n",(0,t.jsxs)(e.p,{children:["\u800c",(0,t.jsx)(e.code,{children:"uniform_int_distribution"}),"\u5185\u90e8\u4f1a\u4fdd\u8bc1\u6982\u7387\u5747\u5300 (\u5185\u90e8\u53ef\u80fd\u662f\u628a ",(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mo,{children:">"}),(0,t.jsx)(e.mn,{children:"100"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"> 100"})]})})}),(0,t.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.5782em",verticalAlign:"-0.0391em"}}),(0,t.jsx)(e.span,{className:"mrel",children:">"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,t.jsx)(e.span,{className:"mord",children:"100"})]})]})]})," \u7684\u6570\u5168\u90e8",(0,t.jsx)(e.code,{children:"continue"}),"\u4e86, \u76f4\u5230\u751f\u6210\u5728\u516c\u5e73\u7684\u5747\u5300\u7684 ",(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mo,{stretchy:"false",children:"["}),(0,t.jsx)(e.mn,{children:"0"}),(0,t.jsx)(e.mo,{separator:"true",children:","}),(0,t.jsx)(e.mn,{children:"100"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"[0, 100]"})]})})}),(0,t.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(e.span,{className:"mopen",children:"["}),(0,t.jsx)(e.span,{className:"mord",children:"0"}),(0,t.jsx)(e.span,{className:"mpunct",children:","}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(e.span,{className:"mord",children:"100"}),(0,t.jsx)(e.span,{className:"mclose",children:"]"})]})})]})," \u4e0a)"]}),"\n",(0,t.jsx)(e.h2,{id:"\u4e8cxorshift32",children:"\u4e8c\u3001XorShift32"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u8fd9\u4e2a\u662f\u6e38\u620f\u5e38\u7528\u7684\u968f\u673a\u7b97\u6cd5, \u56e0\u4e3a\u5b83\u6027\u80fd\u9ad8..."}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-cpp",children:"struct XorShift32 {\n    uint32_t a;\n\n    explicit XorShift32(size_t seed = 0) \n        : a(static_cast<uint32_t>(seed + 1)) \n    {}\n\n    using result_type = uint32_t;\n\n    constexpr uint32_t operator()() noexcept {\n        uint32_t x = a;\n        x ^= x << 13;\n        x ^= x >> 17;\n        x ^= x << 5;\n        return a = x;\n    }\n\n    static constexpr uint32_t min() noexcept {\n        return 1;\n    }\n\n    static constexpr uint32_t max() noexcept {\n        return UINT32_MAX;\n    }\n};\n\n// \u4f7f\u7528\nXorShift32 rng{std::random_device{}()};\nstd::uniform_int_distribution<int> uni(1, 10);\n\nfor (int i = 0; i < 10; ++i)\n    HX::print::print(uni(rng), ' ');\nHX::print::print(\"\\n\");\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u4e09wangshash",children:"\u4e09\u3001WangSHash"}),"\n",(0,t.jsx)(e.p,{children:"\u65e0\u72b6\u6001\u4f9d\u8d56, \u5e38\u7528\u4e8e\u5e76\u884c\u968f\u673a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-cpp",children:"struct WangSHash {\n    uint32_t a;\n\n    explicit WangSHash(size_t seed = 0) \n        : a(static_cast<uint32_t>(seed)) \n    {}\n\n    using result_type = uint32_t;\n\n    constexpr uint32_t operator()() noexcept {\n        uint32_t x = a;\n        x = (x ^ 61) ^ (x >> 16);\n        x *= 9;\n        x = x ^ (x >> 4);\n        x *= 0x27d4eb2d;\n        x = x ^ (x >> 15);\n        return a = x;\n    }\n\n    static constexpr uint32_t min() noexcept {\n        return 0;\n    }\n\n    static constexpr uint32_t max() noexcept {\n        return UINT32_MAX;\n    }\n};\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u5982:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-C++",children:"for (std::size_t i = 0; i < 10; ++i) {\n    WangSHash rng{i};\n    std::uniform_int_distribution<int> uni(1, 100);\n    HX::print::print(uni(rng), ' ');\n}\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u800c",(0,t.jsx)(e.code,{children:"XorShift32"}),", \u5c31\u9700\u8981\u632a\u5230",(0,t.jsx)(e.code,{children:"for"}),"\u5916\u9762, \u4e0d\u7136\u5f88\u5bb9\u6613\u51fa\u73b0\u4e00\u6837\u7684\u503c."]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-C++",children:'HX::print::println("XorShift32:");\nfor (std::size_t i = 0; i < 10; ++i) {\n    XorShift32 rng{i};\n    std::uniform_int_distribution<int> uni(1, 100);\n    HX::print::print(uni(rng), \' \');\n}\n\nHX::print::println("\\nWangSHash:");\nfor (std::size_t i = 0; i < 10; ++i) {\n    WangSHash rng{i};\n    std::uniform_int_distribution<int> uni(1, 100);\n    HX::print::print(uni(rng), \' \');\n}\nHX::print::print("\\n");\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u8f93\u51fa:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-C++",children:"XorShift32:\n1 1 1 1 1 1 1 1 1 1 \nWangSHash:\n76 16 78 54 80 78 45 20 71 11 \n"})}),"\n",(0,t.jsxs)(e.div,{className:"markdown-alert markdown-alert-tip",children:["\n",(0,t.jsxs)(e.p,{className:"markdown-alert-title",children:[(0,t.jsx)(e.span,{className:"octicon octicon-tip",style:{"--oct-icon":"url(\"data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-light-bulb mr-2' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath d='M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z'%3E%3C/path%3E%3C/svg%3E\")"}}),"Tip"]}),"\n",(0,t.jsxs)(e.p,{children:["\u4e0d\u662f",(0,t.jsx)(e.code,{children:"XorShift32"}),"\u4e0d\u80fd\u5728",(0,t.jsx)(e.code,{children:"for"}),"\u91cc\u9762, \u800c\u662f\u5b83\u5bb9\u6613\u51fa\u73b0\u4e00\u6837\u7684\u503c (\u4f60\u628a",(0,t.jsx)(e.code,{children:"uni(1, 100)"})," -> ",(0,t.jsx)(e.code,{children:"uni(1, 10000000)"}),") \u5c31\u53ef\u4ee5\u770b\u51fa\u6765",(0,t.jsx)(e.code,{children:"XorShift32"}),"\u4e5f\u662f\u6709\u5728\u968f\u673a\u7684..."]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\u56db\u6d17\u724c",children:"\u56db\u3001\u6d17\u724c"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://zh.cppreference.com/w/cpp/algorithm/random_shuffle",children:"std::shuffle"})}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["\u662f",(0,t.jsx)(e.code,{children:"\u5747\u5300\u5206\u5e03+std::swap"}),"."]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-C++",children:"#include <algorithm>\n#include <iostream>\n#include <iterator>\n#include <random>\n#include <vector>\n \nint main() {\n    std::vector<int> v{1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\n \n    std::mt19937 g(std::random_device{}());\n \n    std::shuffle(v.begin(), v.end(), g);\n \n    std::copy(v.begin(), v.end(), std::ostream_iterator<int>(std::cout, \" \"));\n    std::cout << '\\n';\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u4e94\u52a0\u6743\u6982\u7387",children:"\u4e94\u3001\u52a0\u6743\u6982\u7387"}),"\n",(0,t.jsx)(e.p,{children:"\u4f8b\u5982\u67d0\u4e9b\u6e38\u620f\u4e2d\u7684\u62bd\u5361\u673a\u5236, 5%\u6982\u7387\u83b7\u5f97xxx, \u662f\u600e\u4e48\u5b9e\u73b0\u7684\u5462?"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-cpp",children:'// \u5b9a\u4e49\u6982\u7387\nstd::vector<float> pArr = {0.6f, 0.25f, 0.05f, 0.1f};\n// \u5b9a\u4e49\u6982\u7387\u5bf9\u5e94\u7269\u54c1\nstd::vector<std::string> res = {"\u4e00\u661f", "\u4e8c\u661f", "\u56db\u661f", "\u4e09\u661f"};\nstd::vector<float> pArrScanned;\n// \u6c42`pArr`\u7684\u5143\u7d20\u548c, \u5373 sum += pArr[i]; pArrScanned[i] = sum;\nstd::inclusive_scan(pArr.begin(), pArr.end(), std::back_inserter(pArrScanned));\nHX::print::println("pArr: ", pArr);\nHX::print::println("pArrScanned: ", pArrScanned);\nstd::mt19937 rng{std::random_device{}()};\nstd::uniform_real_distribution<float> unf(0.0f, 1.0f);\nauto getRes = [&] () -> std::string {\n    float f = unf(rng);\n    // \u4e8c\u5206, \u786e\u5b9a\u6982\u7387\u533a\u95f4\n    auto it = std::lower_bound(pArrScanned.begin(), pArrScanned.end(), f);\n    if (it == pArrScanned.end()) [[unlikely]] {\n        return "";\n    }\n    return res[it - pArrScanned.begin()];\n};\nHX::print::println(getRes());\n'})})]})}function o(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(h,{...n})}):h(n)}}}]);