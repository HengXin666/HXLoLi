"use strict";(self.webpackChunkhx_loli=self.webpackChunkhx_loli||[]).push([[89177],{28453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>d});var s=r(96540);const c={},o=s.createContext(c);function t(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:t(e.components),s.createElement(o.Provider,{value:n},e.children)}},39971:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"DevOps\u4e0e\u7248\u672c\u63a7\u5236/Docker\u5bb9\u5668/Docker\u57fa\u7840\u7bc7/\u5c06\u672c\u5730\u955c\u50cf\u63a8\u9001\u5230\u79c1\u6709\u5e93/index","title":"\u516d\u3001\u5c06\u672c\u5730\u955c\u50cf\u63a8\u9001\u5230\u79c1\u6709\u5e93","description":"Dockerhub\u3001\u963f\u91cc\u4e91\u8fd9\u6837\u7684\u516c\u5171\u955c\u50cf\u4ed3\u5e93\u53ef\u80fd\u4e0d\u592a\u65b9\u4fbf\uff0c\u6d89\u53ca\u673a\u5bc6\u7684\u516c\u53f8\u4e0d\u53ef\u80fd\u63d0\u4f9b\u955c\u50cf\u7ed9\u516c\u7f51\uff0c\u6240\u4ee5\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u672c\u5730\u79c1\u4eba\u4ed3\u5e93\u4f9b\u7ed9\u56e2\u961f\u4f7f\u7528\uff0c\u57fa\u4e8e\u516c\u53f8\u5185\u90e8\u9879\u76ee\u6784\u5efa\u955c\u50cf\u3002Docker Registry\u662f\u5b98\u65b9\u63d0\u4f9b\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u7528\u4e8e\u6784\u5efa\u79c1\u6709\u955c\u50cf\u4ed3\u5e93\u3002","source":"@site/docs/004-DevOps\u4e0e\u7248\u672c\u63a7\u5236/002-Docker\u5bb9\u5668/003-Docker\u57fa\u7840\u7bc7/006-\u5c06\u672c\u5730\u955c\u50cf\u63a8\u9001\u5230\u79c1\u6709\u5e93/index.md","sourceDirName":"004-DevOps\u4e0e\u7248\u672c\u63a7\u5236/002-Docker\u5bb9\u5668/003-Docker\u57fa\u7840\u7bc7/006-\u5c06\u672c\u5730\u955c\u50cf\u63a8\u9001\u5230\u79c1\u6709\u5e93","slug":"/DevOps\u4e0e\u7248\u672c\u63a7\u5236/Docker\u5bb9\u5668/Docker\u57fa\u7840\u7bc7/\u5c06\u672c\u5730\u955c\u50cf\u63a8\u9001\u5230\u79c1\u6709\u5e93/","permalink":"/HXLoLi/docs/DevOps\u4e0e\u7248\u672c\u63a7\u5236/Docker\u5bb9\u5668/Docker\u57fa\u7840\u7bc7/\u5c06\u672c\u5730\u955c\u50cf\u63a8\u9001\u5230\u79c1\u6709\u5e93/","draft":false,"unlisted":false,"editUrl":"https://github.com/HengXin666/HXLoLi/edit/main/docs/004-DevOps\u4e0e\u7248\u672c\u63a7\u5236/002-Docker\u5bb9\u5668/003-Docker\u57fa\u7840\u7bc7/006-\u5c06\u672c\u5730\u955c\u50cf\u63a8\u9001\u5230\u79c1\u6709\u5e93/index.md","tags":[],"version":"current","lastUpdatedBy":"Heng_Xin_666","lastUpdatedAt":1745851959000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u5c06\u672c\u5730\u955c\u50cf\u63a8\u9001\u5230\u963f\u91cc\u4e91","permalink":"/HXLoLi/docs/DevOps\u4e0e\u7248\u672c\u63a7\u5236/Docker\u5bb9\u5668/Docker\u57fa\u7840\u7bc7/\u5c06\u672c\u5730\u955c\u50cf\u63a8\u9001\u5230\u963f\u91cc\u4e91/"},"next":{"title":"Docker\u5bb9\u5668\u6570\u636e\u5377","permalink":"/HXLoLi/docs/DevOps\u4e0e\u7248\u672c\u63a7\u5236/Docker\u5bb9\u5668/Docker\u57fa\u7840\u7bc7/Docker\u5bb9\u5668\u6570\u636e\u5377/"}}');var c=r(74848),o=r(28453);const t={},d="\u516d\u3001\u5c06\u672c\u5730\u955c\u50cf\u63a8\u9001\u5230\u79c1\u6709\u5e93",i={},l=[{value:"6.1 \u642d\u5efa\u79c1\u670d",id:"61-\u642d\u5efa\u79c1\u670d",level:2},{value:"6.2 \u5c06\u955c\u50cf\u63a8\u9001\u5230\u79c1\u670d\u5e93",id:"62-\u5c06\u955c\u50cf\u63a8\u9001\u5230\u79c1\u670d\u5e93",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"\u516d\u5c06\u672c\u5730\u955c\u50cf\u63a8\u9001\u5230\u79c1\u6709\u5e93",children:"\u516d\u3001\u5c06\u672c\u5730\u955c\u50cf\u63a8\u9001\u5230\u79c1\u6709\u5e93"})}),"\n",(0,c.jsxs)(n.p,{children:["Dockerhub\u3001\u963f\u91cc\u4e91\u8fd9\u6837\u7684\u516c\u5171\u955c\u50cf\u4ed3\u5e93\u53ef\u80fd\u4e0d\u592a\u65b9\u4fbf\uff0c\u6d89\u53ca\u673a\u5bc6\u7684\u516c\u53f8\u4e0d\u53ef\u80fd\u63d0\u4f9b\u955c\u50cf\u7ed9\u516c\u7f51\uff0c\u6240\u4ee5\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u672c\u5730\u79c1\u4eba\u4ed3\u5e93\u4f9b\u7ed9\u56e2\u961f\u4f7f\u7528\uff0c\u57fa\u4e8e\u516c\u53f8\u5185\u90e8\u9879\u76ee\u6784\u5efa\u955c\u50cf\u3002",(0,c.jsx)(n.strong,{children:"Docker Registry"}),"\u662f\u5b98\u65b9\u63d0\u4f9b\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u7528\u4e8e\u6784\u5efa\u79c1\u6709\u955c\u50cf\u4ed3\u5e93\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5148\u642d\u5efa\u79c1\u670d\u5e93\u3002"}),"\n",(0,c.jsx)(n.h2,{id:"61-\u642d\u5efa\u79c1\u670d",children:"6.1 \u642d\u5efa\u79c1\u670d"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u7b2c\u4e00\u6b65: \u4e0b\u8f7d\u955c\u50cfDocker Registry"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"docker pull registry\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u7b2c\u4e8c\u6b65: \u8fd0\u884c\u79c1\u670d\u5bb9\u5668"})}),"\n",(0,c.jsx)(n.p,{children:"\u8fd0\u884c\u79c1\u6709\u5e93Registry\uff0c\u76f8\u5f53\u4e8e\u672c\u5730\u6709\u4e2a\u79c1\u6709Docker hub"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# \u540e\u53f0\u8fd0\u884c + \u6307\u5b9a\u7aef\u53e3\u6620\u5c04 + \u6302\u8f7d\u6570\u636e\u5377\ndocker run -d -p 5000:5000 -v /krisswen/myregistry/:/tmp/registry --privileged=true registry # \u5148\u8fd9\u4e48\u8fd0\u884c\uff0c\u4e0d\u7528\u7ba1\u4e3a\u4ec0\u4e48\n"})}),"\n",(0,c.jsx)(n.h2,{id:"62-\u5c06\u955c\u50cf\u63a8\u9001\u5230\u79c1\u670d\u5e93",children:"6.2 \u5c06\u955c\u50cf\u63a8\u9001\u5230\u79c1\u670d\u5e93"}),"\n",(0,c.jsxs)(n.p,{children:["\u6848\u4f8b\u6f14\u793a\u521b\u5efa\u4e00\u4e2a\u65b0\u955c\u50cf\uff0cubuntu\u5b89\u88c5",(0,c.jsx)(n.code,{children:"ifconfig"}),"\u547d\u4ee4"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"[root@localhost ~]# docker pull ubuntu # \u5b89\u88c5\u4e00\u4e2a\u65b0\u7684\u4e4c\u73ed\u56fe\n[root@localhost ~]# docker run -it ubuntu /bin/bash\nroot@f31cdb9d7ef3:/# ifconfig\nbash: ifconfig: command not found # \u786e\u5b9e\u4e0d\u80fd\u4f7f\u7528\u8fd9\u4e2a\u547d\u4ee4\n\n# \u5b89\u88c5\u8fd9\u4e2a\u547d\u4ee4\nroot@f31cdb9d7ef3:/# apt-get update\nroot@f31cdb9d7ef3:/# apt-get install net-tools\n\n# \u5b89\u88c5\u5b8c\u6210\u540e:\nroot@f31cdb9d7ef3:/# ifconfig\neth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n        inet 172.17.0.3  netmask 255.255.0.0  broadcast 172.17.255.255\n        ether 02:42:ac:11:00:03  txqueuelen 0  (Ethernet)\n        RX packets 8571  bytes 32436599 (32.4 MB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 7368  bytes 406361 (406.3 KB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        inet6 ::1  prefixlen 128  scopeid 0x10<host>\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u6211\u4eec",(0,c.jsx)(n.code,{children:"Ctrl + P + Q"}),"\u9000\u51fa\u5bb9\u5668\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u5f00\u59cb\u8fdb\u884c\u955c\u50cf\u63a8\u9001\u3002"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u7b2c\u4e00\u6b65: \u5b89\u88c5\u955c\u50cf"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'docker commit -m="\u63d0\u4ea4\u7684\u63cf\u8ff0\u4fe1\u606f" -a="\u4f5c\u8005" \u5bb9\u5668ID \u8981\u521b\u5efa\u7684\u76ee\u6807\u955c\u50cf\u540d:[\u6807\u7b7e\u540d]\n'})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'[root@localhost ~]# docker commit -m="ifconfig" -a="Heng_Xin" f31cdb9d7ef3 ubt:0.7.2.1\n'})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsxs)(n.strong,{children:["\u7b2c\u4e8c\u6b65: \u4f7f\u7528",(0,c.jsx)(n.code,{children:"curl"}),"\u5de5\u5177\u9a8c\u8bc1\u79c1\u670d\u5e93\u4e0a\u6709\u4ec0\u4e48\u955c\u50cf"]})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'# ip \u5e94\u8be5\u4e3a\u4f60\u7684 Linux \u7684 ip\n[root@localhost ~]# curl -XGET http://192.168.213.66:5000/v2/_catalog\n{"repositories":[]}\n'})}),"\n",(0,c.jsx)(n.p,{children:"\u53ef\u4ee5\u770b\u5230\uff0c\u76ee\u524d\u79c1\u670d\u5e93\u6ca1\u6709\u4efb\u4f55\u955c\u50cf\u4e0a\u4f20\u8fc7\u3002"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsxs)(n.strong,{children:["\u7b2c\u4e09\u6b65: \u5c06\u65b0\u955c\u50cf",(0,c.jsx)(n.code,{children:"ubt:0.7.2.1"}),"\u4fee\u6539\u7b26\u5408\u79c1\u670d\u89c4\u8303\u7684Tag"]})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"docker tag <\u955c\u50cf\u540d\u79f0/id>:Tag Host:Port/<\u955c\u50cf\u540d\u79f0>:Tag\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"[root@localhost ~]# docker tag ubt:0.7.2.1 192.168.213.66:5000/heng_xin/ubt:114.514\n[root@localhost ~]# docker images\nREPOSITORY                                       TAG       IMAGE ID       CREATED         SIZE\n192.168.213.66:5000/heng_xin/ubt                 114.514   e62dd9e82f57   6 minutes ago   124MB\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"\u7b2c\u56db\u6b65: \u4fee\u6539docker\u914d\u7f6e\u6587\u4ef6\u4f7f\u4e4b\u652f\u6301http"}),"\ndocker\u9ed8\u8ba4\u4e0d\u5141\u8bb8http\u65b9\u5f0f\u63a8\u9001\u955c\u50cf\uff0c\u901a\u8fc7\u914d\u7f6e\u6765\u53d6\u6d88\u8fd9\u4e2a\u9650\u5236\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["vim\u547d\u4ee4",(0,c.jsx)(n.code,{children:"vim /etc/docker/daemon.json"}),"\u540e, \u65b0\u589e\u5982\u4e0b\u5185\u5bb9: (\u6ce8: ip \u5e94\u8be5\u662f\u4f60\u7684 Linux \u7684 ip)"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'"insecure-registries": ["192.168.213.66:5000"]\n'})}),"\n\n\n\n\n\n\n\n\n\n\n\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsx)(n.tr,{children:(0,c.jsx)(n.th,{style:{textAlign:"center"},children:"##container##"})})}),(0,c.jsx)(n.tbody,{children:(0,c.jsx)(n.tr,{children:(0,c.jsx)(n.td,{style:{textAlign:"center"},children:(0,c.jsx)(n.img,{alt:"Clip_2024-04-22_23-26-06.png ##w700##",src:r(65889).A+"",width:"1090",height:"176"})})})})]}),"\n",(0,c.jsx)(n.p,{children:"\u6700\u597d\u662f\u91cd\u65b0\u542f\u52a8docker\u3002\u5e76\u4e14\u4fdd\u8bc1linux\u9632\u706b\u5899\u6ca1\u6709\u5bf95000\u7aef\u53e3\u62e6\u622a\u3002"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u7b2c\u4e94\u6b65: push\u63a8\u9001\u5230\u79c1\u670d\u5e93"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsxs)(n.strong,{children:["\u7531\u4e8e\u91cd\u65b0\u542f\u52a8\u4e86docker\uff0c\u4e4b\u524d\u8fd0\u884c\u7684",(0,c.jsx)(n.code,{children:"docker registry"}),"\u5bb9\u5668\u4e5f\u505c\u6b62\u4e86\uff0c\u9700\u8981\u91cd\u65b0\u542f\u52a8\u8fd9\u4e2a\u5bb9\u5668\u3002"]})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"[root@localhost ~]# docker ps -a # \u627e\u5230\u4e4b\u524d\u7684\u90a3\u4e2a\n[root@localhost ~]# docker start dec21fe489b3 # \u542f\u52a8\u5373\u53ef\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"[root@localhost ~]# docker push 192.168.213.66:5000/heng_xin/ubt:114.514\nThe push refers to repository [192.168.213.66:5000/heng_xin/ubt]\ne9572dd86289: Pushed \n9f54eef41275: Pushed \n114.514: digest: sha256:9f65e11fc928910c7c393cd830fb2794e0f8fa7c5474258d8724ce550e1d17dc size: 741\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u7b2c\u516d\u6b65: \u9a8c\u8bc1\u79c1\u670d\u5e93\u4e0a\u662f\u5426\u5b58\u5728\u955c\u50cf"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'[root@localhost ~]# curl -XGET http://192.168.213.66:5000/v2/_catalog\n{"repositories":["heng_xin/ubt"]}\n'})}),"\n",(0,c.jsx)(n.p,{children:"\u6211\u4eec\u53d1\u73b0\u6ca1\u6709\u95ee\u9898\u3002"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u7b2c\u4e03\u6b65: \u4ece\u79c1\u670d\u4e0a\u62c9\u53d6\u955c\u50cf"})}),"\n",(0,c.jsx)(n.p,{children:"(\u5728\u6b64\u4e4b\u524d\u6211\u5df2\u7ecf\u786e\u4fdd rm, rmi -f \u4e86\u5168\u90e8 \u672c\u5730\u7684\u4e4c\u73ed\u56fe\u5bb9\u5668/\u955c\u50cf)"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"[root@localhost ~]# docker pull 192.168.213.66:5000/heng_xin/ubt:114.514\n114.514: Pulling from heng_xin/ubt\n7b1a6ab2e44d: Already exists \ncf70ab646270: Pull complete \nDigest: sha256:9f65e11fc928910c7c393cd830fb2794e0f8fa7c5474258d8724ce550e1d17dc\nStatus: Downloaded newer image for 192.168.213.66:5000/heng_xin/ubt:114.514\n192.168.213.66:5000/heng_xin/ubt:114.514\n[root@localhost ~]# docker images\nREPOSITORY                         TAG       IMAGE ID       CREATED          SIZE\n192.168.213.66:5000/heng_xin/ubt   114.514   e62dd9e82f57   17 minutes ago   124MB\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u6211\u4eec\u53d1\u73b0\uff0c\u955c\u50cf\u6210\u529f\u62c9\u53d6\u4e0b\u6765\u4e86\u3002"})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},65889:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/Clip_2024-04-22_23-26-06-171230e0f0aa135694c0d3a56b094567.png"}}]);