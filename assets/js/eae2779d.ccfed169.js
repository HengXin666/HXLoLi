"use strict";(self.webpackChunkhx_loli=self.webpackChunkhx_loli||[]).push([[99249],{28453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>d});var s=r(96540);const i={},t=s.createContext(i);function a(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(t.Provider,{value:n},e.children)}},31047:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/Clip_2024-07-03_17-59-48-c571440e65d0d3045849d4029fe8c2a0.png"},31559:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"\u7a0b\u5e8f\u8bed\u8a00/C++/\u5927\u9879\u76ee/\u5927\u9879\u76ee/\u4ee3\u7801\u89e3\u6784/C++\u4ee3\u7801\u89e3\u6784/index","title":"C++\u5927\u9879\u76ee\u4ee3\u7801\u89e3\u6784","description":"0. \u5feb\u901f\u6d4b\u8bd5 & \u73af\u5883\u7ec6\u8282","source":"@site/docs/002-\u7a0b\u5e8f\u8bed\u8a00/001-C++/008-\u5927\u9879\u76ee/001-\u5927\u9879\u76ee/002-\u4ee3\u7801\u89e3\u6784/002-C++\u4ee3\u7801\u89e3\u6784/index.md","sourceDirName":"002-\u7a0b\u5e8f\u8bed\u8a00/001-C++/008-\u5927\u9879\u76ee/001-\u5927\u9879\u76ee/002-\u4ee3\u7801\u89e3\u6784/002-C++\u4ee3\u7801\u89e3\u6784","slug":"/\u7a0b\u5e8f\u8bed\u8a00/C++/\u5927\u9879\u76ee/\u5927\u9879\u76ee/\u4ee3\u7801\u89e3\u6784/C++\u4ee3\u7801\u89e3\u6784/","permalink":"/HXLoLi/docs/\u7a0b\u5e8f\u8bed\u8a00/C++/\u5927\u9879\u76ee/\u5927\u9879\u76ee/\u4ee3\u7801\u89e3\u6784/C++\u4ee3\u7801\u89e3\u6784/","draft":false,"unlisted":false,"editUrl":"https://github.com/HengXin666/HXLoLi/edit/main/docs/002-\u7a0b\u5e8f\u8bed\u8a00/001-C++/008-\u5927\u9879\u76ee/001-\u5927\u9879\u76ee/002-\u4ee3\u7801\u89e3\u6784/002-C++\u4ee3\u7801\u89e3\u6784/index.md","tags":[],"version":"current","lastUpdatedBy":"Heng_Xin_666","lastUpdatedAt":1745851959000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u524d\u7aef\u4ee3\u7801\u89e3\u6784","permalink":"/HXLoLi/docs/\u7a0b\u5e8f\u8bed\u8a00/C++/\u5927\u9879\u76ee/\u5927\u9879\u76ee/\u4ee3\u7801\u89e3\u6784/\u524d\u7aef\u4ee3\u7801\u89e3\u6784/"},"next":{"title":"\ud83d\udc12Java\u4ece\u5165\u95e8\u5230\u5f00\u6e9c\ud83d\udc12","permalink":"/HXLoLi/docs/\u7a0b\u5e8f\u8bed\u8a00/Java/\ud83d\udc12Java\u4ece\u5165\u95e8\u5230\u5f00\u6e9c\ud83d\udc12/"}}');var i=r(74848),t=r(28453);const a={},d="C++\u5927\u9879\u76ee\u4ee3\u7801\u89e3\u6784",c={},l=[{value:"0. \u5feb\u901f\u6d4b\u8bd5 &amp; \u73af\u5883\u7ec6\u8282",id:"0-\u5feb\u901f\u6d4b\u8bd5--\u73af\u5883\u7ec6\u8282",level:2},{value:"1. \u6587\u4ef6\u5206\u652f",id:"1-\u6587\u4ef6\u5206\u652f",level:2},{value:"2. \u91cd\u8981\u529f\u80fd\u603b\u7ed3",id:"2-\u91cd\u8981\u529f\u80fd\u603b\u7ed3",level:2},{value:"2.1 [\u95ee\u9898]: \u6d88\u5931\u7684<code>mes-c%d-xxx/README.md</code>",id:"21-\u95ee\u9898-\u6d88\u5931\u7684mes-cd-xxxreadmemd",level:3},{value:"2.2 [\u95ee\u9898]: <code>FastDFS</code>\u5728\u9879\u76ee\u4e2d\u7684\u4f7f\u7528\u5b58\u7591\u95ee",id:"22-\u95ee\u9898-fastdfs\u5728\u9879\u76ee\u4e2d\u7684\u4f7f\u7528\u5b58\u7591\u95ee",level:3},{value:"2.2.1 \u8fd4\u56de\u94fe\u63a5 (\u4e5f\u53ef\u4ee5\u8fd4\u56de<code>StringJsonVO</code>)",id:"221-\u8fd4\u56de\u94fe\u63a5-\u4e5f\u53ef\u4ee5\u8fd4\u56destringjsonvo",level:4},{value:"2.2.2 \u4e00\u79cd\u4f7f\u7528oatpp\u800c\u4e0d\u662fDFS\u7684\u5b9e\u73b0",id:"222-\u4e00\u79cd\u4f7f\u7528oatpp\u800c\u4e0d\u662fdfs\u7684\u5b9e\u73b0",level:4},{value:"2.3 [\u7591\u95ee]: \u6279\u91cf\u5220\u9664\u6570\u636e\u5728\u9879\u76ee\u4e2d\u6709\u591a\u79cd\u5b9e\u73b0",id:"23-\u7591\u95ee-\u6279\u91cf\u5220\u9664\u6570\u636e\u5728\u9879\u76ee\u4e2d\u6709\u591a\u79cd\u5b9e\u73b0",level:3},{value:"2.4 [\u95ee\u9898]: CV\u5927\u5e08\u6cdb\u6ee5",id:"24-\u95ee\u9898-cv\u5927\u5e08\u6cdb\u6ee5",level:3},{value:"2.5 [\u6ce8\u610f]: \u8fd4\u56de\u7684\u662f<code>ClassJsonVO</code>, \u5e94\u8be5\u521d\u59cb\u5316\u4e3a\u7a7a",id:"25-\u6ce8\u610f-\u8fd4\u56de\u7684\u662fclassjsonvo-\u5e94\u8be5\u521d\u59cb\u5316\u4e3a\u7a7a",level:3}];function o(e){const n={a:"a",code:"code",del:"del",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"c\u5927\u9879\u76ee\u4ee3\u7801\u89e3\u6784",children:"C++\u5927\u9879\u76ee\u4ee3\u7801\u89e3\u6784"})}),"\n",(0,i.jsx)(n.h2,{id:"0-\u5feb\u901f\u6d4b\u8bd5--\u73af\u5883\u7ec6\u8282",children:"0. \u5feb\u901f\u6d4b\u8bd5 & \u73af\u5883\u7ec6\u8282"}),"\n",(0,i.jsx)(n.p,{children:"\u4e07\u7528\u51ed\u8bc1: (\u548c\u65f6\u95f4\u6709\u5173, \u9700\u8981\u5b9a\u671f\u66f4\u65b0)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-C++",children:"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdXRob3JpdGllcyI6WyJTVVBFUl9BRE1JTiJdLCJleHAiOjE3MjAxODc4ODYsImlkIjoiMSIsInVzZXJfbmFtZSI6InJvdW1pb3UifQ.Xy7Ayv8-5CyqkW9MFITzJZnGxL7NAIRMDMV-Yc7qbOBwaCEci3hoE8SFTeRnrUcZ911dfRuq5pnFp6muweLsAW6xbYruO-ryDq7m_oXoKFWlwH6uaFP-l4yCLJ7xoNkaoBhw_b7fpf5vMngWa9rdNmBiLZu9E2gjyz2Y2MEN_Q90LPHBI7QGndMs-v8YoadymY4AKTmQBDcQPmzo4uu3lCMTLzHyMgYbWlqs4upcgjcb-VVQ-SdT3-vE1SRiotW2s9IEAsermEa9RGtr8Ufd_zNSYww9tA149_UMO8DXXcNQZROy9U0aVRZ7q7rvIROYQH8cbXTaqbDCjvQBZi4bWg\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5feb\u901f\u6d4b\u8bd5:"}),"\n",(0,i.jsx)(n.p,{children:"data-source.yaml:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"spring:\n  datasource:\n    url: jdbc:mysql://192.168.213.88:3306/test?useUnicode=true&useSSL=false&characterEncoding=utf-8&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true\n    username: root\n    password: 123456\n  redis:\n    host: 192.168.213.88\n    port: 6379\n    password: 01star\n  data:\n    mongodb:\n      uri: mongodb://awei:123456@192.168.213.88:27017/firstDb\n"})}),"\n",(0,i.jsx)(n.p,{children:"third-services.yaml:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"rocket-mq:\n  name-server: 192.168.213.88:9876\nfastdfs:\n  charset: UTF-8\n  connect-timeout: 5\n  network-timeout: 30\n  http-secret-key: FastDFS1234567890\n  http-anti-steal-token: true\n  connection-pool-max-idle: 20\n  connection-pool-max-total: 20\n  connection-pool-min-idle: 2\n  nginx-servers: 192.168.213.88:8888\n  tracker-servers: 192.168.213.88:22122\n"})}),"\n",(0,i.jsx)(n.h2,{id:"1-\u6587\u4ef6\u5206\u652f",children:"1. \u6587\u4ef6\u5206\u652f"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.del,{children:["(\u6211\u662f\u516b\u560e, \u5168\u90e8\u9879\u76ee\u4ee3\u7801\u90fd\u770b\u5b8c, \u7b14\u8bb0\u8bb0\u5f55\u5b8c\u4e86\u624d\u53d1\u73b0, \u9879\u76ee\u603b\u7ed3\u6709\u6bcf\u4e00\u4e2a\u5c0f\u7ec4\u7684\u8d1f\u8d23\u529f\u80fd\u770bqwq(\u867d\u7136\u662f",(0,i.jsx)(n.code,{children:"mes-c%d-%d"}),"\u683c\u5f0f))"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-C++",children:"mes-cpp\n\u251c\u2500mes-c1-equipmentmanagement         // \u8bbe\u5907\u7ba1\u7406-\u7c7b\u578b\u8bbe\u7f6e\n\u251c\u2500mes-c1-workfixture                 // \u5de5\u88c5\u5939\u5177\n\u251c\u2500mes-c1-workstation                 // \u57fa\u7840\u6570\u636e-\u5de5\u4f5c\u7ad9\n\u251c\u2500mes-c2-equipmentledger             // \u8bbe\u5907\u7ba1\u7406-\u8bbe\u5907\u53f0\u8d26\u6a21\u5757\n\u251c\u2500mes-c2-inspection.maintenanceitems // \u8bbe\u5907\u7ba1\u7406-\u8bbe\u5907\u53f0\u8d26\u6a21\u5757\n\u251c\u2500mes-c2-inspection.maintenanceplan  // \u8bbe\u5907\u7ba1\u7406-\u70b9\u68c0/\u4fdd\u517b\u8ba1\u5212\u6a21\u5757\n\u251c\u2500mes-c2-repairorder                 // \u8bbe\u5907\u7ba1\u7406-\u7ef4\u4fee\u5355\u6a21\u5757/\u7ef4\u4fee\u5185\u5bb9\n\u251c\u2500mes-c3-promanager                  // \u751f\u4ea7\u7ba1\u7406-\u5de5\u827a\u6d41\u7a0b/\u5de5\u5e8f\u8bbe\u7f6e\n\u251c\u2500mes-c3-quamanager                  // \u8d28\u91cf\u7ba1\u7406-\u5e38\u89c1\u7f3a\u9677\n\u251c\u2500mes-c4-prodmgmt                    // \u751f\u4ea7\u7ba1\u7406-\u751f\u4ea7\u5de5\u5355/\u751f\u4ea7\u6392\u4ea7/\u751f\u4ea7\u62a5\u5de5\n\u251c\u2500mes-c4-whmgmt                      // \u4ed3\u50a8\u7ba1\u7406-\u91c7\u8d2d\u5165\u5e93\n\u251c\u2500mes-c5-QualityControl              // \u8d28\u91cf\u7ba1\u7406-\u8fc7\u7a0b\u68c0\u9a8c/\u68c0\u6d4b\u6a21\u677f/\u68c0\u6d4b\u9879\u8bbe\u7f6e/\u5f85\u68c0\u4efb\u52a1\n\u251c\u2500mes-c5-WarehouseManagement         // \u4ed3\u50a8\u7ba1\u7406-\u5e93\u5b58\u73b0\u6709\u91cf\n\u251c\u2500mes-c6-quality                     // \u8d28\u91cf\u7ba1\u7406-\u6765\u6599\u68c0\u9a8c\n\u251c\u2500mes-c6-storage-product             // \u4ed3\u50a8\u7ba1\u7406-\u91c7\u8d2d\u5165\u5e93\n\u251c\u2500mes-c6-storage-return              // \u4ed3\u50a8\u7ba1\u7406-\u91c7\u8d2d\u9000\u8d27\n\u251c\u2500mes-c7-rejection                   // \u4ed3\u50a8\u7ba1\u7406-\u751f\u4ea7\u9000\u6599\n\u251c\u2500mes-c7-settings                    // \u4ed3\u50a8\u7ba1\u7406-\u4ed3\u5e93\u8bbe\u7f6e\n\u251c\u2500mes-c7-storage                     // \u4ed3\u50a8\u7ba1\u7406-\u4ea7\u54c1\u5165\u5e93\n"})}),"\n",(0,i.jsx)(n.h2,{id:"2-\u91cd\u8981\u529f\u80fd\u603b\u7ed3",children:"2. \u91cd\u8981\u529f\u80fd\u603b\u7ed3"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4e0b\u5217\u53ea\u5217\u51fa\u4e3b\u8981\u529f\u80fd, \u67d0\u4e9b\u529f\u80fd\u7684\u7279\u522b\u4e4b\u5904\u6216\u8005\u95ee\u9898, \u5176\u4ed6\u9ed8\u8ba4CRUD:"}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"21-\u95ee\u9898-\u6d88\u5931\u7684mes-cd-xxxreadmemd",children:["2.1 [\u95ee\u9898]: \u6d88\u5931\u7684",(0,i.jsx)(n.code,{children:"mes-c%d-xxx/README.md"})]}),"\n",(0,i.jsxs)(n.ol,{start:"0",children:["\n",(0,i.jsxs)(n.li,{children:["\u600e\u4e48\u51e0\u4e4e\u90fd\u4e0d\u5199",(0,i.jsx)(n.code,{children:"mes-c%d-xxx/README.md"}),"?\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u76ee\u524d\u5c31\u53ea\u770b\u5230",(0,i.jsx)(n.code,{children:"c2"}),"\u548c",(0,i.jsx)(n.code,{children:"c7"}),"\u5199\u4e86 (c1 ~ c7)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"22-\u95ee\u9898-fastdfs\u5728\u9879\u76ee\u4e2d\u7684\u4f7f\u7528\u5b58\u7591\u95ee",children:["2.2 [\u95ee\u9898]: ",(0,i.jsx)(n.code,{children:"FastDFS"}),"\u5728\u9879\u76ee\u4e2d\u7684\u4f7f\u7528\u5b58\u7591\u95ee"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5bf9\u4e8e",(0,i.jsx)(n.code,{children:"FastDFS"}),"\u5728\u9879\u76ee\u4e2d\u7684\u4f7f\u7528\u5b58\u7591\u95ee/\u95ee\u9898:\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Excel\u662f\u4fdd\u5b58\u5728\u670d\u52a1\u5668A\u7684, \u5e76\u4e14\u540d\u79f0\u90fd\u662f\u4e00\u6837\u7684, \u867d\u7136\u4e0a\u4f20\u5230",(0,i.jsx)(n.code,{children:"FastDFS"}),"\u540e\u540d\u79f0\u4f1a\u53d8\u4e3a",(0,i.jsx)(n.code,{children:"FID"}),"; \u4f46\u662f\u672c\u5730\u6587\u4ef6\u540d\u79f0\u4e00\u6837\u4f1a\u4e0d\u4f1a\u5b58\u5728\u88ab\u8986\u76d6(\u8fd8\u5728\u4e0a\u4f20, \u53c8\u6709\u65b0\u7684\u4fdd\u5b58 (\u867d\u7136\u4e0d\u592a\u53ef\u80fd, ",(0,i.jsx)(n.del,{children:"\u56e0\u4e3a\u4e1a\u52a1\u51fd\u6570\u662f\u539f\u5b50\u7684.."}),"(\u5fc5\u9700\u7b49\u5f85\u6587\u4ef6\u670d\u52a1\u5668\u54cd\u5e94\u76f4\u5230\u8d85\u65f6 | \u4f46\u662f\u4e07\u4e00\u53ef\u4ee5\u540c\u65f6\u8c03\u7528\u591a\u6b21\u8fd9\u4e2a\u4e1a\u52a1\u51fd\u6570\u5462?!)))/\u6df7\u6dc6\u7684\u98ce\u9669?"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u89e3\u51b3: \u4f7f\u7528\u65f6\u95f4\u6233+\u968f\u673a\u6570\u6df7\u6dc6/\u751f\u6210\u552f\u4e00key\u6765\u786e\u4fdd\u672c\u5730\u6587\u4ef6id\u552f\u4e00, \u9632\u6b62\u88ab\u8986\u76d6, \u5e76\u4e14\u4e0a\u4f20\u6587\u4ef6\u670d\u52a1\u5668\u540e, \u5220\u9664\u672c\u5730\u7684\u6587\u4ef6, \u9632\u6b62\u7a7a\u95f4\u6d6a\u8d39~~(\u6700\u597d\u662f\u53ea\u5728\u5185\u5b58\u4e0a, \u4e0d\u9700\u8981\u78c1\u76d8io\u53c2\u4e0e, \u4f46\u662fExcel\u548cFastDFS\u7684API\u597d\u50cf\u4e0d\u652f\u6301)~~."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u4ee5\u53ca\u4e0b\u8f7d\u6709\u6587\u4ef6\u540d\u79f0\u4e71\u7801: ",(0,i.jsx)(n.a,{href:"https://blog.csdn.net/gobravery/article/details/79353515",children:"FastDFS\u4f7f\u7528\u4e4b\u6587\u4ef6\u540d\u79f0"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'# nginx\u914d\u7f6e\nlocation /group1/M00/ {\n    root /fastdfs/data; # \u6ce8\u91ca: \u586b\u5199\u6570\u636e\u5b58\u50a8\u8def\u5f84\uff0c\u524d\u9762root\u522b\u5fd8\u8bb0\n    if ($arg_attname ~ "^(.+)") {\n        # \u8bbe\u7f6e\u4e0b\u8f7d\n        add_header Content-Type application/x-download;\n        # \u8bbe\u7f6e\u6587\u4ef6\u540d\n        add_header Content-Disposition "attachment;filename=$arg_attname";\n    }\n    ngx_fastdfs_module;\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"nginx -s reload\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u53e6\u5916\u4e0a\u4f20\u5230",(0,i.jsx)(n.code,{children:"FastDFS"}),"\u5e94\u8be5\u6709\u7559\u5b58\u5468\u671f\u624d\u5bf9, \u5373",(0,i.jsx)(n.a,{href:"https://blog.csdn.net/u010976445/article/details/124475846",children:"\u5b9a\u65f6\u81ea\u52a8\u5220\u9664fdfs\u6587\u4ef6(\u6e05\u7406FdastDfs\u7a7a\u95f4)"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u7136\u540e, \u9879\u76ee\u4e2d\u4e0d\u6b62\u4e00\u5904\u628a\u4fdd\u5b58\u6587\u4ef6\u3001\u4e0a\u4f20\u5230DFS\uff08\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\uff09\u4ee5\u53ca\u751f\u6210\u4e0b\u8f7d\u94fe\u63a5\u8fd9\u4e9b\u64cd\u4f5c\u653e\u5728\u63a7\u5236\u5c42(Controller), \u8fd9\u6837\u662f\u4e0d\u5408\u9002\u7684, \u63a7\u5236\u5c42\u4e3b\u8981\u8d1f\u8d23\u63a5\u6536\u8bf7\u6c42\u3001\u5904\u7406\u8f93\u5165\u8f93\u51fa\uff0c\u4ee5\u53ca\u63a7\u5236\u4e1a\u52a1\u6d41\u7a0b\u7684\u987a\u5e8f\uff0c\u800c\u5177\u4f53\u7684\u6587\u4ef6\u64cd\u4f5c\u548c\u4e0a\u4f20\u903b\u8f91\u5e94\u8be5\u5728\u670d\u52a1\u5c42\u8fdb\u884c\u3002(\u8fdd\u53cd\u4e86",(0,i.jsx)(n.a,{href:"/HXLoLi/docs/%E8%AE%A1%E4%BD%AC%E5%B8%B8%E8%AD%98/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E3%80%90SOLID%E3%80%91%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%99/",children:"[SOLID]\u5355\u4e00\u804c\u8d23\u539f\u5219"}),", \u8fd8\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u8026\u5408\u5ea6)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h4,{id:"221-\u8fd4\u56de\u94fe\u63a5-\u4e5f\u53ef\u4ee5\u8fd4\u56destringjsonvo",children:["2.2.1 \u8fd4\u56de\u94fe\u63a5 (\u4e5f\u53ef\u4ee5\u8fd4\u56de",(0,i.jsx)(n.code,{children:"StringJsonVO"}),")"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-C++",children:'// \u58f0\u660e\u63a7\u5236\u5c42\u7aef\u70b9\n// \u5bfc\u51fa\u7ef4\u4fee\u5355\u5206\u9875\u67e5\u8be2 \u63a5\u53e3\u63cf\u8ff0\nENDPOINT_INFO(queryRepairorderToFile) {\n    // \u5b9a\u4e49\u63a5\u53e3\u6807\u9898\n    API_DEF_ADD_TITLE("[Find Data Return To File]" + ZH_WORDS_GETTER("repairorder.summary.page_query_table"));\n    // \u5b9a\u4e49\u9ed8\u8ba4\u6388\u6743\u53c2\u6570\uff08\u53ef\u9009\u5b9a\u4e49\uff0c\u5982\u679c\u5b9a\u4e49\u4e86\uff0c\u4e0b\u9762ENDPOINT\u91cc\u9762\u9700\u8981\u52a0\u5165API_HANDLER_AUTH_PARAME\uff09\n    API_DEF_ADD_AUTH();\n    // \u5b9a\u4e49\u54cd\u5e94\u53c2\u6570\u683c\u5f0f\n    //API_DEF_ADD_RSP_JSON_WRAPPER(RepairorderPageJsonVO);\n    // \u5b9a\u4e49\u5206\u9875\u67e5\u8be2\u53c2\u6570\u63cf\u8ff0\n    API_DEF_ADD_PAGE_PARAMS();\n    // \u5b9a\u4e49\u5176\u4ed6\u67e5\u8be2\u53c2\u6570\u63cf\u8ff0\n    API_DEF_ADD_QUERY_PARAMS(String, "repairCode", ZH_WORDS_GETTER("repairorder.query.fields.repair_code"), "REP20240721", false);      // \u7ef4\u4fee\u5355\u7f16\u53f7\n    API_DEF_ADD_QUERY_PARAMS(String, "repairName", ZH_WORDS_GETTER("repairorder.query.fields.repair_name"), "BUG-Table", false);        // \u7ef4\u4fee\u5355\u540d\u79f0\n    API_DEF_ADD_QUERY_PARAMS(String, "machineryCode", ZH_WORDS_GETTER("repairorder.query.fields.machinery_code"), "M0001", false);      // \u8bbe\u5907\u7f16\u7801\n    API_DEF_ADD_QUERY_PARAMS(String, "machineryName", ZH_WORDS_GETTER("repairorder.query.fields.machinery_name"), "WG-A1-MK2", false);  // \u8bbe\u5907\u540d\u79f0\n    API_DEF_ADD_QUERY_PARAMS(String, "repairResult", ZH_WORDS_GETTER("repairorder.query.fields.repair_result"), "SUCCESS", false);      // \u7ef4\u4fee\u7ed3\u679c (SUCCESS: \u7ef4\u4fee\u6210\u529f; SCRAP: \u62a5\u5e9f)\n    API_DEF_ADD_QUERY_PARAMS(String, "status", ZH_WORDS_GETTER("repairorder.query.fields.status"), "PREPARE", false);                   // \u5355\u636e\u72b6\u6001 (PREPARE: \u8349\u7a3f; CONFIRMED: \u5df2\u786e\u8ba4; APPROVING: \u5ba1\u6279\u4e2d; APPROVED: \u5df2\u5ba1\u6279; FINISHED: \u5df2\u5b8c\u6210)\n}\n// \u5bfc\u51fa\u7ef4\u4fee\u5355\u5206\u9875\u67e5\u8be2 \u63a5\u53e3\u5904\u7406\nENDPOINT(API_M_GET, "/equipment-ledger/repairorder/page-query-table-to-file", queryRepairorderToFile, QUERIES(QueryParams, queryParams), API_HANDLER_AUTH_PARAME) {\n    // \u89e3\u6790\u67e5\u8be2\u53c2\u6570\u4e3aQuery\u9886\u57df\u6a21\u578b\n    API_HANDLER_QUERY_PARAM(pageQuery, RepairorderQuery, queryParams);\n    // \u547c\u53eb\u6267\u884c\u51fd\u6570\u54cd\u5e94\u7ed3\u679c\n    return queryRepairorderToFile(pageQuery);\n}\n\n// \u63a7\u5236\u5c42\nstd::shared_ptr<oatpp::web::server::api::ApiController::OutgoingResponse> RepairorderController::queryRepairorderToFile(const RepairorderQuery::Wrapper& query)\n{\n    // \u5b9a\u4e49\u4e00\u4e2aService\n    RepairorderService service;\n    // \u67e5\u8be2\u6570\u636e\n    auto res = service.listAllToFile(query);\n    // \u54cd\u5e94\u7ed3\u679c\n    if (res == "")\n        return createResponse(Status::CODE_400, "Error: ???");\n    return createResponse(Status::CODE_200, res + "?arg_attname=table" /* + ZH_WORDS_GETTER("repairorder.summary.page_query_table") */ + ".xlsx"); // \u8fd9\u4e2a\u53bb\u6587\u4ef6\u540d\u79f0\u4e71\u7801\n}\n\n// \u670d\u52a1\u5c42\nstd::string RepairorderService::listAllToFile(const RepairorderQuery::Wrapper& query)\n{\n    // \u67e5\u8be2\u6570\u636e\u603b\u6761\u6570\n    RepairorderDAO dao;\n    uint64_t count = dao.count(query);\n    if (count <= 0) {\n        return "";\n    }\n\n    // \u5206\u9875\u67e5\u8be2\u6570\u636e\n    list<DvRepairDO> result = dao.selectWithPage(query);\n\n    // \u5c06DO\u4fdd\u5b58\u5230\u6587\u4ef6\n    std::vector<std::vector<std::string>> vvexcel;\n    vvexcel.insert(vvexcel.begin(), {\n               // \u5b9a\u4e49\u5176\u4ed6\u67e5\u8be2\u53c2\u6570\u63cf\u8ff0\n               ZH_WORDS_GETTER("repairorder.query.fields.repair_id"),      // \u7ef4\u4fee\u5355ID\n               ZH_WORDS_GETTER("repairorder.query.fields.repair_code"),    // \u7ef4\u4fee\u5355\u7f16\u53f7\n               ZH_WORDS_GETTER("repairorder.query.fields.repair_name"),    // \u7ef4\u4fee\u5355\u540d\u79f0\n               ZH_WORDS_GETTER("repairorder.query.fields.machinery_id"),   // \u8bbe\u5907ID\n               ZH_WORDS_GETTER("repairorder.query.fields.machinery_code"), // \u8bbe\u5907\u7f16\u7801\n               ZH_WORDS_GETTER("repairorder.query.fields.machinery_name"), // \u8bbe\u5907\u540d\u79f0\n               ZH_WORDS_GETTER("repairorder.query.fields.require_date"),   // \u62a5\u4fee\u65e5\u671f\n               ZH_WORDS_GETTER("repairorder.query.fields.finish_date"),    // \u7ef4\u4fee\u5b8c\u6210\u65e5\u671f\n               ZH_WORDS_GETTER("repairorder.query.fields.confirm_date"),   // \u9a8c\u6536\u65e5\u671f\n               ZH_WORDS_GETTER("repairorder.query.fields.repair_result"),  // \u7ef4\u4fee\u7ed3\u679c (SUCCESS: \u7ef4\u4fee\u6210\u529f; SCRAP: \u62a5\u5e9f)\n               ZH_WORDS_GETTER("repairorder.query.fields.accepted_by"),    // \u7ef4\u4fee\u4eba\u5458\n               ZH_WORDS_GETTER("repairorder.query.fields.confirm_by"),     // \u9a8c\u6536\u4eba\u5458\n               ZH_WORDS_GETTER("repairorder.query.fields.status"),         // \u5355\u636e\u72b6\u6001 (PREPARE: \u8349\u7a3f; CONFIRMED: \u5df2\u786e\u8ba4; APPROVING: \u5ba1\u6279\u4e2d; APPROVED: \u5df2\u5ba1\u6279; FINISHED: \u5df2\u5b8c\u6210)\n        });\n\n    for (const DvRepairDO& sub : result) {\n        std::vector<string> v;\n        v.push_back(to_string(sub.getRepair_id()));\n        v.push_back(sub.getRepair_code());\n        v.push_back(sub.getRepair_name());\n        v.push_back(to_string(sub.getMachinery_id()));\n        v.push_back(sub.getMachinery_code());\n        v.push_back(sub.getMachinery_name());\n        v.push_back(sub.getRequire_date());\n        v.push_back(sub.getRequire_date());\n        v.push_back(sub.getFinish_date());\n        v.push_back(sub.getConfirm_date());\n        v.push_back(sub.getRepair_result());\n        v.push_back(sub.getAccepted_by());\n        v.push_back(sub.getConfirm_by());\n        v.push_back(sub.getStatus());\n        vvexcel.push_back(v);\n    }\n\n    const std::string tempfilePath = "public/execl/repairorder_table_" // \u4e0d\u80fd\u7528\u4e2d\u6587!\n        + SimpleDateTimeFormat::formatWithMilli("%Y-%m-%d_%H%M%S", "_")\n        + ".xlsx";\n    // \u751f\u6210excel\u6587\u4ef6\n    ExcelComponent excel;\n    excel.writeVectorToFile(tempfilePath, ZH_WORDS_GETTER("repairorder.summary.page_query_table"), vvexcel);\n    \n    ZO_CREATE_DFS_CLIENT_URL(dfs, urlPrefix);\n\n    // \u4e0a\u4f20\u6587\u4ef6\n    string downloadUrl = dfs.uploadFile(tempfilePath);\n\n    OATPP_LOGD("Multipart", "download url=\'%s\'", downloadUrl.c_str()); // \u65e5\u5fd7\n\n    // \u5220\u9664\u672c\u5730\u751f\u6210\u7684excel\u6587\u4ef6\n    std::remove(tempfilePath.c_str());\n\n    if (downloadUrl == "")\n        return "";\n\n    return urlPrefix + downloadUrl;\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"222-\u4e00\u79cd\u4f7f\u7528oatpp\u800c\u4e0d\u662fdfs\u7684\u5b9e\u73b0",children:"2.2.2 \u4e00\u79cd\u4f7f\u7528oatpp\u800c\u4e0d\u662fDFS\u7684\u5b9e\u73b0"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u76f8\u5173\u77e5\u8bc6: ",(0,i.jsx)(n.a,{href:"https://oatpp.io/api/latest/oatpp/web/protocol/http/outgoing/ResponseFactory/",children:"oatpp | ResponseFactory.hpp"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u9009\u81ea",(0,i.jsx)(n.code,{children:"mes-c3-quamanager"}),"(\u6587\u4ef6\u5904\u7406\u6700\u597d\u5199\u5728\u670d\u52a1\u5c42, \u800c\u975e\u63a7\u5236\u5c42):"]}),"\n"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"##container##"})})}),(0,i.jsx)(n.tbody,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.img,{alt:"Clip_2024-07-03_17-59-48.png ##w800##",src:r(31047).A+"",width:"2560",height:"1528"})})})})]}),"\n",(0,i.jsxs)(n.p,{children:["\u6ce8\u610f\u662f",(0,i.jsx)(n.code,{children:"form-data"}),"\u683c\u5f0f\u8bf7\u6c42, \u5177\u4f53\u4f7f\u7528\u793a\u4f8b\u5728",(0,i.jsx)(n.code,{children:".\\arch-demo\\controller\\file\\FileController.h"}),"\u6709"]}),"\n",(0,i.jsx)(n.p,{children:"\u4ee3\u7801: (\u770b\u8d77\u6765, \u662f\u6ca1\u6709\u4e0a\u4f20\u5230DFS, \u800c\u662f\u76f4\u63a5\u6587\u4ef6\u6d41\u4f20\u8f93)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-C++",children:'// \u5bfc\u51fa\u7f3a\u9677\nENDPOINT_INFO(exportDefect) {\n    API_DEF_ADD_COMMON_AUTH(ZH_WORDS_GETTER("defect.export.summary"), Void);\n}\nENDPOINT(\n    API_M_POST,\n    "/defect/export-defect",\n    exportDefect,\n    REQUEST(std::shared_ptr<IncomingRequest>, request),\n    API_HANDLER_AUTH_PARAME) {\n    return execExportDefect(request);\n}\n\n// 5 \u5bfc\u51fa\u7f3a\u9677\nstd::shared_ptr<oatpp::web::server::api::ApiController::OutgoingResponse> \nDefectController::execExportDefect(std::shared_ptr<oatpp::web::server::api::ApiController::IncomingRequest> request) {\n    // \u89e3\u6790\u8bf7\u6c42\n    API_MULTIPART_INIT(container, reader);\n    API_MULTIPART_CONFIG_MEMO_DEFAULT(reader, -1);\n    request->transferBody(&reader);\n    API_MULTIPART_PARSE_FORM_FIELD_STR(container, "page_num", page_num);\n    API_MULTIPART_PARSE_FORM_FIELD_STR(container, "page_size", page_size);\n    API_MULTIPART_PARSE_FORM_FIELD_STR(container, "defect_name", defect_name);\n    API_MULTIPART_PARSE_FORM_FIELD_STR(container, "index_type", index_type);\n    API_MULTIPART_PARSE_FORM_FIELD_STR(container, "defect_level", defect_level);\n\n    // \u5224\u65ad\u662f\u5426\u5408\u6cd5\n    if (!page_num) {\n        return createResponse(Status::CODE_400, "page_num must be exist");\n    }\n    if (!page_size) {\n        return createResponse(Status::CODE_400, "page_size must be exist");\n    }\n\n    auto query = QcDefectQuery::createShared();\n    query->pageIndex = std::stoi(page_num);\n    query->pageSize = std::stoi(page_size);\n    if (defect_name) {\n        query->defect_name = defect_name.getValue({});\n    }\n    if (index_type) {\n        query->index_type = index_type.getValue({});\n    }\n    if (defect_level) {\n        query->defect_level = defect_level.getValue({});\n    }\n\n    DefectService service;\n    auto res = service.listAll(query);\n\n    // \u6784\u9020\u6570\u636e\n    std::vector<std::vector<std::string>> data;\n    data.push_back({ ZH_WORDS_GETTER("defect.field.defect_code"),\n                    ZH_WORDS_GETTER("defect.field.defect_name"),\n                    ZH_WORDS_GETTER("defect.field.index_type"),\n                    ZH_WORDS_GETTER("defect.field.defect_level") });\n    for (const auto& row : *res->rows) {\n        data.push_back({\n            row->defect_code.getValue("Null"), //\n            row->defect_name.getValue("Null"), //\n            row->index_type.getValue("Null"),  //\n            row->defect_level.getValue("Null") //\n        });\n    }\n\n    // \u6784\u9020\u6587\u4ef6\u5e76\u8fd4\u56de\n    const string timestamp { std::to_string(time(NULL)) };\n    const string filename { "defect_" + timestamp + ".xlsx" };\n    const string filepath { "public/static/qc_defect.xlsx" };\n    ExcelComponent excel;\n    excel.writeVectorToFile(filepath, "Sheet1", data);\n    const auto file_string = String::loadFromFile(filepath.c_str());\n\n    // \u8fd4\u56de\n    auto response = createResponse(Status::CODE_200, file_string);\n    response->putHeader(Header::CONTENT_TYPE, "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");\n    response->putHeader("Content-Disposition", "attachment; filename=" + filename); // \u6307\u5b9a\u4e86\u6587\u4ef6\u540d\u79f0\n    return response;\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"23-\u7591\u95ee-\u6279\u91cf\u5220\u9664\u6570\u636e\u5728\u9879\u76ee\u4e2d\u6709\u591a\u79cd\u5b9e\u73b0",children:"2.3 [\u7591\u95ee]: \u6279\u91cf\u5220\u9664\u6570\u636e\u5728\u9879\u76ee\u4e2d\u6709\u591a\u79cd\u5b9e\u73b0"}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["\u5bf9\u4e8e\u6279\u91cf\u5220\u9664",(0,i.jsx)(n.code,{children:"MySql\u4e2d"}),"\u7684\u6570\u636e, \u9879\u76ee\u4e2d\u6709\u591a\u79cd\u5b9e\u73b0: ",(0,i.jsxs)(n.del,{children:["(\u6709\u5355\u4e2a\u5220\u9664, \u4f46\u53ea\u80fd\u5220\u9664",(0,i.jsx)(n.code,{children:"\u8349\u7a3f"}),"\u7b49, \u4e0d\u662f\u6279\u91cf)"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528\u4e8b\u52a1, \u5982\u679c\u4e00\u4e2a\u5220\u9664\u5931\u8d25\u5219\u56de\u6eaf"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u4e0d\u4f7f\u7528\u4e8b\u52a1, \u56e0\u4e3a\u6570\u636e\u4f20\u8f93\u662f\u9690\u85cf\u5b57\u6bb5(\u975e\u524d\u7aef\u76f4\u63a5\u5c55\u793a\u7ed9\u7528\u6237\u8f93\u5165), \u6545\u5ffd\u7565\u5408\u6cd5\u6027\u5224\u65ad, \u5931\u8d25\u5219\u4e0d\u7406\u4f1a, \u8fd4\u56de\u5220\u9664\u6210\u529f\u7684\u64cd\u4f5c\u6570\u91cf"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u4e0d\u4f7f\u7528\u4e8b\u52a1, \u5148for\u5224\u65adid\u7684\u5408\u6cd5\u6027, \u5220\u9664List\u4e2d\u4e0d\u5408\u6cd5\u7684, \u7136\u540e\u4f7f\u7528\u5b57\u7b26\u4e32\u6d41\u62fc\u63a5, \u6279\u91cf\u5220\u9664, \u8fd4\u56de\u5f71\u54cd\u7684\u884c\u6570. (",(0,i.jsx)(n.code,{children:'"DELETE FROM table WHERE id in (?, ?, ... ,?)"'}),")"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u4e0d\u4f7f\u7528\u4e8b\u52a1, \u4e00\u6574\u4e2afor\u5faa\u73af: \u5148\u5224\u65adid\u5408\u6cd5\u6027, \u518d\u5220\u9664\u8fd9\u4e00\u4e2aid, \u7136\u540e\u8ba1\u6570\u4e00\u4e2a. \u6700\u7ec8\u8fd4\u56de\u4e00\u4e2a",(0,i.jsx)(n.code,{children:"ListJsonVO"}),"\u7ed9\u524d\u7aef, \u6bcf\u4e00\u4e2a\u5143\u7d20\u662f\u5bf9\u5e94id\u7684\u6267\u884c\u7ed3\u679c(\u6210\u529f/\u5931\u8d25)"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5728\u8bf7\u6c42\u4e0a, \u9879\u76ee\u4e2d\u591a\u91c7\u7528\u7684\u662f\u4ece",(0,i.jsx)(n.code,{children:"\u8bf7\u6c42\u4f53"}),"\u4e2d\u8bfb\u53d6\u8bf7\u6c42\u5217\u8868, \u800c\u4e0d\u662f\u5728URL\u4e2d, \u56e0\u4e3a\u793a\u4f8b\u9879\u76ee\u4e2d\u4e5f\u53ea\u662f",(0,i.jsx)(n.code,{children:"/remove/{id}"}),"\u8fd9\u6837, \u53ea\u652f\u6301\u5355\u4e2a, \u591a\u4e2a\u5c31\u4e0d\u77e5\u9053\u600e\u4e48\u529e\u4e86"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u4f46\u662f\u5b9e\u9645\u4e0a, ",(0,i.jsx)(n.code,{children:"\u793a\u4f8b\u9879\u76ee"}),"\u4e2d\u662f\u652f\u6301URL: ",(0,i.jsx)(n.code,{children:"/remove/1,2,3"}),"\u8fd9\u6837\u591a\u4e2aid\u5220\u9664, \u4f46\u662f\u5b83\u662fjava\u5199\u7684, \u7f51\u7edc\u4e0a\u7c97\u7565\u641c\u7d22\u4e5f\u53ea\u6709java\u7684\u56de\u7b54qwq... (\u6545\u5bfc\u81f4\u5927\u5bb6\u666e\u904d\u91c7\u7528\u5728",(0,i.jsx)(n.code,{children:"\u8bf7\u6c42\u4f53"}),"\u4e2d\u4f20\u9012json\u5217\u8868)"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u4f46\u662f! \u6211\u53d1\u73b0",(0,i.jsx)(n.code,{children:"mes-c3-quamanager"}),"\u7684\u5927\u4f6c\u6709\u975e\u5e38\u597d\u7684\u5b9e\u73b0:"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"##container##"})})}),(0,i.jsx)(n.tbody,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.img,{alt:"Clip_2024-07-03_17-15-03.png ##w800##",src:r(74608).A+"",width:"2327",height:"948"})})})})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5b9e\u9645\u4e0a\u5c31\u662f\u628a\u539f\u672c\u89e3\u6790\u4e3a\u5355\u4e2a",(0,i.jsx)(n.code,{children:"UInt64"}),"\u6539\u4e3a\u89e3\u6790",(0,i.jsx)(n.code,{children:"String"}),", \u901a\u8fc7\u5206\u5272\u5b57\u7b26\u4e32\u7684",(0,i.jsx)(n.code,{children:","}),"\u6765\u683c\u5f0f\u5316\u6210\u6570\u5b57, \u672c\u8d28\u4e0a\u8fd8\u662f\u4f20\u9012\u4e86\u4e00\u4e2a",(0,i.jsx)(n.code,{children:"{id}"}),", \u53ea\u4e0d\u8fc7\u5185\u5bb9\u662f\u5b57\u7b26\u4e32",(0,i.jsx)(n.code,{children:'"1,2,3"'}),"\u8fd9\u6837."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-C++",children:'// 4 \u5220\u9664\u7f3a\u9677\nAPI_DEF_ENDPOINT_INFO_AUTH(ZH_WORDS_GETTER("defect.remove.summary"), removeDefect, Uint64JsonVO::Wrapper);\nAPI_HANDLER_ENDPOINT_AUTH(             //\n    API_M_DEL,                         //\n    "/defect/remove-defect/{id-list}", // \u770b\u770b\u8fd9\u662f\u4ec0\u4e48?!\n    removeDefect,                      //\n    PATH(String, ids, "id-list"),      // WDF? \u662fstring!\n    execRemoveDefect(ids)              //\n);\n\n// \u5bf9\u5e94\u65b9\u6cd5, HX\u6ce8: \u5982\u679c\u5b9e\u9645\u5199\u7684\u8bdd, \u6700\u597d\u518d\u5199\u4e00\u4e2a\u5de5\u5177\u7c7b, \u6765 string to list<uint_64>\nUint64JsonVO::Wrapper DefectController::execRemoveDefect(const String& ids) {\n    // 1%2C10%2C32%2C4 -> 1,10,32,4\n    auto jvo = Uint64JsonVO::createShared();\n    std::string s = std::regex_replace(ids.getValue("").c_str(), regex("%2C"), ",");\n    // \u65b9\u4fbf\u89e6\u53d1\u5224\u65ad\n    s.push_back(\',\');\n    int id = 0;\n    for (int i = 0, n = s.size(); i < n; i++) {\n        if (std::isdigit(s[i])) {\n            id = id * 10 + s[i] - \'0\';\n        }\n        else if (s[i] == \',\') {\n            if (id <= 0) {\n                jvo->init(UInt64(-1), RS_PARAMS_INVALID);\n                return jvo;\n            }\n            id = 0;\n        }\n        // \u975e\u6570\u5b57\n        else {\n            jvo->init(UInt64(-1), RS_PARAMS_INVALID);\n            return jvo;\n        }\n    }\n    s.pop_back();\n\n    DefectService service;\n    if (service.remove(s)) {\n        jvo->success(UInt64(200));\n    }\n    else {\n        jvo->fail(UInt64(500));\n    }\n    return jvo;\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"24-\u95ee\u9898-cv\u5927\u5e08\u6cdb\u6ee5",children:"2.4 [\u95ee\u9898]: CV\u5927\u5e08\u6cdb\u6ee5"}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["\u7eaf\u7eaf\u590d\u5236\u793a\u4f8b\u4ee3\u7801:\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u4f60\u8981\u505aCV\u5927\u5e08, \u6ca1\u95ee\u9898, \u4f46\u662f\u8bf7\u8865\u4e0a\u6ce8\u91ca! \u4ec0\u4e48",(0,i.jsx)(n.code,{children:"\u63a7\u5236\u5668"}),"/",(0,i.jsx)(n.code,{children:"DAO"}),"/",(0,i.jsx)(n.code,{children:"VO"}),"/",(0,i.jsx)(n.code,{children:"DO"}),"/",(0,i.jsx)(n.code,{children:"DTO"}),"\u6570\u90fd\u6570\u4e0d\u6e05, \u628a\u9f20\u6807\u79fb\u4e0a\u53bb, \u60f3\u770b\u770b\u662f\u4ec0\u4e48\u4e1c\u897f, \u7136\u540e\u5b83\u5199\u7740",(0,i.jsx)(n.code,{children:"\u793a\u4f8bdamo"}),"\u4ee3\u7801\u7684\u6ce8\u91ca, \u6211\u600e\u4e48\u77e5\u9053\u8fd9\u4e2a\u662f\u5e72\u4ec0\u4e48\u7684?! \u5904\u7406\u597d\u6ce8\u91ca\u5173\u7cfb, \u4e0d\u8981\u8ba9\u4e0d\u91cd\u8981\u7684\u6ce8\u91ca\u5360\u9886\u4e86\u663e\u793a\u7684\u4f4d\u7f6e! \u5982:\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.img,{alt:"Clip_2024-07-02_16-59-04.png ##w400##",src:r(84525).A+"",width:"953",height:"274"})," \u4e00\u76ee\u77ad\u7136"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.img,{alt:"Clip_2024-07-02_16-59-32.png ##w400##",src:r(78534).A+"",width:"879",height:"320"})," \u306a\u3093\u3060\u3088\uff1f"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.img,{alt:"Clip_2024-07-02_17-00-24.png ##w600##",src:r(43820).A+"",width:"1519",height:"288"})}),"\n",(0,i.jsx)(n.li,{children:"\u65e0\u9488\u5bf9\u4efb\u4f55\u4eba, \u53ea\u662f\u8bf4\u660e\u95ee\u9898. \u4e00\u8d77\u52aa\u529b\u5427qwq.."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"25-\u6ce8\u610f-\u8fd4\u56de\u7684\u662fclassjsonvo-\u5e94\u8be5\u521d\u59cb\u5316\u4e3a\u7a7a",children:["2.5 [\u6ce8\u610f]: \u8fd4\u56de\u7684\u662f",(0,i.jsx)(n.code,{children:"ClassJsonVO"}),", \u5e94\u8be5\u521d\u59cb\u5316\u4e3a\u7a7a"]}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:["\u5bf9\u4e8e\u8fd4\u56de\u7684\u662f",(0,i.jsx)(n.code,{children:"ClassJsonVO"}),", \u5e94\u8be5\u521d\u59cb\u5316\u4e3a\u7a7a"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u4f8b\u5982\u4ee5\u4e0b\u4ee3\u7801, \u5e94\u8be5\u5982\u4e0b\u6240\u793a, \u8fd4\u56de\u65e0\u6548\u4e14\u4e3a\u7a7a\u7684\u503c, \u5426\u5219\u4f1a\u8fd4\u56de",(0,i.jsx)(n.code,{children:"RepairorderDetailsDTO"}),"\u4e2d\u7684\u9ed8\u8ba4\u503c(\u5c31\u662f\u5c55\u793a\u5728",(0,i.jsx)(n.code,{children:"swagger-ui"}),"\u4e0a\u7684\u9ed8\u8ba4\u503c)."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-C++",children:'// \u7ef4\u4fee\u5355\u8be6\u60c5\u67e5\u8be2\nRepairorderDetailsJsonVO::Wrapper RepairorderController::execQueryDetailsRepairorder(const RepairorderDetailsQuery::Wrapper& id) {\n    // \u5b9a\u4e49\u8fd4\u56de\u6570\u636e\u5bf9\u8c61\n    auto jvo = RepairorderDetailsJsonVO::createShared();\n    // \u53c2\u6570\u6821\u9a8c\n    if (id->repairId <= 0) {\n        auto tmp = RepairorderDetailsDTO::createShared();\n        tmp->repairId = -1;\n        tmp->repairCode = "";\n        tmp->repairName = "";\n        tmp->machineryCode = "";\n        tmp->machineryName = "";\n        tmp->machineryBrand = "";\n        tmp->requireDate = "";\n        tmp->remark = "";\n        jvo->init(tmp, RS_PARAMS_INVALID); // \u4e0a\u4f20\u53c2\u6570\u5f02\u5e38\n        return jvo;\n    }\n    // \u5b9a\u4e49\u4e00\u4e2aService\n    RepairorderService service;\n    // \u6267\u884c\u6570\u636e\u67e5\u8be2\n    auto dto = service.getData(id);\n    if (dto->repairId == -1)\n        jvo->fail(dto); // \u6784\u5efa\u5931\u8d25\u6d88\u606f RS_FAIL\n    else\n        jvo->success(dto);\n    // \u54cd\u5e94\u7ed3\u679c\n    return jvo;\n}\n\n// Service\u5c42 \u540c\u7406\nRepairorderDetailsDTO::Wrapper RepairorderService::getData(const RepairorderDetailsQuery::Wrapper& id) {\n    // \u6784\u5efa\u8fd4\u56de\u5bf9\u8c61\n    auto pages = RepairorderDetailsDTO::createShared();\n\n    // \u67e5\u8be2\u6570\u636e\u603b\u6761\u6570\n    RepairorderDAO dao;\n    uint64_t count = dao.count(id);\n    if (count <= 0) {\n        pages->repairId = -1;\n        pages->repairCode = "";\n        pages->repairName = "";\n        pages->machineryCode = "";\n        pages->machineryName = "";\n        pages->machineryBrand = "";\n        pages->requireDate = "";\n        pages->remark = "";\n        return pages;\n    }\n\n    list<DvRepairDO> result = dao.selectById(id->repairId);\n\n    for (const DvRepairDO& sub : result) {\n        ZO_STAR_DOMAIN_DO_TO_DTO(pages, sub,\n            repairId, Repair_id,\n            repairCode, Repair_code,\n            repairName, Repair_name,\n            machineryCode, Machinery_code,\n            machineryName, Machinery_name,\n            machineryBrand, Machinery_brand,\n            requireDate, Require_date,\n            remark, Remark)\n    }\n\n    return pages;\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u6709\u4e9b\u662fJava\u90a3\u8fb9\u8d1f\u8d23\u7684, \u800c\u4e0d\u662fjava\u548ccpp\u5199\u540c\u4e00\u4e2a\u529f\u80fd\u7684\u4e0d\u540c\u4ee3\u7801\u5b9e\u73b0!"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-C++",children:"mes-cpp\n\u251c\u2500mes-c1-equipmentmanagement // \u8bbe\u5907\u7ba1\u7406 | (\u83b7\u53d6\u8bbe\u5907\u7c7b\u578b\u540d\u79f0\u6811 <\u4f7f\u7528\u4e86[\u7ec4\u5408\u6a21\u5f0f]\u7684\u6811\u5f62\u5185\u5bb9\u7684\u8bfb\u53d6>) | (GetDeviceTypeDetailDAO::selectByCondition \u4e2d\u4ee3\u7801\u5197\u4f59\u4e86\u5427, set<uint64_t> allid \u548c \u627e\u51fa\u6839\u8282\u70b9\u5e76\u6807\u8bb0\u306efor\u53ef\u4ee5\u4e0d\u5199\u7684, \u56e0\u4e3a\u6570\u636e\u5e93\u4e2d\u7684\u6839\u7ed3\u70b9\u7684\u7236\u7ed3\u70b9ID\u5c31\u662f0\u4e86, \u5373\u4f7fDO\u9ed8\u8ba4\u4e3a0\u5176\u67e5\u8be2\u6570\u636e\u5e93\u540e\u4e00\u5b9a\u4f1a\u88ab\u503c\u8986\u76d6\u7684)\n\u251c\u2500mes-c1-workfixture // \u5de5\u88c5\u5939\u5177 (\u4f20\u5165\u7684id\u5217\u8868\u5230\u6570\u636e\u5e93\u67e5\u627e\u5230\u76f8\u5e94\u6570\u636e\u96c6\u5e76\u5bfc\u51fa\u4e3aExcel\u6587\u4ef6 (\u6709\u6539\u8bf7\u6c42\u5934\u6587\u4ef6\u540d, \u4f46\u662f\u5199\u5728\u63a7\u5236\u5c42))\n\u251c\u2500mes-c1-workstation // \u5de5\u4f5c\u7ad9\n\u251c\u2500mes-c2-equipmentledger // \u8bbe\u5907\u7ba1\u7406-\u8bbe\u5907\u53f0\u8d26\u6a21\u5757 (\u4e0b\u8f7d\u5bfc\u5165\u6a21\u677f: Excel + FastDFS || \u6279\u91cf\u5220\u9664\u4f7f\u7528\u4e86mysql\u4e8b\u52a1, \u4e00\u4e2a\u5931\u8d25\u5168\u90e8\u56de\u6eda)\n\u251c\u2500mes-c2-inspection.maintenanceitems // \u8bbe\u5907\u7ba1\u7406-\u8bbe\u5907\u53f0\u8d26\u6a21\u5757 (\u6709: \u53ca\u65f6\u5220\u9664\u672c\u5730\u751f\u6210\u7684excel\u6587\u4ef6, (\u4f46\u662f\u6587\u4ef6\u540d\u79f0\u4f9d\u65e7\u8fd8\u662f\u5171\u7528, \u6709\u8986\u76d6\u98ce\u9669))\n\u251c\u2500mes-c2-inspection.maintenanceplan // \u8bbe\u5907\u7ba1\u7406-\u70b9\u68c0/\u4fdd\u517b\u8ba1\u5212\u6a21\u5757 (\u6709\u4f7f\u7528\u65f6\u95f4\u4f5c\u4e3aexcel\u6587\u4ef6\u540d, \u4f46\u662f\u4e0a\u4f20\u540e\u6ca1\u6709\u5220\u9664\u672c\u5730\u7684 | AddDeviceController\u7684AddDeviceDAO::insert\u6709\u8054\u8868\u67e5\u8be2\u903b\u8f91 | win\u65e0\u6cd5\u7f16\u8bd1, \u53ea\u80fdLinux)\n\u251c\u2500mes-c2-repairorder // \u8bbe\u5907\u7ba1\u7406-\u7ef4\u4fee\u5355\u6a21\u5757/\u7ef4\u4fee\u5185\u5bb9 (\u5220\u9664\u4f7f\u7528\u4e8b\u52a1 || RepaircontentDAO\u6709\u8054\u8868\u67e5\u8be2(\u4ee3\u7801\u5b9e\u73b0))\n\u251c\u2500mes-c3-promanager // \u751f\u4ea7\u7ba1\u7406-\u5de5\u827a\u6d41\u7a0b | \u5de5\u827a\u6d41\u7a0b (\u95ee\u9898: [\u5de5\u827a\u5bfc\u51fa]\u7684\u5bfc\u51fa\u8868\u683c\u5199\u5230\u63a7\u5236\u5c42\u4e86, \u5e94\u8be5\u653e\u5728\u670d\u52a1\u5c42 (\u6709FastDFS\u7591\u95ee) | win\u65e0\u6cd5\u7f16\u8bd1) <-- \u8fd9\u4e2a\u63a5\u53e3\u597d\u591a! 24\u4e2a! CRUD\n\u251c\u2500mes-c3-quamanager // \u8d28\u91cf\u7ba1\u7406-\u5e38\u89c1\u7f3a\u9677 (\u95ee\u9898: [\u5bfc\u51fa\u7f3a\u9677]\u7684\u5bfc\u51fa\u8868\u683c\u5199\u5230\u63a7\u5236\u5c42\u4e86, \u5e94\u8be5\u653e\u5728\u670d\u52a1\u5c42 (\u6709FastDFS\u7591\u95ee(\u53ea\u662f\u6ca1\u6709\u5220\u9664\u672c\u5730\u6587\u4ef6), \u4f46\u662f\u89e3\u51b3\u4e86\u6587\u4ef6\u547d\u540d\u4e71\u7801\u95ee\u9898 & \u4ee5\u65f6\u95f4\u547d\u540d\u540d\u79f0)) | [\u5bfc\u51fa\u7f3a\u9677]\u6709\u89e3\u6790\u8bf7\u6c42\u5904\u7406 & \u4f7f\u7528\u4e86{}\u521d\u59cb\u5316\n\u251c\u2500mes-c4-prodmgmt // \u751f\u4ea7\u7ba1\u7406-\u751f\u4ea7\u5de5\u5355/\u751f\u4ea7\u6392\u4ea7/\u751f\u4ea7\u62a5\u5de5 (\u6709\u8054\u8868\u67e5\u8be2\u7684sql\u8bed\u53e5) (\u83b7\u53d6\u4ea7\u54c1/\u7269\u6599\u5bf9\u5e94\u7684\u5de5\u827a\u6d41\u7a0b: ProductionProcessDAO::query_by_workordercode, \u901a\u8fc7 if (query->itemCode) \u6765\u51b3\u5b9a\u662f\u5426join, \u8fd8\u662f\u633a\u590d\u6742\u7684, \u83b7\u53d6\u67d0\u7269\u54c1\u7684\u5236\u4f5c\u5de5\u827a\u6d41\u7a0b (mysql\u8868\u4e5f\u662f, \u901a\u8fc7\u4e24\u4e2a\u8868, \u7136\u540e\u901a\u8fc7\u5de5\u827a\u8def\u7ebfid\u548c\u5de5\u5e8fid, \u4e0b\u4e00\u5de5\u5e8fid, \u786e\u5b9a\u4e0d\u540c\u7684\u5de5\u827a\u7684\u5de5\u5e8f\u4ee5\u53ca\u987a\u5e8f!)) | (\u7f16\u7801\u95ee\u9898, win\u65e0\u6cd5\u7f16\u8bd1(Fxxk VS2022)) | (\u6709\u7518\u7279\u56fe\u6570\u636e) | ProdOrderController \u5b9e\u73b0\u4e3a\u7a7a!\n\u251c\u2500mes-c4-whmgmt // \u4ed3\u50a8\u7ba1\u7406-\u91c7\u8d2d\u5165\u5e93 (win\u7f16\u8bd1\u62a5\u9519) (CRUD | [\u5bfc\u51fa\u5355\u636e]\u6709\u5904\u7406\u6587\u4ef6\u540d\u4e71\u7801)\n\u251c\u2500mes-c5-QualityControl // \u8d28\u91cf\u7ba1\u7406-\u8fc7\u7a0b\u68c0\u9a8c/\u68c0\u6d4b\u6a21\u677f (win\u7f16\u8bd1\u62a5\u9519) | \u4f7f\u7528\u4e8b\u52a1\u53ef\u80fd\u5b58\u5728BUG: \u6709\u4e00\u6761if\u5206\u652f\u6ca1\u6709\u7ec8\u6b62\u4e8b\u52a1\u5c31return\u4e86 | \u5bfc\u51fa\u8868\u683c\u5199\u5230\u63a7\u5236\u5c42\u4e86, \u5e94\u8be5\u653e\u5728\u670d\u52a1\u5c42 (\u6709FastDFS\u7591\u95ee), \u4f46\u662f\u4f1a\u5220\u9664\u672c\u5730\u6587\u4ef6\n\u251c\u2500mes-c5-WarehouseManagement // \u4ed3\u50a8\u7ba1\u7406-\u5e93\u5b58\u73b0\u6709\u91cf (win\u7f16\u8bd1\u62a5\u9519) | (\u6709FastDFS\u7591\u95ee), \u4f46\u662f\u4f1a\u5220\u9664\u672c\u5730\u6587\u4ef6\n\u251c\u2500mes-c6-quality // \u8d28\u91cf\u7ba1\u7406-\u6765\u6599\u68c0\u9a8c | (InspectController::execLookTable \u7a7a\u5b9e\u73b0) | (CRLD\u6ca1\u4ec0\u4e48\u597d\u8bf4\u7684)\n\u251c\u2500mes-c6-storage-product // \u4ed3\u50a8\u7ba1\u7406-\u91c7\u8d2d\u5165\u5e93 | (PickController::executeExecuteGet, PickController::executeRemoveReturn, PickController::executeDownloadFile \u7a7a\u5b9e\u73b0)\n\u251c\u2500mes-c6-storage-return // \u4ed3\u50a8\u7ba1\u7406-\u91c7\u8d2d\u9000\u8d27 (win \u7f16\u8bd1\u4e0d\u8fc7) | \u5bfc\u51fa\u8868\u683c\u5199\u5230\u63a7\u5236\u5c42\u4e86, \u5e94\u8be5\u653e\u5728\u670d\u52a1\u5c42 (\u6709FastDFS\u7591\u95ee), \u4f46\u662f\u4f1a\u5220\u9664\u672c\u5730\u6587\u4ef6 | DAO\u5c42\u95ee\u9898: `\u5f53\u524d\u65e5\u671f/\u65f6\u95f4`\u6709\u5df2\u7ecf\u5c01\u88c5\u7684\u5b57\u7b26\u4e32\u65f6\u95f4\u5de5\u5177\u7c7b, \u4e0d\u7528\u81ea\u5df1\u5199\u4e86!\n\u251c\u2500mes-c7-rejection // \u4ed3\u50a8\u7ba1\u7406-\u751f\u4ea7\u9000\u6599 (MaterialInformationController::execRemoveMaterialInformation, RawMaterialOpController::execRemoveRawMaterialOp \u5e76\u4e0d\u652f\u6301\u6279\u91cf\u5220\u9664) | (RawMaterialOpController::execQueryRawMaterialOp \u4e0d\u662f\u8981\u5bfc\u51fa\u6210\u6587\u4ef6\u5417)\n\u251c\u2500mes-c7-settings // \u4ed3\u50a8\u7ba1\u7406-\u4ed3\u5e93\u8bbe\u7f6e | \u4f7f\u7528\u4e86[\u7ec4\u5408\u6a21\u5f0f]\u7684\u6811\u5f62\u5185\u5bb9\u7684\u8bfb\u53d6 (\u6279\u91cf\u5220\u9664\u6709\u95ee\u9898, URL\u4e0d\u5e94\u8be5\u4f7f\u7528`/{id}`, \u867d\u7136\u662f\u8d70`BODY_DTO`\u662f\u6b63\u786e\u7684, \u4f46\u662fURL\u8fd9\u6837\u5c31\u4e0d\u592a\u5bf9\u4e86 | \u53e6\u5916[\u5220\u9664\u4ed3\u5e93]\u5e76\u4e0d\u652f\u6301\u6279\u91cf\u5220\u9664)\n\u251c\u2500mes-c7-storage // \u4ed3\u50a8\u7ba1\u7406-\u4ea7\u54c1\u5165\u5e93 MySql\u6839\u636e\u67d0\u4e9b\u5b57\u6bb5\u4f7f\u7528\u6a21\u7cca\u67e5\u8be2\u67e5\u8be2(LIKE CONCAT('%',?,'%')) | (storageController::execRemovestorage \u4e0d\u652f\u6301\u6279\u91cf\u5220\u9664, \u7c7b\u547d\u540d\u4e5f\u4e0d\u89c4\u8303) | (storageController::execQuerystorage \u4e0d\u5e94\u8be5\u662f\u5bfc\u51fa\u8868\u683c\u5417)\n"})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},43820:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/Clip_2024-07-02_17-00-24-29edd22d3648732e0e02b1eacb281978.png"},74608:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/Clip_2024-07-03_17-15-03-e2f07b381242633c8190e0e44b6103c9.png"},78534:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/Clip_2024-07-02_16-59-32-bc4990e59b365250f332a17628174d8b.png"},84525:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/Clip_2024-07-02_16-59-04-c870c7e1b53ce4ae6c7f3f370dbd9226.png"}}]);