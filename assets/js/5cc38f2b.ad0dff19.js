"use strict";(self.webpackChunkhx_loli=self.webpackChunkhx_loli||[]).push([[90643],{28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var a=t(96540);const o={},i=a.createContext(o);function s(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),a.createElement(i.Provider,{value:n},e.children)}},46425:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>d,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"Game/MineCraft/\u670d\u52a1\u5668/\u811a\u672c/index","title":"say","description":"","source":"@site/docs/014-Game/001-MineCraft/001-\u670d\u52a1\u5668/001-\u811a\u672c/index.md","sourceDirName":"014-Game/001-MineCraft/001-\u670d\u52a1\u5668/001-\u811a\u672c","slug":"/Game/MineCraft/\u670d\u52a1\u5668/\u811a\u672c/","permalink":"/HXLoLi/docs/Game/MineCraft/\u670d\u52a1\u5668/\u811a\u672c/","draft":false,"unlisted":false,"editUrl":"https://github.com/HengXin666/HXLoLi/edit/main/docs/014-Game/001-MineCraft/001-\u670d\u52a1\u5668/001-\u811a\u672c/index.md","tags":[],"version":"current","lastUpdatedBy":"Heng_Xin_666","lastUpdatedAt":1745851959000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Navigation\u5bfc\u822a\u7cfb\u7edf","permalink":"/HXLoLi/docs/\u5d4c\u5165\u5f0f/ROS/Navigation\u5bfc\u822a\u7cfb\u7edf/"},"next":{"title":"\u914d\u7f6e\u6587\u4ef6","permalink":"/HXLoLi/docs/Game/MineCraft/\u670d\u52a1\u5668/\u914d\u7f6e\u6587\u4ef6/"}}');var o=t(74848),i=t(28453);const s={},l="say",r={},c=[];function f(e){const n={code:"code",h1:"h1",header:"header",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"say",children:"say"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'tellraw @a [{"text":"2","color":"#5d2156"},{"text":"2","color":"#6e2867"},{"text":"2","color":"#772f6f"},{"text":"2","color":"#85387d"},{"text":"2","color":"#914389"},{"text":"2","color":"#9f4e96"},{"text":"2","color":"#ad5aa4"}]\n\n{"text": "", "color": ""}\n\ntellraw @a [{"text": "[\u30ed\u30ea\u3063\u5b50]: ", "color": "gold"}, {"text": "\u50cd\u304d\u307e\u3057\u3087\u3046~", "color": "green"}]\n\ntellraw @a [{"text": "[\u30ed\u30ea\u3063\u5b50]: ", "color": "gold"}, {"text": "\u8fd8\u6709", "color": "green"}, {"text": "10 \u5206\u949f", "color": "yellow"}, {"text": "\u5c31\u6e05\u7406\u6389\u843d\u7269\u5566~", "color": "green"}]\n'})}),"\n",(0,o.jsx)(n.h1,{id:"\u5b9a\u65f6\u6e05\u7406\u6389\u843d\u7269",children:"\u5b9a\u65f6\u6e05\u7406\u6389\u843d\u7269"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:'#!/bin/bash\n\nfifo_file="mc.fifo"\n\necho "say \xa7a \u5df2\u7ecf\u542f\u52a8\u626b\u5730\u5c0f\u841d\u8389~" > $fifo_file\n\nsavestate=0\ntag=0\n\nwhile true; do\n    echo "list" > mc.fifo\n    latest=$(tail -1 log.log)\n    if [[ ${latest:33:11} == "There are 0" ]]; then\n        savestate=0\n        tag=0\n        echo "say \xa7d\u304a\u3084\u3059\u307f\u30cb\u30e3\u30fc\u3055\u3044~" > $fifo_file\n    else\n        if [ $tag -eq 0 ]; then\n        echo "say \xa7d\u3044\u3089\u3063\u30cb\u30e3\u30fc\u3044\u307e\u305b~ \u6383\u9664\u30ed\u30ea\u3063\u5b50\u3084\u308b\u6c17\u6e80\u3005~" > $fifo_file\n            tag=1\n        fi\n        savestate=1\n    fi\n\n    # \u6709\u4eba, \u624d\u4f1a\u6e05\u7406\u5783\u573e\n    if [ $savestate -eq 1 ]; then\n        echo "say \xa7e\u8fd8\u6709 \xa7b10 \u5206\u949f \xa7e\u5c31\u6e05\u7406\u6389\u843d\u7269\u5566~" > $fifo_file\n        sleep 10m # \u6bcf10\u5206\u949f\u8fdb\u884c\u4e00\u6b21\u6e05\u7406\n\n        sleep 60 # 1 min\n        echo "say \xa7e\u8fd8\u6709 \xa7b1 \u5206\u949f \xa7e\u5c31\u6e05\u7406\u6389\u843d\u7269\u5566~" > $fifo_file # \u53d1\u9001\u901a\u77e5, \xa7a \u8868\u793a\u7eff\u8272\n\n        for ((i=10; i>0; i--)); do\n            echo "say \xa7a\u8fd8\u6709 \xa7e$i \xa7a\u5c31\u6e05\u7406\u6389\u843d\u7269\u5566~" > $fifo_file # \u53d1\u9001\u901a\u77e5, \xa7a \u8868\u793a\u7eff\u8272\n            sleep 1 # 1 s\n        done\n\n        # \u6267\u884c\u6e05\u7406\u6389\u843d\u7269\u547d\u4ee4\n        echo "say \xa7c\u6b63\u5728\u6e05\u7406\u6389\u843d\u7269..." > $fifo_file # \u53d1\u9001\u6e05\u7406\u5f00\u59cb\u7684\u901a\u77e5\uff0c\xa7c \u8868\u793a\u7ea2\u8272\n        echo "kill @e[type=item]" > $fifo_file # \u6e05\u7406\u6389\u843d\u7269\n        echo "say \xa7a\u6e05\u7406\u6389\u843d\u7269\u7ed3\u675f!" > $fifo_file # \u6e05\u7406\u5b8c\u6210\u7684\u901a\u77e5\uff0c\xa7a \u8868\u793a\u7eff\u8272\n    else\n        sleep 10m # \u95f4\u969410 min\u68c0\u67e5\u662f\u5426\u6709\u4eba\n    fi\ndone\n'})}),"\n",(0,o.jsx)(n.h1,{id:"\u5b9a\u65f6\u5907\u4efd",children:"\u5b9a\u65f6\u5907\u4efd"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:'mkdir backup\nbackup_num=6 # \u4fdd\u75596\u4e2a\u5907\u4efd\nsavestate=0\nwhile true; do\n    sleep 5m # \u6bcf\u4e94\u5206\u949f\u68c0\u67e5\u4e00\u6b21\u662f\u5426\u6709\u4eba\n    echo "list" > mc.fifo\n    latest=$(tail -1 log.log)\n    if [[ ${latest:33:11} == "There are 0" ]]; then\n        haspeople=0\n    else\n        haspeople=1\n        savestate=1\n        echo "say \xa7a\u3054\u6a5f\u5acc\u3088, \u68c0\u6d4b\u5230\u73a9\u5bb6, \u542f\u52a8\u5907\u4efd\u6a21\u5f0f~" > mc.fifo\n    fi\n    if [ $savestate -eq 1 ]; then\n        {\n            echo "say \xa7e\u5f00\u59cb\u5907\u4efd {"\n            echo save-off\n            echo save-all\n            tar -cf backup/$(date +%Y%m%d_%H%M%S).tar.gz world\n            echo save-on\n            echo "say \xa7e} \xa7a// \u5907\u4efd\u7ed3\u675f"\n        } > mc.fifo # \u4e00\u6b21\u5907\u4efd\n        cd backup\n        dir_num=$(ls -l | wc -l)\n        if [ $dir_num -gt $backup_num ]; then # \u5220\u9664\u8fc7\u65e7\u7684\u5907\u4efd\n            num=$(expr $dir_num - $backup_num)\n            ls -tr | head -$num | xargs -i -n1 rm {}\n        fi\n        cd ..\n        if [ $haspeople -eq 0 ]; then # \u82e5\u6ca1\u4eba\u5219\u505c\u6b62\u5907\u4efd\n            savestate=0\n            echo "say \xa7e\u3054\u82e6\u52b4\u69d8\u3067\u3057\u305f, \u6ca1\u4eba\u6211\u4e0b\u73ed\u5566~ \u505c\u6b62\u5907\u4efd~" > mc.fifo\n        fi\n        sleep 15m # \u6bcf\u6b21\u5907\u4efd\u81f3\u5c11\u95f4\u9694 20\u5206\u949f\n    fi\ndone\n'})})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(f,{...e})}):f(e)}}}]);