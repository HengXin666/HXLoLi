"use strict";(self.webpackChunkhx_loli=self.webpackChunkhx_loli||[]).push([[37538],{28453:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>c});var s=t(96540);const i={},r=s.createContext(i);function a(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:a(n.components),s.createElement(r.Provider,{value:e},n.children)}},33367:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"\u7a0b\u5e8f\u8bed\u8a00/C++/\u73b0\u4ee3C++/\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/C++\u9ed1\u79d1\u6280\u3010\u4e36\u4e36PRETTY\u4e36FUNCTION\u4e36\u4e36\u3011\u975e\u4fb5\u5165\u5f0f\u7684\u7f16\u8bd1\u671f\u53cd\u5c04/index","title":"C++\u9ed1\u79d1\u6280__PRETTY_FUNCTION__\u975e\u4fb5\u5165\u5f0f\u7684\u7f16\u8bd1\u671f\u53cd\u5c04","description":"\u8ba9magicenum(\u9b54\u672f\u679a\u4e3e C++)\u4e0d\u5728\u662f\u9b54\u6cd5, \u6211\u4eec\u4eca\u5929\u5c31\u81ea\u5df1\u5b9e\u73b0\u4e00\u4e2a\u55f7!","source":"@site/docs/002-\u7a0b\u5e8f\u8bed\u8a00/001-C++/003-\u73b0\u4ee3C++/003-\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/005-C++\u9ed1\u79d1\u6280\u3010\u4e36\u4e36PRETTY\u4e36FUNCTION\u4e36\u4e36\u3011\u975e\u4fb5\u5165\u5f0f\u7684\u7f16\u8bd1\u671f\u53cd\u5c04/index.md","sourceDirName":"002-\u7a0b\u5e8f\u8bed\u8a00/001-C++/003-\u73b0\u4ee3C++/003-\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/005-C++\u9ed1\u79d1\u6280\u3010\u4e36\u4e36PRETTY\u4e36FUNCTION\u4e36\u4e36\u3011\u975e\u4fb5\u5165\u5f0f\u7684\u7f16\u8bd1\u671f\u53cd\u5c04","slug":"/\u7a0b\u5e8f\u8bed\u8a00/C++/\u73b0\u4ee3C++/\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/C++\u9ed1\u79d1\u6280\u3010\u4e36\u4e36PRETTY\u4e36FUNCTION\u4e36\u4e36\u3011\u975e\u4fb5\u5165\u5f0f\u7684\u7f16\u8bd1\u671f\u53cd\u5c04/","permalink":"/HXLoLi/docs/\u7a0b\u5e8f\u8bed\u8a00/C++/\u73b0\u4ee3C++/\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/C++\u9ed1\u79d1\u6280\u3010\u4e36\u4e36PRETTY\u4e36FUNCTION\u4e36\u4e36\u3011\u975e\u4fb5\u5165\u5f0f\u7684\u7f16\u8bd1\u671f\u53cd\u5c04/","draft":false,"unlisted":false,"editUrl":"https://github.com/HengXin666/HXLoLi/edit/main/docs/002-\u7a0b\u5e8f\u8bed\u8a00/001-C++/003-\u73b0\u4ee3C++/003-\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/005-C++\u9ed1\u79d1\u6280\u3010\u4e36\u4e36PRETTY\u4e36FUNCTION\u4e36\u4e36\u3011\u975e\u4fb5\u5165\u5f0f\u7684\u7f16\u8bd1\u671f\u53cd\u5c04/index.md","tags":[],"version":"current","lastUpdatedBy":"Heng_Xin_666","lastUpdatedAt":1745851959000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u4ece\u96f6\u624b\u6413HTTP\u670d\u52a1\u5668","permalink":"/HXLoLi/docs/\u7a0b\u5e8f\u8bed\u8a00/C++/\u73b0\u4ee3C++/\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/\u4ece\u96f6\u624b\u6413HTTP\u670d\u52a1\u5668/"},"next":{"title":"\u7c7b\u578b\u64e6\u9664+\u5de5\u5382\u6a21\u5f0f,\u544a\u522bif\u4e36else","permalink":"/HXLoLi/docs/\u7a0b\u5e8f\u8bed\u8a00/C++/\u73b0\u4ee3C++/\u73b0\u4ee3C++\u9879\u76ee\u5b9e\u6218/\u7c7b\u578b\u64e6\u9664+\u5de5\u5382\u6a21\u5f0f,\u544a\u522bif\u4e36else/"}}');var i=t(74848),r=t(28453);const a={},c="C++\u9ed1\u79d1\u6280__PRETTY_FUNCTION__\u975e\u4fb5\u5165\u5f0f\u7684\u7f16\u8bd1\u671f\u53cd\u5c04",d={},l=[{value:"\u4e00\u3001\u8ba4\u8bc6\u7f16\u8bd1\u5668\u5b9e\u73b0\u7684\u5b8f",id:"\u4e00\u8ba4\u8bc6\u7f16\u8bd1\u5668\u5b9e\u73b0\u7684\u5b8f",level:2},{value:"\u4e8c\u3001\u89e3\u6790<code>__PRETTY_FUNCTION__</code>\u5f97\u5230\u6211\u4eec\u9700\u8981\u7684\u5185\u5bb9",id:"\u4e8c\u89e3\u6790__pretty_function__\u5f97\u5230\u6211\u4eec\u9700\u8981\u7684\u5185\u5bb9",level:2},{value:"\u4e09\u3001\u4ece\u5b57\u7b26\u4e32\u53cd\u5c04\u56deenum",id:"\u4e09\u4ece\u5b57\u7b26\u4e32\u53cd\u5c04\u56deenum",level:2}];function o(n){const e={a:"a",blockquote:"blockquote",char:"char",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsxs)(e.h1,{id:"c\u9ed1\u79d1\u6280__pretty_function__\u975e\u4fb5\u5165\u5f0f\u7684\u7f16\u8bd1\u671f\u53cd\u5c04",children:["C++\u9ed1\u79d1\u6280",(0,i.jsx)(e.code,{children:"__PRETTY_FUNCTION__"}),"\u975e\u4fb5\u5165\u5f0f\u7684\u7f16\u8bd1\u671f\u53cd\u5c04"]})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["\u8ba9",(0,i.jsx)(e.a,{href:"https://github.com/Neargye/magic_enum",children:"magic_enum(\u9b54\u672f\u679a\u4e3e C++)"}),"\u4e0d\u5728\u662f\u9b54\u6cd5, \u6211\u4eec\u4eca\u5929\u5c31\u81ea\u5df1\u5b9e\u73b0\u4e00\u4e2a\u55f7!"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u4e00\u8ba4\u8bc6\u7f16\u8bd1\u5668\u5b9e\u73b0\u7684\u5b8f",children:"\u4e00\u3001\u8ba4\u8bc6\u7f16\u8bd1\u5668\u5b9e\u73b0\u7684\u5b8f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-C++",children:'#define LOG(str) \\\n(std::cout << __FILE__ << " -> (" << __LINE__ << ") in [" << __PRETTY_FUNCTION__ << "]: " << str << \'\\n\')\n'})}),"\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsx)(e.tr,{children:(0,i.jsx)(e.th,{style:{textAlign:"center"},children:"##container##"})})}),(0,i.jsx)(e.tbody,{children:(0,i.jsx)(e.tr,{children:(0,i.jsx)(e.td,{style:{textAlign:"center"},children:(0,i.jsx)(e.img,{alt:"Clip_2024-07-26_17-17-30.png ##w600##",src:t(87787).A+"",width:"1933",height:"757"})})})})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"__FILE__"}),": \u83b7\u53d6\u5f53\u524d\u6587\u4ef6\u7684\u8def\u5f84"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"__LINE__"}),": \u83b7\u53d6\u5f53\u524d\u884c\u5728\u4ee3\u7801\u6587\u4ef6\u7684\u7b2c\u51e0\u884c"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"__PRETTY_FUNCTION__"}),": \u83b7\u53d6\u5f53\u524d\u6240\u5728\u51fd\u6570\u7684\u7b7e\u540d\u5b57\u7b26\u4e32 (\u6ce8: \u8fd9\u4e2a\u5b8f\u53ea\u6709GCC\u548cclang\u6709; MSVC\u6ca1\u6709, \u800c\u662f\u4f7f\u7528",(0,i.jsx)(e.code,{children:" __FUNCSIG__"}),"(\u4e0d\u8fc7\u683c\u5f0f\u4e0d\u4e00\u6837))"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.h2,{id:"\u4e8c\u89e3\u6790__pretty_function__\u5f97\u5230\u6211\u4eec\u9700\u8981\u7684\u5185\u5bb9",children:["\u4e8c\u3001\u89e3\u6790",(0,i.jsx)(e.code,{children:"__PRETTY_FUNCTION__"}),"\u5f97\u5230\u6211\u4eec\u9700\u8981\u7684\u5185\u5bb9"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-C++",children:"template<class T, class V>\nstd::string getNameByPrettyFunc(double loli) {\n    return __PRETTY_FUNCTION__;\n}\n\nint main() {\n    std::cout << getNameByPrettyFunc<int, int32_t>(6.66);\n    return 0;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8f93\u51fa:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-C++",children:"std::string getNameByPrettyFunc(double) [with T = int; V = int; std::string = std::__cxx11::basic_string<char>]\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u53ef\u4ee5\u53d1\u73b0\u4ee5\u4e0b\u89c4\u5f8b:"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\u53ef\u4ee5\u4f7f\u7528\u6a21\u7248, \u5e76\u4e14\u4f1a\u8f93\u51fa\u6a21\u7248\u5b9e\u4f8b\u5316\u540e\u7684\u51fd\u6570\u7b7e\u540d, \u5728",(0,i.jsx)(e.code,{children:"[]"}),"\u4e2d\u663e\u793a\u6a21\u7248\u5bf9\u5e94\u7684\u53d8\u91cf"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5f97\u5230\u7684\u7c7b\u578b\u662f\u57fa\u7840\u7c7b\u578b, \u6bd4\u5982 int32_t -> int, std::string -> std::__cxx11::basic_string",(0,i.jsx)(e.char,{})]}),"\n",(0,i.jsx)(e.li,{children:"..."}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u90a3\u4e48\u5982\u679c\u6a21\u7248\u4e2d\u4f7f\u7528\u7684\u662f\u5e38\u91cf\u6574\u6570\u5462?"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-C++",children:"template<class T, T N>\nconst char * getNameByPrettyFunc() {\n    return __PRETTY_FUNCTION__;\n}\n\nint main() {\n    enum class MyEnum {\n        LoLi = 1,\n        imouto = 2,\n    };\n    std::cout << getNameByPrettyFunc<MyEnum, (MyEnum)2>();\n    return 0;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8f93\u51fa:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-C++",children:"const char* getNameByPrettyFunc() [with T = main()::MyEnum; T N = main::MyEnum::imouto]\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6211\u4eec\u60ca\u5947\u7684\u53d1\u73b0, \u5b83\u76f4\u63a5\u5c31\u6620\u5c04\u5230",(0,i.jsx)(e.code,{children:"MyEnum::imouto"}),"!, \u5982\u679c\u6211\u4eec\u53ef\u4ee5\u622a\u53d6\u51fa\u6765, \u4e0d\u5c31\u662f\u6240\u8c13\u7684",(0,i.jsx)(e.code,{children:"\u9759\u6001\u53cd\u5c04"}),"\u4e86\u5417?!"]}),"\n",(0,i.jsx)(e.p,{children:"\u6bd4\u5982:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-C++",children:'template<class T, T N>\nconstexpr const char * _getNameByPrettyFunc() {\n    return __PRETTY_FUNCTION__;\n}\n\ntemplate<class T, T N>\nconstexpr std::string getEnumName() {\n    std::string data = _getNameByPrettyFunc<T, N>();\n    // const char* getNameByPrettyFunc() [with T = main()::MyEnum; T N = main::MyEnum::imouto]\n    std::size_t pos = data.find("N = ");\n    pos += 4;\n    size_t pos2 = data.find_first_of(";]", pos);\n    data = data.substr(pos, pos2 - pos);\n    size_t pos3 = data.rfind(\':\');\n    if (pos3 != data.npos)\n        data = data.substr(pos3 + 1);\n    return data;\n}\n\nint main() {\n    enum class MyEnum {\n        LoLi = 1,\n        imouto = 2,\n    };\n    std::cout << getEnumName<MyEnum, (MyEnum)1>(); // LoLi\n    return 0;\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u4e09\u4ece\u5b57\u7b26\u4e32\u53cd\u5c04\u56deenum",children:"\u4e09\u3001\u4ece\u5b57\u7b26\u4e32\u53cd\u5c04\u56deenum"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-C++",children:'template<class T, T N>\nconstexpr const char * _getNameByPrettyFunc() {\n    return __PRETTY_FUNCTION__;\n}\n\ntemplate<bool C>\nstruct HXEnableIf {\n};\n\ntemplate<>\nstruct HXEnableIf<true> {\n    using type = void;\n};\n\ntemplate<int Begin, int End, class F>\ntypename HXEnableIf<Begin == End>::type staticFor(const F& func) {\n}\n\ntemplate<int Begin, int End, class F>\ntypename HXEnableIf<Begin != End>::type staticFor(const F& func) {\n    func.template call<Begin>();\n    staticFor<Begin + 1, End>(func);\n}\n\ntemplate<class T>\nstruct getEnumNameFunctor {\n    int _n;\n    std::string& _str;\n\n    getEnumNameFunctor(int n, std::string& str) : _n(n)\n                                                , _str(str)\n    {}\n\n    template<int I>\n    constexpr void call() const {\n        if (_n == I)\n            _str = _getNameByPrettyFunc<T, (T)I>();\n    }\n};\n\ntemplate<class T, int Begin, int End>\nconstexpr std::string getEnumName(T n) {\n    std::string data;\n    staticFor<Begin, End + 1>(getEnumNameFunctor<T>((int)n, data));\n    if (data.empty())\n        return "";\n    std::size_t pos = data.find("N = ");\n    pos += 4;\n    size_t pos2 = data.find_first_of(";]", pos);\n    data = data.substr(pos, pos2 - pos);\n    size_t pos3 = data.rfind(\':\');\n    if (pos3 != data.npos)\n        data = data.substr(pos3 + 1);\n    return data;\n}\n\ntemplate<class T>\nconstexpr std::string getEnumName(T n) {\n    return getEnumName<T, -128, 128>(n);\n}\n\ntemplate<class T, T Begin, T End>\nconstexpr T nameFromEnum(const std::string& name) {\n    for (int i = (int)Begin; i <= (int)End; ++i) {\n        if (name == getEnumName<T>((T)i))\n            return T(i);\n    }\n    throw;\n}\n\ntemplate<class T>\nconstexpr T nameFromEnum(const std::string& name) {\n    return nameFromEnum<T, (T)-128, (T)128>(name);\n}\n\nint main() {\n    enum MyEnum {\n        LoLi = 1,\n        imouto = 20,\n    };\n    std::cout << getEnumName<MyEnum>(MyEnum::imouto) << \'\\n\';\n    std::cout << nameFromEnum<MyEnum>("imouto") << \'\\n\';\n    return 0;\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u96be\u70b9\u662f\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u9759\u6001\u7684for\u5faa\u73af."})]})}function u(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(o,{...n})}):o(n)}},87787:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/Clip_2024-07-26_17-17-30-f3e4790001268bba3489ff320c70b4ce.png"}}]);