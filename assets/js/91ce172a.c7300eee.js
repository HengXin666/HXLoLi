"use strict";(self.webpackChunkhx_loli=self.webpackChunkhx_loli||[]).push([[8146],{11786:e=>{e.exports=JSON.parse('{"permalink":"/HXLoLi/blog/2025/09/24/01-\u7f16\u8bd1\u671f\u51fd\u6570\u6307\u9488\u552f\u4e00\u5316","editUrl":"https://github.com/HengXin666/HXLoLi/edit/main/blog/2025/09/24/01-\u7f16\u8bd1\u671f\u51fd\u6570\u6307\u9488\u552f\u4e00\u5316.md","source":"@site/blog/2025/09/24/01-\u7f16\u8bd1\u671f\u51fd\u6570\u6307\u9488\u552f\u4e00\u5316.md","title":"\u3010C++\u3011\u7f16\u8bd1\u671f\u51fd\u6570\u6307\u9488\u552f\u4e00\u5316","description":"\u4e0d\u77e5\u9053\u8d77\u4ec0\u4e48\u540d\u5b57, \u76f4\u63a5\u770b\u8981\u5b9e\u73b0\u4ec0\u4e48\u5427:","date":"2025-09-24T20:34:25.000Z","tags":[{"inline":false,"label":"C++","permalink":"/HXLoLi/blog/tags/C++","description":"C++\u5c0f\u77e5\u8bc6"}],"readingTime":5.97,"hasTruncateMarker":true,"authors":[{"name":"Heng_Xin","title":"\u3053\u3053\u304b\u3089\u5148\u306f\u4e00\u65b9\u901a\u884c\u3060!","url":"https://github.com/HengXin666","email":"282000500@qq.com","socials":{"github":"https://github.com/HengXin666","bilibili":"https://space.bilibili.com/478917126"},"imageURL":"https://avatars.githubusercontent.com/u/103022267","key":"Heng_Xin","page":null}],"frontMatter":{"authors":"Heng_Xin","title":"\u3010C++\u3011\u7f16\u8bd1\u671f\u51fd\u6570\u6307\u9488\u552f\u4e00\u5316","date":"2025-09-24T20:34:25.000Z","tags":["C++"]},"unlisted":false,"lastUpdatedAt":1758720716000,"lastUpdatedBy":"Heng_Xin_666","nextItem":{"title":"\u3010C++\u3011\u5982\u4f55\u5c06\u300c\u5b57\u7b26\u4e32\u300d\u4f5c\u4e3a\u300c\u975e\u7c7b\u578b\u6a21\u677f\u5b9e\u53c2\u300d","permalink":"/HXLoLi/blog/2025/09/14/01-\u5b57\u7b26\u4e32\u4f5c\u4e3a\u975e\u7c7b\u578b\u6a21\u677f\u5b9e\u53c2"}}')},12342:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var s=t(11786),a=t(74848),r=t(28453);const i={authors:"Heng_Xin",title:"\u3010C++\u3011\u7f16\u8bd1\u671f\u51fd\u6570\u6307\u9488\u552f\u4e00\u5316",date:new Date("2025-09-24T20:34:25.000Z"),tags:["C++"]},l=void 0,c={authorsImageUrls:[void 0]},d=[{value:"\u4e00\u3001\u5b9e\u9645\u8fd0\u7528\u7684\u573a\u666f",id:"\u4e00\u5b9e\u9645\u8fd0\u7528\u7684\u573a\u666f",level:2},{value:"\u4e8c\u3001\u95ee\u9898",id:"\u4e8c\u95ee\u9898",level:2},{value:"\u4e09\u3001\u89e3\u51b3\u65b9\u6848",id:"\u4e09\u89e3\u51b3\u65b9\u6848",level:2}];function o(e){const n={a:"a",code:"code",div:"div",h2:"h2",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"\u4e0d\u77e5\u9053\u8d77\u4ec0\u4e48\u540d\u5b57, \u76f4\u63a5\u770b\u8981\u5b9e\u73b0\u4ec0\u4e48\u5427:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cpp",children:"struct Wdf {\n    template <bool... Bs, typename... Ts>\n    std::size_t func(db::FieldPair<Ts>...) {\n        // ...\n    }\n};\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u5982\u4f55\u83b7\u53d6 ",(0,a.jsx)(n.code,{children:"&Wdf::func<Bs..., Ts...>"}),"?"]}),"\n",(0,a.jsxs)(n.div,{className:"markdown-alert markdown-alert-tip",children:["\n",(0,a.jsxs)(n.p,{className:"markdown-alert-title",children:[(0,a.jsx)(n.span,{className:"octicon octicon-tip",style:{"--oct-icon":"url(\"data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-light-bulb mr-2' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath d='M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z'%3E%3C/path%3E%3C/svg%3E\")"}}),"Tip"]}),"\n",(0,a.jsxs)(n.p,{children:["\u6b64\u4e3a\u671f\u671b\u6548\u679c, [",(0,a.jsx)(n.code,{children:"&Wdf::func<Bs..., Ts...>"}),"] \u8bed\u6cd5\u662f\u9519\u8bef\u7684! \u56e0\u4e3a ",(0,a.jsx)(n.code,{children:"Ts..."})," \u65e0\u6cd5\u88ab\u6307\u5b9a."]}),"\n"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u73af\u5883: C++20"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"\u4e00\u5b9e\u9645\u8fd0\u7528\u7684\u573a\u666f",children:"\u4e00\u3001\u5b9e\u9645\u8fd0\u7528\u7684\u573a\u666f"}),"\n",(0,a.jsxs)(n.p,{children:["\u76ee\u7684: \u6570\u636e\u5e93\u7684\u5e93\u90fd\u6709 ",(0,a.jsx)(n.code,{children:"?"})," \u5360\u4f4d\u4ee5\u9632\u6b62\u88abSQL\u6ce8\u5165."]}),"\n",(0,a.jsx)(n.p,{children:"\u6700\u8fd1\u6211\u7f16\u5199\u7684\u5e93\u662f\u57fa\u4e8e\u53cd\u5c04\u7684. \u56e0\u6b64\u4f1a\u6709\u4ee5\u4e0b\u4ee3\u7801:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cpp",children:"template <\n    meta::FixedString... SqlBody,\n    typename... MemberPtr,\n    typename U = meta::GetMemberPtrsClassType<MemberPtr...>\n>\ninternal::StmtCallChain& updateBy(FieldPair<MemberPtr>... fmPair) {\n    return getSqlCache(\n        meta::TypeId::make</* Type / NTTP */>(),\n        [&] {\n            auto sql = MakeSqlStr::makeUpdateSqlFragment<U, MemberPtr...>(fmPair.ptr...);\n            ((sql += meta::ToCharPack<SqlBody>::view()), ...);\n            return internal::StmtCallChain{sql, _db};\n        }\n    ).template bind<true>(fmPair.dataView...);\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u56e0\u4e3a SQL \u90fd\u9700\u8981\u9884\u7f16\u8bd1\u4e00\u4e0b, \u7136\u540e\u4e4b\u540e\u6211\u4eec\u518d\u53ea\u9700\u8981\u6307\u5b9a ",(0,a.jsx)(n.code,{children:"?"})," \u7684\u5185\u5bb9\u5c31\u597d\u4e86:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cpp",children:"class SQLiteStmt {\npublic:\n    SQLiteStmt(std::string_view sql, ::sqlite3* db)\n        : _stmt{nullptr}\n    {\n        // \u9884\u7f16\u8bd1\n        if (::sqlite3_prepare_v2(\n            db, sql.data(), sql.size(),\n            &_stmt, nullptr) != SQLITE_OK\n        ) [[unlikely]] {\n            throw std::runtime_error{/*...*/};\n        }\n    }\n\n    ~SQLiteStmt() noexcept {\n        if (_stmt) [[likely]] {\n            ::sqlite3_finalize(_stmt); // RAII\u4e86 \u9884\u7f16\u8bd1\n        }\n    }\nprivate:\n    ::sqlite3_stmt* _stmt;\n};\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u89c2\u5bdf\u4e0a\u9762\u4ee3\u7801\u4f60\u4f1a\u53d1\u73b0, sql\u6bcf\u6b21\u8c03\u7528, \u90fd\u9700\u8981\u9884\u7f16\u8bd1, \u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u590d\u7528\u5df2\u7ecf\u9884\u7f16\u8bd1\u7684SQL\u554a, \u4e0d\u9700\u8981\u6bcf\u6b21\u521b\u5efa (\u8fd9\u4e5f\u662f\u6b63\u786e\u5e76\u4e14\u671f\u671b\u7684\u505a\u6cd5\u5427qwq)"}),"\n",(0,a.jsxs)(n.p,{children:["\u6545\u6709\u4e4b\u524d\u7684\u4ee3\u7801, \u5176\u4e2d",(0,a.jsx)(n.code,{children:"getSqlCache"}),"\u5c31\u662f\u5b9e\u73b0\u590d\u7528. ",(0,a.jsxs)(n.strong,{children:["\u5176\u4e2d",(0,a.jsx)(n.code,{children:"typeId"}),"\u5c31\u662f\u6839\u636e ",(0,a.jsx)(n.code,{children:"updateBy"})," \u7b49\u65b9\u6cd5\u552f\u4e00\u751f\u6210\u7684!"]})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cpp",children:'class SQLiteDB {\n    template <typename InitFunc>\n        requires (std::is_same_v<std::invoke_result_t<InitFunc>, internal::StmtCallChain>)\n    internal::StmtCallChain& getSqlCache(std::size_t typeId, InitFunc&& init) {\n        auto it = _sqlCache.find(typeId);\n        if (it == _sqlCache.end()) [[unlikely]] {\n            auto [jt, ok] = _sqlCache.emplace(typeId, init());\n            if (!ok) [[unlikely]] {\n                throw std::runtime_error{"getSqlCache: emplace err"};\n            }\n            return jt->second;\n        }\n        return it->second;\n    }\nprivate:\n    ::sqlite3* _db{};\n    std::map<std::size_t, internal::StmtCallChain> _sqlCache{}; // \u7f13\u5b58\u5b83\n};\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u4e8c\u95ee\u9898",children:"\u4e8c\u3001\u95ee\u9898"}),"\n",(0,a.jsxs)(n.div,{className:"markdown-alert markdown-alert-note",children:["\n",(0,a.jsxs)(n.p,{className:"markdown-alert-title",children:[(0,a.jsx)(n.span,{className:"octicon octicon-note",style:{"--oct-icon":"url(\"data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-info mr-2' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath d='M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z'%3E%3C/path%3E%3C/svg%3E\")"}}),"Note"]}),"\n",(0,a.jsxs)(n.p,{children:["\u800c\u56e0\u4e3aAPI\u7684\u8bbe\u8ba1, \u6211\u4eec\u9700\u8981\u5b9a\u4e49\u4e00\u4e9b\u8bed\u53e5\u4f5c\u4e3a\u7f16\u8bd1\u671fNTTP\u4f20\u5165, \u800c\u53c8\u56e0\u4e3a\u5e76\u6ca1\u6709\u5b9e\u73b0 ",(0,a.jsx)(n.code,{children:"+"})," \u8fd0\u7b97\u7b26, \u6211\u7075\u6d3b\u7684\u4f7f\u7528\u4e86\u53ef\u53d8\u53c2\u6570\u66ff\u4ee3."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cpp",children:"template <\n    meta::FixedString... SqlBody,\n    typename... MemberPtr,\n    typename U = meta::GetMemberPtrsClassType<MemberPtr...>\ninternal::StmtCallChain& updateBy(FieldPair<MemberPtr>... fmPair) { /* */ }\n"})}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u7b80\u5355\u4f7f\u7528\u5982\u4e0b:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cpp",metastring:"[c1-\u4ec5\u4f7f\u7528]",children:'db::SQLiteDB db{"test.db"};\nstruct MyTable {\n    db::PrimaryKey<uint64_t> id; // \u4e3b\u952e\n    std::string name;\n};\ndb.createDatabase<MyTable>(); // \u5efa\u8868\n\n// \u63d2\u5165, \u6307\u5b9a\u6307\u5b9a\u5b57\u6bb5, \u5176\u4ed6\u4e3a\u9ed8\u8ba4.\ndb.insertBy(db::FieldPair{\n    &MyTable::name, "\u5f20\u4e09"\n});\nlog::hxLog.info(db.queryAll<MyTable>());\n\n// \u4fee\u6539, \u4fee\u6539\u6307\u5b9a\u5b57\u6bb5, \u5176\u4ed6\u4e0d\u53d8. \u5e76\u6307\u5b9a `where name = ?` \u4f5c\u4e3a\u67e5\u8be2\u6761\u4ef6.\ndb.updateBy<"where name = ?">(db::FieldPair{\n    &MyTable::name, "\u674e\u56db"\n}).bind<true>(std::string{"\u5f20\u4e09"}) // \u7ed1\u5b9a\u989d\u5916\u7684\u67e5\u8be2\u6761\u4ef6\n  .execOnThrow()\n  .getLastChanges()\n  .check();\nlog::hxLog.info(db.queryAll<MyTable>());\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cpp",metastring:"[c1-\u518d\u5c01\u88c5]",children:'template <typename T>\nstruct ThreadSafeInMemoryDAO { // \u4ee3\u7801\u8282\u9009\n    template <bool IsMustSucceed = false, typename... MemberPtr>\n        requires (std::is_same_v<meta::GetMemberPtrsClassType<MemberPtr...>, T>)\n    void updateBy(db::GetFirstPrimaryKeyType<T> id, db::FieldPair<MemberPtr>... mbPair) {\n        std::unique_lock _{_mtx};\n        constexpr auto name = reflection::getMembersNames<T>()[db::GetFirstPrimaryKeyIndex<T>];\n        // \u4f7f\u7528\u5230\u53ef\u53d8\u53c2\u7684\u573a\u666f:\n        auto& stmt = _db.updateBy<"where ", meta::FixedString<name.size() + 1>{name}, "=?">(mbPair...)\n            .template bind<true>(id)\n            .execOnThrow();\n        if constexpr (IsMustSucceed) {\n            stmt.getLastChanges().check();\n        }\n        auto& data = _map[id];\n        ((data.*(mbPair.ptr) = mbPair.dataView), ...);\n    }\n};\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u56de\u5230\u95ee\u9898, \u6211\u4eec\u73b0\u5728\u9700\u8981\u4e00\u4e2a\u53ef\u4ee5\u552f\u4e00\u5316\u65b9\u6cd5\u7684\u4e1c\u897f. \u6211\u4eec\u4e0d\u80fd\u76f4\u63a5\u6307\u5b9a\u53c2\u6570, \u56e0\u4e3a\u53ef\u80fd\u4f1a\u6709\u5176\u4ed6\u53c2\u6570\u548c\u6211\u4eec\u7684\u51b2\u7a81."}),"\n",(0,a.jsxs)(n.p,{children:["\u4e5f\u4e0d\u597d\u6df7\u5408\u7684\u6307\u5b9a ",(0,a.jsx)(n.code,{children:"auto..."})," + ",(0,a.jsx)(n.code,{children:"Ts..."}),", \u56e0\u4e3a\u8fd9\u9700\u8981\u4e25\u683c\u7684\u89c4\u8303\u624d\u53ef\u4ee5\u9632\u6b62\u4e0d\u51fa\u9519. \u5e76\u4e14\u8fd8\u9700\u8981\u987a\u5e8f, \u6bd5\u7adf\u4e0d\u80fd ",(0,a.jsx)(n.code,{children:"<NTTP, T, NTTP', T'>"})," \u8fd9\u6837\u4ea4\u66ff\u6307\u5b9a. \u800c\u4e14\u8fd9\u6837\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"Ts..."})," \u4e00\u822c\u5f97\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u63a8\u5bfc\u624d\u884c. \u603b\u4e4b\u5c31\u662f\u9ebb\u70e6."]}),"\n",(0,a.jsxs)(n.p,{children:["\u6b64\u5904\u5c31\u6709\u5f88\u7b80\u5355\u7684\u65b9\u6cd5: \u6210\u5458\u51fd\u6570\u6307\u9488!, \u4ed6\u53ef\u4ee5\u4f5c\u4e3a ",(0,a.jsx)(n.code,{children:"<auto Ptr>"})," NTTP \u76f4\u63a5\u4f20\u53c2."]}),"\n",(0,a.jsxs)(n.p,{children:["\u5e76\u4e14\u662f ",(0,a.jsx)(n.strong,{children:"\u552f\u4e00"})," \u7684. \u4e5f\u4e0d\u6015\u548c\u5176\u4ed6\u7c7b\u7684\u76f8\u540c\u7c7b\u578b\u5b9e\u4f8b\u5316\u6a21\u677f\u641e\u6df7. \u56e0\u4e3a\u662f C++! \u6210\u5458\u6307\u9488 ",(0,a.jsx)(n.code,{children:"T Class::*"}),", \u81ea\u5e26\u7c7b\u540d\u79f0\u7b7e\u540d."]}),"\n",(0,a.jsx)(n.p,{children:"\u76ee\u524d\u5c31\u9047\u5230\u95ee\u9898:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cpp",children:"struct Wdf {\n    template <bool... Bs>\n    std::size_t func() {\n        return meta::TypeId::make<&Wdf::func<Bs...>>(); // ok\n    }\n};\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u4f46\u662f"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cpp",children:"template <typename T>\nstruct Wrap {};\n\nstruct Wdf {\n    template <bool... Bs, typename... Ts>\n    std::size_t func(Wrap<Ts>...) {\n        return meta::TypeId::make<&Wdf::func<Bs..., Ts...>>(); // err\n    }\n};\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u5728\u6709\u53ef\u53d8\u53c2\u6570(",(0,a.jsx)(n.code,{children:"Bs..."}),")\u60c5\u51b5\u4e0b, \u7b2c\u4e8c\u4e2a\u53c2\u6570 ",(0,a.jsx)(n.code,{children:"Ts..."})," \u662f\u65e0\u6cd5\u901a\u8fc7\u6a21\u677f\u6307\u5b9a\u7684:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://godbolt.org/z/9hW5dK4TG",children:"https://godbolt.org/z/9hW5dK4TG"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cpp",children:"#include <string>\n\ntemplate <typename T>\nstruct Wrap {};\n\nstruct Wdf {\n    template <bool... Bs, typename... Ts>\n    std::size_t func(Wrap<Ts>...) {\n        return {};\n    }\n};\n\nint main() {\n    Wdf{}.func<false>(Wrap<int>{}); // ok\n    Wdf{}.func<false, int>({});     // err\n    return 0;\n}\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cpp",children:"Compiler stderr\n\n<source>: In function 'int main()':\n<source>:15:27: error: no matching function for call to 'Wdf::func<false, int>(<brace-enclosed initializer list>)'\n   15 |     Wdf{}.func<false, int>({});     // err\n      |     ~~~~~~~~~~~~~~~~~~~~~~^~~~\n<source>:15:27: note: there is 1 candidate\n<source>:8:17: note: candidate 1: 'template<bool ...Bs, class ... Ts> std::size_t Wdf::func(Wrap<Ts>...)'\n    8 |     std::size_t func(Wrap<Ts>...) {\n      |                 ^~~~\n<source>:8:17: note: template argument deduction/substitution failed:\n<source>:15:27: error: type/value mismatch at argument 1 in template parameter list for 'template<bool ...Bs, class ... Ts> std::size_t Wdf::func(Wrap<Ts>...)'\n   15 |     Wdf{}.func<false, int>({});     // err\n      |     ~~~~~~~~~~~~~~~~~~~~~~^~~~\n<source>:15:27: note:   expected a constant of type 'bool', got 'int'\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u4e09\u89e3\u51b3\u65b9\u6848",children:"\u4e09\u3001\u89e3\u51b3\u65b9\u6848"}),"\n",(0,a.jsxs)(n.p,{children:["\u6307\u5b9a \u6210\u5458\u51fd\u6570\u6307\u9488\u7c7b\u578b, \u6211\u4eec\u77e5\u9053\u51fd\u6570\u6307\u9488\u662f\u5e26\u6709\u53c2\u6570\u7684: ",(0,a.jsx)(n.code,{children:"\u8fd4\u56de\u503c (*)(\u53c2\u6570)"})]}),"\n",(0,a.jsxs)(n.p,{children:["\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5728\u53c2\u6570\u8fd9\u91cc\u63a8\u5bfc ",(0,a.jsx)(n.code,{children:"Ts..."}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["\u6a21\u677f ",(0,a.jsx)(n.code,{children:"<Bs...>"})," \u90e8\u5206\u53ef\u4ee5\u770b\u4f5c\u4e3a\u51fd\u6570\u540d\u79f0\u7684\u7b7e\u540d."]}),"\n",(0,a.jsx)(n.p,{children:"\u4e8c\u5408\u4e00, \u5c31\u662f\u552f\u4e00\u786e\u5b9a\u7684\u4e86:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cpp",children:"struct Wdf {\n    template <bool... Bs, typename... Ts>\n    std::size_t func(Wrap<Ts>...) {\n        using Ptr = std::size_t (Wdf::*)(db::FieldPair<Ts>...);\n        constexpr Ptr ptr = &Wdf::func<Bs...>;\n        return meta::TypeId::make<ptr>();\n    }\n};\n"})}),"\n",(0,a.jsxs)(n.div,{className:"markdown-alert markdown-alert-tip",children:["\n",(0,a.jsxs)(n.p,{className:"markdown-alert-title",children:[(0,a.jsx)(n.span,{className:"octicon octicon-tip",style:{"--oct-icon":"url(\"data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-light-bulb mr-2' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath d='M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z'%3E%3C/path%3E%3C/svg%3E\")"}}),"Tip"]}),"\n",(0,a.jsxs)(n.p,{children:["\u4ec5\u6307\u5b9a ",(0,a.jsx)(n.code,{children:"meta::TypeId::make<&Wdf::func<Bs...>>()"})," \u800c\u4e0d\u6307\u5b9a ",(0,a.jsx)(n.code,{children:"Ts..."})," \u662f\u9519\u8bef\u7684\u54e6!"]}),"\n",(0,a.jsxs)(n.p,{children:["\u5b83\u6ca1\u6709\u4ee3\u8868\u4efb\u4f55\u7684 ",(0,a.jsx)(n.code,{children:"Ts..."})," \u7c7b\u578b\u5230 TypeId \u4e2d!"]}),"\n",(0,a.jsxs)(n.p,{children:["\u8bf4\u767d\u4e86, \u5c31\u662f TypeId(",(0,a.jsx)(n.code,{children:"func<false>(Wrap<int>{})"}),") == TypeId(",(0,a.jsx)(n.code,{children:"func<false>(Wrap<double>{})"}),")"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var s=t(96540);const a={},r=s.createContext(a);function i(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);