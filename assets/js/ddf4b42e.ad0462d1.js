"use strict";(self.webpackChunkhx_loli=self.webpackChunkhx_loli||[]).push([[97452],{9855:(n,e,s)=>{s.d(e,{A:()=>d});const d=s.p+"assets/images/Clip_2024-09-21_17-16-24-474fbd0baaa2031f2154444194ecae99.png"},28453:(n,e,s)=>{s.d(e,{R:()=>r,x:()=>l});var d=s(96540);const t={},i=d.createContext(t);function r(n){const e=d.useContext(i);return d.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:r(n.components),d.createElement(i.Provider,{value:e},n.children)}},39258:(n,e,s)=>{s.d(e,{A:()=>d});const d=s.p+"assets/images/Clip_2024-09-21_17-19-24-b09d6c57df435158f104786c415c4456.png"},51332:(n,e,s)=>{s.d(e,{A:()=>d});const d=s.p+"assets/images/Clip_2024-09-21_17-35-46-be8d2e3a705989e245e819f853492584.png"},57502:(n,e,s)=>{s.d(e,{A:()=>d});const d=s.p+"assets/images/Clip_2024-09-21_17-14-56-681171b54ecba3ebedef3212f221e959.png"},60594:(n,e,s)=>{s.d(e,{A:()=>d});const d=s.p+"assets/images/Clip_2024-09-21_17-20-46-65dd30b7a4f35d0cddc6bf6f94378fff.png"},69297:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>a});const d=JSON.parse('{"id":"\u5d4c\u5165\u5f0f/ROS/\u6807\u51c6\u4fe1\u606f\u4e0e\u4f7f\u7528\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b/index","title":"009.\u6807\u51c6\u4fe1\u606f\u4e0e\u4f7f\u7528\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b","description":"1. \u6807\u51c6\u6d88\u606f\u5305 std_msgs","source":"@site/docs/011-\u5d4c\u5165\u5f0f/003-ROS/009-\u6807\u51c6\u4fe1\u606f\u4e0e\u4f7f\u7528\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b/index.md","sourceDirName":"011-\u5d4c\u5165\u5f0f/003-ROS/009-\u6807\u51c6\u4fe1\u606f\u4e0e\u4f7f\u7528\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b","slug":"/\u5d4c\u5165\u5f0f/ROS/\u6807\u51c6\u4fe1\u606f\u4e0e\u4f7f\u7528\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b/","permalink":"/HXLoLi/docs/\u5d4c\u5165\u5f0f/ROS/\u6807\u51c6\u4fe1\u606f\u4e0e\u4f7f\u7528\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b/","draft":false,"unlisted":false,"editUrl":"https://github.com/HengXin666/HXLoLi/edit/main/docs/011-\u5d4c\u5165\u5f0f/003-ROS/009-\u6807\u51c6\u4fe1\u606f\u4e0e\u4f7f\u7528\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b/index.md","tags":[],"version":"current","lastUpdatedBy":"Heng_Xin_666","lastUpdatedAt":1745851959000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u5b9e\u73b0IMU\u822a\u5411\u9501\u5b9a","permalink":"/HXLoLi/docs/\u5d4c\u5165\u5f0f/ROS/\u5b9e\u73b0IMU\u822a\u5411\u9501\u5b9a/"},"next":{"title":"\u6805\u683c\u5730\u56fe\u683c\u5f0f\u4e0e\u53d1\u5e03\u5730\u56fe","permalink":"/HXLoLi/docs/\u5d4c\u5165\u5f0f/ROS/\u6805\u683c\u5730\u56fe\u683c\u5f0f\u4e0e\u53d1\u5e03\u5730\u56fe/"}}');var t=s(74848),i=s(28453);const r={},l="009.\u6807\u51c6\u4fe1\u606f\u4e0e\u4f7f\u7528\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b",c={},a=[{value:"1. \u6807\u51c6\u6d88\u606f\u5305 std_msgs",id:"1-\u6807\u51c6\u6d88\u606f\u5305-std_msgs",level:2},{value:"2. \u5e38\u7528\u6d88\u606f\u5305 common_msgs",id:"2-\u5e38\u7528\u6d88\u606f\u5305-common_msgs",level:2},{value:"2.1 \u51e0\u4f55\u5305 geometry_msgs",id:"21-\u51e0\u4f55\u5305-geometry_msgs",level:3},{value:"2.2 \u4f20\u611f\u5668\u5305 sensor_msgs",id:"22-\u4f20\u611f\u5668\u5305-sensor_msgs",level:3},{value:"3. \u751f\u6210\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b",id:"3-\u751f\u6210\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b",level:2},{value:"4. \u5728ROS\u4e2d\u4f7f\u7528C++\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b",id:"4-\u5728ros\u4e2d\u4f7f\u7528c\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b",level:2}];function o(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"009\u6807\u51c6\u4fe1\u606f\u4e0e\u4f7f\u7528\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b",children:"009.\u6807\u51c6\u4fe1\u606f\u4e0e\u4f7f\u7528\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b"})}),"\n",(0,t.jsx)(e.h2,{id:"1-\u6807\u51c6\u6d88\u606f\u5305-std_msgs",children:"1. \u6807\u51c6\u6d88\u606f\u5305 std_msgs"}),"\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsx)(e.tr,{children:(0,t.jsx)(e.th,{style:{textAlign:"center"},children:"##container##"})})}),(0,t.jsx)(e.tbody,{children:(0,t.jsx)(e.tr,{children:(0,t.jsx)(e.td,{style:{textAlign:"center"},children:(0,t.jsx)(e.img,{alt:"Clip_2024-09-21_17-14-56.png ##w600##",src:s(57502).A+"",width:"1386",height:"739"})})})})]}),"\n",(0,t.jsx)(e.h2,{id:"2-\u5e38\u7528\u6d88\u606f\u5305-common_msgs",children:"2. \u5e38\u7528\u6d88\u606f\u5305 common_msgs"}),"\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsx)(e.tr,{children:(0,t.jsx)(e.th,{style:{textAlign:"center"},children:"##container##"})})}),(0,t.jsx)(e.tbody,{children:(0,t.jsx)(e.tr,{children:(0,t.jsx)(e.td,{style:{textAlign:"center"},children:(0,t.jsx)(e.img,{alt:"Clip_2024-09-21_17-16-24.png ##w600##",src:s(9855).A+"",width:"1054",height:"852"})})})})]}),"\n",(0,t.jsx)(e.p,{children:"\u4ee5\u4e0b\u4ecb\u7ecd\u4e24\u4e2a\u5e38\u7528\u7684\u5305"}),"\n",(0,t.jsx)(e.h3,{id:"21-\u51e0\u4f55\u5305-geometry_msgs",children:"2.1 \u51e0\u4f55\u5305 geometry_msgs"}),"\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsx)(e.tr,{children:(0,t.jsx)(e.th,{style:{textAlign:"center"},children:"##container##"})})}),(0,t.jsx)(e.tbody,{children:(0,t.jsx)(e.tr,{children:(0,t.jsx)(e.td,{style:{textAlign:"center"},children:(0,t.jsx)(e.img,{alt:"Clip_2024-09-21_17-19-24.png ##w600##",src:s(39258).A+"",width:"1442",height:"621"})})})})]}),"\n",(0,t.jsx)(e.h3,{id:"22-\u4f20\u611f\u5668\u5305-sensor_msgs",children:"2.2 \u4f20\u611f\u5668\u5305 sensor_msgs"}),"\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsx)(e.tr,{children:(0,t.jsx)(e.th,{style:{textAlign:"center"},children:"##container##"})})}),(0,t.jsx)(e.tbody,{children:(0,t.jsx)(e.tr,{children:(0,t.jsx)(e.td,{style:{textAlign:"center"},children:(0,t.jsx)(e.img,{alt:"Clip_2024-09-21_17-20-46.png ##w600##",src:s(60594).A+"",width:"1433",height:"763"})})})})]}),"\n",(0,t.jsx)(e.h2,{id:"3-\u751f\u6210\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b",children:"3. \u751f\u6210\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\u5efa\u5305 (\u6d88\u606f\u4e00\u822c\u4ee5",(0,t.jsx)(e.code,{children:"_msgs"}),"\u7ed3\u5c3e)"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sh",children:"catkin_create_pkg qq_msgs roscpp rospy std_msgs message_generatio\nn message_runtime\n"})}),"\n",(0,t.jsxs)(e.ol,{start:"2",children:["\n",(0,t.jsxs)(e.li,{children:["\u5728\u5de5\u4f5c\u76ee\u5f55\u521b\u5efa\u6587\u4ef6\u5939",(0,t.jsx)(e.code,{children:"msg"}),", \u5e76\u521b\u5efa",(0,t.jsx)(e.code,{children:".msg"}),"\u6587\u4ef6"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sh",children:"qq_msgs\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 include\n\u2502\xa0\xa0 \u2514\u2500\u2500 qq_msgs\n\u251c\u2500\u2500 msg\n\u2502\xa0\xa0 \u2514\u2500\u2500 Carry.msg # \u8fd9\u4e2a\n\u251c\u2500\u2500 package.xml\n\u2514\u2500\u2500 src\n"})}),"\n",(0,t.jsxs)(e.ol,{start:"3",children:["\n",(0,t.jsxs)(e.li,{children:["\u7f16\u5199\u5185\u5bb9: \u7c7b\u4f3c\u4e8e(",(0,t.jsx)(e.a,{href:"/HXLoLi/docs/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/C++/C++%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/Protobuf/Protobuf%E4%BD%BF%E7%94%A8/",children:"Protobuf\u4f7f\u7528"}),")"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-msg",children:"string name\nint64 id\nstring data\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsx)(e.tr,{children:(0,t.jsx)(e.th,{style:{textAlign:"center"},children:"##container##"})})}),(0,t.jsx)(e.tbody,{children:(0,t.jsx)(e.tr,{children:(0,t.jsx)(e.td,{style:{textAlign:"center"},children:(0,t.jsx)(e.img,{alt:"Clip_2024-09-21_17-35-46.png ##w600##",src:s(51332).A+"",width:"1412",height:"763"})})})})]}),"\n",(0,t.jsxs)(e.ol,{start:"4",children:["\n",(0,t.jsx)(e.li,{children:"\u7f16\u8bd1"}),"\n"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u786e\u4fddcmake\u4ece\u4e0a\u5230\u4e0b\u6709\u4ee5\u4e0b\u5185\u5bb9:"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-CMake",children:"find_package(catkin REQUIRED COMPONENTS\n  message_generation\n  message_runtime\n  roscpp\n  rospy\n  std_msgs\n)\n\nadd_message_files(\n  FILES\n  Carry.msg\n)\n\n# \u8fd9\u53e5\u8868\u9762\u65b0\u7684\u6d88\u606f\u7c7b\u578b\u9700\u8981\u4f9d\u8d56\u7684\u5176\u4ed6\u6d88\u606f\u7c7b\u578b\u5217\u8868\ngenerate_messages(\n  DEPENDENCIES\n  std_msgs\n)\n\n# \u6ce8\u610f\u68c0\u67e5 message_runtime \u662f\u5426\u5b58\u5728, \u6ca1\u6709\u5c31\u8865\u4e0a\ncatkin_package(\n#  INCLUDE_DIRS include\n#  LIBRARIES qq_msgs\n CATKIN_DEPENDS message_generation message_runtime roscpp rospy std_msgs\n#  DEPENDS system_lib\n)\n\n# ... \u5269\u4e0b\u7684\u5c31\u4e0d\u7528\u52a8 (\u9ed8\u8ba4\u5373\u53ef)\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:".xml \u4e2d"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\u786e\u4fdd\u6709\u4e0b\u9762\u4e00\u5bf9"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-xml",children:"  <build_depend>message_generation</build_depend>\n  <build_depend>message_runtime</build_depend>\n\n  <exec_depend>message_generation</exec_depend>\n  <exec_depend>message_runtime</exec_depend>\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u7136\u540e\u7f16\u8bd1: ",(0,t.jsx)(e.code,{children:"catkin_make"})]}),"\n",(0,t.jsx)(e.h2,{id:"4-\u5728ros\u4e2d\u4f7f\u7528c\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b",children:"4. \u5728ROS\u4e2d\u4f7f\u7528C++\u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"\u4fee\u6539 \u4e4b\u524d\u7684\u53d1\u5e03\u8005\u7684\u4ee3\u7801"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-C++",children:'#include <ros/ros.h>\n#include <std_msgs/String.h>\n#include <qq_msgs/Carry.h>\n\nint main(int argc, char *argv[]) {\n    ros::init(argc, argv, "chao_node");\n\n    ros::NodeHandle nh;\n    ros::Publisher pub = nh.advertise<qq_msgs::Carry>("HX_Home", 16);\n\n    ros::Rate loop_rete(10); // \u63a7\u5236\u5faa\u73af\u6bcf\u79d2\u6267\u884c\u7684\u6b21\u6570\n    int i = 0;\n    while (ros::ok()) { // \u5982\u679c ctrl + c \u65e0\u6cd5\u9000\u51fa, \u5c31\u6362\u6210 ros::ok()\n        printf("\u8f93\u51fa %d\\n", ++i);\n\n        qq_msgs::Carry msg;\n        msg.name = "\u5f20\u4e09";\n        msg.id = 114514;\n        msg.data = "\u4f60\u597d\u554a, \u6211\u662f " + std::to_string(i);\n        pub.publish(msg); // \u53d1\u9001\u6d88\u606f\n\n        loop_rete.sleep();\n    }\n    return 0;\n}\n'})}),"\n",(0,t.jsxs)(e.ol,{start:"2",children:["\n",(0,t.jsxs)(e.li,{children:["\u4fee\u6539cmake, ",(0,t.jsx)(e.code,{children:"find_package"}),"\u4e2d\u6dfb\u52a0",(0,t.jsx)(e.code,{children:"qq_msg"}),", \u5e76\u6dfb\u52a0",(0,t.jsx)(e.code,{children:"add_dependencies"}),","]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-CMake",children:"find_package(catkin REQUIRED COMPONENTS\n  roscpp\n  rospy\n  std_msgs\n  qq_msgs # \u6dfb\u52a0\u8fd9\u4e2a, \u5e76\u4e14\u5728\u672b\u5c3e (\u6309\u7167\u987a\u5e8f\u7f16\u8bd1\u7684)\n)\n\nadd_executable(chao_node src/chao_node.cpp)\n\n# \u6dfb\u52a0\u4f9d\u8d56\u9879\nadd_dependencies(chao_node qq_msgs_generate_messages_cpp)\n\ntarget_link_libraries(chao_node\n  ${catkin_LIBRARIES}\n)\n"})}),"\n",(0,t.jsxs)(e.ol,{start:"3",children:["\n",(0,t.jsxs)(e.li,{children:["\u4fee\u6539",(0,t.jsx)(e.code,{children:".xml"}),", \u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9:"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-xml",children:"<build_depend>qq_msgs</build_depend>\n<exec_depend>qq_msgs</exec_depend>\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u7136\u540e\u7f16\u8bd1\u5373\u53ef (\u53e6\u4e00\u4e2a\u8ba2\u9605\u8005\u4fee\u6539\u540c\u4e0a)"})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(o,{...n})}):o(n)}}}]);